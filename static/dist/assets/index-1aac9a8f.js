var rl=Object.defineProperty;var el=(t,r,e)=>r in t?rl(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var vi=(t,r,e)=>(el(t,typeof r!="symbol"?r+"":r,e),e);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();function Zt(){}function co(t,r){for(const e in r)t[e]=r[e];return t}function Cs(t){return t()}function po(){return Object.create(null)}function Fr(t){t.forEach(Cs)}function Ds(t){return typeof t=="function"}function Ke(t,r){return t!=t?r==r:t!==r||t&&typeof t=="object"||typeof t=="function"}let cn;function nl(t,r){return t===r?!0:(cn||(cn=document.createElement("a")),cn.href=r,t===cn.href)}function il(t){return Object.keys(t).length===0}function vo(t){const r={};for(const e in t)e[0]!=="$"&&(r[e]=t[e]);return r}function tt(t,r){t.appendChild(r)}function rr(t,r,e){t.insertBefore(r,e||null)}function Jt(t){t.parentNode&&t.parentNode.removeChild(t)}function at(t){return document.createElement(t)}function ws(t){return document.createTextNode(t)}function Ot(){return ws(" ")}function Yt(t,r,e,n){return t.addEventListener(r,e,n),()=>t.removeEventListener(r,e,n)}function V(t,r,e){e==null?t.removeAttribute(r):t.getAttribute(r)!==e&&t.setAttribute(r,e)}function Os(t){return t===""?null:+t}function al(t){return Array.from(t.childNodes)}function ol(t,r){r=""+r,t.data!==r&&(t.data=r)}function $t(t,r){t.value=r??""}function Tr(t,r,e,n){e==null?t.style.removeProperty(r):t.style.setProperty(r,e,n?"important":"")}function sl(t,r,{bubbles:e=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:r,bubbles:e,cancelable:n})}let Le;function Ae(t){Le=t}function Yn(){if(!Le)throw new Error("Function called outside component initialization");return Le}function ul(t){Yn().$$.before_update.push(t)}function fl(t){Yn().$$.on_mount.push(t)}function ll(t){Yn().$$.on_destroy.push(t)}function cl(){const t=Yn();return(r,e,{cancelable:n=!1}={})=>{const i=t.$$.callbacks[r];if(i){const a=sl(r,e,{cancelable:n});return i.slice().forEach(o=>{o.call(t,a)}),!a.defaultPrevented}return!0}}const re=[],ir=[];let ue=[];const ki=[],Ms=Promise.resolve();let Fi=!1;function Rs(){Fi||(Fi=!0,Ms.then(Ts))}function dl(){return Rs(),Ms}function Gi(t){ue.push(t)}function ho(t){ki.push(t)}const hi=new Set;let Qr=0;function Ts(){if(Qr!==0)return;const t=Le;do{try{for(;Qr<re.length;){const r=re[Qr];Qr++,Ae(r),pl(r.$$)}}catch(r){throw re.length=0,Qr=0,r}for(Ae(null),re.length=0,Qr=0;ir.length;)ir.pop()();for(let r=0;r<ue.length;r+=1){const e=ue[r];hi.has(e)||(hi.add(e),e())}ue.length=0}while(re.length);for(;ki.length;)ki.pop()();Fi=!1,hi.clear(),Ae(t)}function pl(t){if(t.fragment!==null){t.update(),Fr(t.before_update);const r=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,r),t.after_update.forEach(Gi)}}function vl(t){const r=[],e=[];ue.forEach(n=>t.indexOf(n)===-1?r.push(n):e.push(n)),e.forEach(n=>n()),ue=r}const wn=new Set;let Yr;function gi(){Yr={r:0,c:[],p:Yr}}function mi(){Yr.r||Fr(Yr.c),Yr=Yr.p}function Xt(t,r){t&&t.i&&(wn.delete(t),t.i(r))}function lr(t,r,e,n){if(t&&t.o){if(wn.has(t))return;wn.add(t),Yr.c.push(()=>{wn.delete(t),n&&(e&&t.d(1),n())}),t.o(r)}else n&&n()}function go(t,r,e){const n=t.$$.props[r];n!==void 0&&(t.$$.bound[n]=e,e(t.$$.ctx[n]))}function He(t){t&&t.c()}function le(t,r,e){const{fragment:n,after_update:i}=t.$$;n&&n.m(r,e),Gi(()=>{const a=t.$$.on_mount.map(Cs).filter(Ds);t.$$.on_destroy?t.$$.on_destroy.push(...a):Fr(a),t.$$.on_mount=[]}),i.forEach(Gi)}function ce(t,r){const e=t.$$;e.fragment!==null&&(vl(e.after_update),Fr(e.on_destroy),e.fragment&&e.fragment.d(r),e.on_destroy=e.fragment=null,e.ctx=[])}function hl(t,r){t.$$.dirty[0]===-1&&(re.push(t),Rs(),t.$$.dirty.fill(0)),t.$$.dirty[r/31|0]|=1<<r%31}function $e(t,r,e,n,i,a,o,s=[-1]){const u=Le;Ae(t);const f=t.$$={fragment:null,ctx:[],props:a,update:Zt,not_equal:i,bound:po(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(u?u.$$.context:[])),callbacks:po(),dirty:s,skip_bound:!1,root:r.target||u.$$.root};o&&o(f.root);let l=!1;if(f.ctx=e?e(t,r.props||{},(c,d,...v)=>{const p=v.length?v[0]:d;return f.ctx&&i(f.ctx[c],f.ctx[c]=p)&&(!f.skip_bound&&f.bound[c]&&f.bound[c](p),l&&hl(t,c)),d}):[],f.update(),l=!0,Fr(f.before_update),f.fragment=n?n(f.ctx):!1,r.target){if(r.hydrate){const c=al(r.target);f.fragment&&f.fragment.l(c),c.forEach(Jt)}else f.fragment&&f.fragment.c();r.intro&&Xt(t.$$.fragment),le(t,r.target,r.anchor),Ts()}Ae(u)}class Je{constructor(){vi(this,"$$");vi(this,"$$set")}$destroy(){ce(this,1),this.$destroy=Zt}$on(r,e){if(!Ds(e))return Zt;const n=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return n.push(e),()=>{const i=n.indexOf(e);i!==-1&&n.splice(i,1)}}$set(r){this.$$set&&!il(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}}const gl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(gl);function ml(t){let r,e,n,i,a,o;return{c(){r=at("form"),e=at("input"),n=Ot(),i=at("button"),i.innerHTML='<span class="material-symbols-outlined">search</span>',V(e,"id","streamer"),V(e,"type","text"),V(e,"placeholder","Streamer"),V(e,"class","input input-bordered w-full max-w-xs join-item"),V(i,"class","btn btn-primary join-item"),V(r,"id","streamerForm"),V(r,"class","join")},m(s,u){rr(s,r,u),tt(r,e),$t(e,t[0]),tt(r,n),tt(r,i),a||(o=[Yt(e,"input",t[3]),Yt(r,"submit",t[1])],a=!0)},p(s,[u]){u&1&&e.value!==s[0]&&$t(e,s[0])},i:Zt,o:Zt,d(s){s&&Jt(r),a=!1,Fr(o)}}}function bl(t,r,e){let n,{fileContainerBackground:i}=r;function a(s){s.preventDefault();const u={"Client-ID":"kimne78kx3ncx6brgo4mv6wki5h1ko"},f=`query { user(login: "${n}") { stream() { previewImageURL(width: 1920, height: 1080) } } }`,l={method:"POST",headers:u,body:JSON.stringify({query:f})};fetch("https://gql.twitch.tv/gql",l).then(c=>c.json()).then(c=>{try{e(2,i=c.data.user.stream.previewImageURL)}catch(d){console.log(d)}}).catch(c=>{console.log(c)})}function o(){n=this.value,e(0,n)}return t.$$set=s=>{"fileContainerBackground"in s&&e(2,i=s.fileContainerBackground)},[n,a,i,o]}class yl extends Je{constructor(r){super(),$e(this,r,bl,ml,Ke,{fileContainerBackground:2})}}function xl(t){let r,e,n,i,a,o,s,u,f,l,c,d,v,p,h,g,m,b,y,S,E;return{c(){r=at("div"),e=at("label"),e.innerHTML='<span class="label-text">Votre message</span>',n=Ot(),i=at("textarea"),a=Ot(),o=at("div"),s=at("label"),s.innerHTML='<span class="label-text">Couleur</span>',u=Ot(),f=at("input"),l=Ot(),c=at("div"),d=at("label"),d.innerHTML='<span class="label-text">Police d&#39;écriture</span>',v=Ot(),p=at("input"),h=Ot(),g=at("div"),m=at("label"),m.innerHTML='<span class="label-text">Taille</span>',b=Ot(),y=at("input"),V(e,"for","text"),V(e,"class","label"),V(i,"id","text"),V(i,"class","textarea textarea-bordered h-12 w-full"),V(i,"placeholder","Votre message"),V(s,"for","color"),V(s,"class","label"),V(f,"id","color"),V(f,"type","color"),V(f,"placeholder","Couleur de texte"),V(f,"class","input input-bordered w-full max-w-xs"),V(d,"for","font"),V(d,"class","label"),V(p,"id","font"),V(p,"type","text"),V(p,"placeholder","Police d'écriture"),V(p,"class","input input-bordered w-full max-w-xs"),V(m,"for","fontSize"),V(m,"class","label"),V(y,"id","fontSize"),V(y,"type","number"),V(y,"placeholder","Taille de la police"),V(y,"class","input input-bordered w-full max-w-xs")},m(x,_){rr(x,r,_),tt(r,e),tt(r,n),tt(r,i),$t(i,t[0].text),rr(x,a,_),rr(x,o,_),tt(o,s),tt(o,u),tt(o,f),$t(f,t[0].color),rr(x,l,_),rr(x,c,_),tt(c,d),tt(c,v),tt(c,p),$t(p,t[0].font),rr(x,h,_),rr(x,g,_),tt(g,m),tt(g,b),tt(g,y),$t(y,t[0].fontSize),S||(E=[Yt(i,"input",t[3]),Yt(f,"input",t[4]),Yt(p,"input",t[5]),Yt(y,"input",t[6])],S=!0)},p(x,[_]){_&1&&$t(i,x[0].text),_&1&&$t(f,x[0].color),_&1&&p.value!==x[0].font&&$t(p,x[0].font),_&1&&Os(y.value)!==x[0].fontSize&&$t(y,x[0].fontSize)},i:Zt,o:Zt,d(x){x&&(Jt(r),Jt(a),Jt(o),Jt(l),Jt(c),Jt(h),Jt(g)),S=!1,Fr(E)}}}function Sl(t,r,e){let n={text:"",color:"#FFFFFF",font:"Arial",fontSize:62},{textData:i}=r,{moveableText:a}=r;function o(){e(1,i=n),a&&setTimeout(()=>{a.updateRect()},20)}function s(){e(1,i=n)}function u(){n.text=this.value,e(0,n)}function f(){n.color=this.value,e(0,n)}function l(){n.font=this.value,e(0,n)}function c(){n.fontSize=Os(this.value),e(0,n)}return t.$$set=d=>{"textData"in d&&e(1,i=d.textData),"moveableText"in d&&e(2,a=d.moveableText)},t.$$.update=()=>{t.$$.dirty&1&&(o(),n.text,n.font,n.fontSize),t.$$.dirty&1&&(s(),n.color)},[n,i,a,u,f,l,c]}class _l extends Je{constructor(r){super(),$e(this,r,Sl,xl,Ke,{textData:1,moveableText:2})}}function El(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return r.map(function(n){return n.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function Cl(t,r){return r.replace(/([^}{]*){/gm,function(e,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function _r(t,r){return function(e){e&&(t[r]=e)}}function Ps(t,r,e){return function(n){n&&(t[r][e]=n)}}function mo(t,r){return function(e){var n=e.prototype;t.forEach(function(i){r(n,i)})}}function Dl(t,r){return r===void 0&&(r={}),function(e,n){t.forEach(function(i){var a=r[i]||i;a in e||(e[a]=function(){for(var o,s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];var f=(o=this[n])[i].apply(o,s);return f===this[n]?this:f})})}}var wl="function",Ol="object",Ml="string",Rl="number",ba="undefined",Is=typeof window!==ba,Tl=typeof document!==ba&&document,Pl=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Bt=1e-7,dn={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,r){return t*r/100},vw:function(t,r){return r===void 0&&(r=window.innerWidth),t/100*r},vh:function(t,r){return r===void 0&&(r=window.innerHeight),t/100*r},vmax:function(t,r){return r===void 0&&(r=Math.max(window.innerWidth,window.innerHeight)),t/100*r},vmin:function(t,r){return r===void 0&&(r=Math.min(window.innerWidth,window.innerHeight)),t/100*r}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Il(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),i=0,r=0;r<e;r++)for(var a=arguments[r],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function Lr(t,r,e,n){return(t*n+r*e)/(e+n)}function Vn(t){return typeof t===ba}function hr(t){return t&&typeof t===Ol}function zt(t){return Array.isArray(t)}function Qt(t){return typeof t===Ml}function de(t){return typeof t===Rl}function ya(t){return typeof t===wl}function Al(t,r){var e=t===""||t==" ",n=r===""||r==" ";return n&&e||t===r}function As(t,r,e,n,i){var a=xa(t,r,e);return a?e:Bl(t,r,e+1,n,i)}function xa(t,r,e){if(!t.ignore)return null;var n=r.slice(Math.max(e-3,0),e+3).join("");return new RegExp(t.ignore).exec(n)}function Bl(t,r,e,n,i){for(var a=function(f){var l=r[f].trim();if(l===t.close&&!xa(t,r,f))return{value:f};var c=f,d=tr(i,function(v){var p=v.open;return p===l});if(d&&(c=As(d,r,f,n,i)),c===-1)return o=f,"break";f=c,o=f},o,s=e;s<n;++s){var u=a(s);if(s=o,typeof u=="object")return u.value;if(u==="break")break}return-1}function Sa(t,r){var e=Qt(r)?{separator:r}:r,n=e.separator,i=n===void 0?",":n,a=e.isSeparateFirst,o=e.isSeparateOnlyOpenClose,s=e.isSeparateOpenClose,u=s===void 0?o:s,f=e.openCloseCharacters,l=f===void 0?Pl:f,c=l.map(function(_){var C=_.open,D=_.close;return C===D?C:C+"|"+D}).join("|"),d="(\\s*"+i+"\\s*|"+c+"|\\s+)",v=new RegExp(d,"g"),p=t.split(v).filter(function(_){return _&&_!=="undefined"}),h=p.length,g=[],m=[];function b(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var y=function(_){var C=p[_].trim(),D=_,M=tr(l,function(R){var A=R.open;return A===C}),I=tr(l,function(R){var A=R.close;return A===C});if(M){if(D=As(M,p,_,h,l),D!==-1&&u)return b()&&a||(g.push(p.slice(_,D+1).join("")),_=D,a)?(S=_,"break"):(S=_,"continue")}else if(I&&!xa(I,p,_)){var T=Il(l);return T.splice(l.indexOf(I),1),{value:Sa(t,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:o,isSeparateOpenClose:u,openCloseCharacters:T})}}else if(Al(C,i)&&!o)return b(),a?(S=_,"break"):(S=_,"continue");D===-1&&(D=h-1),m.push(p.slice(_,D+1).join("")),_=D,S=_},S,E=0;E<h;++E){var x=y(E);if(E=S,typeof x=="object")return x.value;if(x==="break")break}return m.length&&g.push(m.join("")),g}function Br(t){return Sa(t,"")}function Vr(t){return Sa(t,",")}function Bs(t){var r=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!r||r.length<4?{}:{prefix:r[1],value:r[2],suffix:r[3]}}function Ze(t){var r=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!r)return{prefix:"",unit:"",value:NaN};var e=r[1],n=r[2],i=r[3];return{prefix:e,unit:i,value:parseFloat(n)}}function zs(t){return t.replace(/[\s-_]+([^\s-_])/g,function(r,e){return e.toUpperCase()})}function On(t,r){return r===void 0&&(r="-"),t.replace(/([a-z])([A-Z])/g,function(e,n,i){return""+n+r+i.toLowerCase()})}function We(){return Date.now?Date.now():new Date().getTime()}function wr(t,r,e){e===void 0&&(e=-1);for(var n=t.length,i=0;i<n;++i)if(r(t[i],i,t))return i;return e}function tr(t,r,e){var n=wr(t,r);return n>-1?t[n]:e}var ks=function(){var t=We(),r=Is&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return r?r.bind(window):function(e){var n=We(),i=setTimeout(function(){e(n-t)},1e3/60);return i}}(),zl=function(){var t=Is&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(r){clearTimeout(r)}}();function Or(t){return Object.keys(t)}function kl(t){var r=Or(t);return r.map(function(e){return t[e]})}function _t(t,r){var e=Ze(t),n=e.value,i=e.unit;if(hr(r)){var a=r[i];if(a){if(ya(a))return a(n);if(dn[i])return dn[i](n,a)}}else if(i==="%")return n*r/100;return dn[i]?dn[i](n):n}function Ni(t,r,e){return Math.max(r,Math.min(t,e))}function bo(t,r,e,n){return n===void 0&&(n=t[0]/t[1]),[[ft(r[0],Bt),ft(r[0]/n,Bt)],[ft(r[1]*n,Bt),ft(r[1],Bt)]].filter(function(i){return i.every(function(a,o){var s=r[o],u=ft(s,Bt);return e?a<=s||a<=u:a>=s||a>=u})})[0]||t}function Fs(t,r,e,n){if(!n)return t.map(function(v,p){return Ni(v,r[p],e[p])});var i=t[0],a=t[1],o=n===!0?i/a:n,s=bo(t,r,!1,o),u=s[0],f=s[1],l=bo(t,e,!0,o),c=l[0],d=l[1];return i<u||a<f?(i=u,a=f):(i>c||a>d)&&(i=c,a=d),[i,a]}function Fl(t){for(var r=t.length,e=0,n=r-1;n>=0;--n)e+=t[n];return e}function Li(t){for(var r=t.length,e=0,n=r-1;n>=0;--n)e+=t[n];return r?e/r:0}function Tt(t,r){var e=r[0]-t[0],n=r[1]-t[1],i=Math.atan2(n,e);return i>=0?i:i+Math.PI*2}function Gl(t){return[0,1].map(function(r){return Li(t.map(function(e){return e[r]}))})}function yo(t){var r=Gl(t),e=Tt(r,t[0]),n=Tt(r,t[1]);return e<n&&n-e<Math.PI||e>n&&n-e<-Math.PI?1:-1}function Er(t,r){return Math.sqrt(Math.pow((r?r[0]:0)-t[0],2)+Math.pow((r?r[1]:0)-t[1],2))}function ft(t,r){if(!r)return t;var e=1/r;return Math.round(t/r)/e}function xo(t,r){return t.forEach(function(e,n){t[n]=ft(t[n],r)}),t}function Nl(t){for(var r=[],e=0;e<t;++e)r.push(e);return r}function Ll(t){return t.reduce(function(r,e){return r.concat(e)},[])}function Gs(t,r){t.indexOf(r)===-1&&t.push(r)}function Gt(t,r){return t.classList?t.classList.contains(r):!!t.className.match(new RegExp("(\\s|^)"+r+"(\\s|$)"))}function Ns(t,r){t.classList?t.classList.add(r):t.className+=" "+r}function Ls(t,r){if(t.classList)t.classList.remove(r);else{var e=new RegExp("(\\s|^)"+r+"(\\s|$)");t.className=t.className.replace(e," ")}}function Ht(t,r,e,n){t.addEventListener(r,e,n)}function Ft(t,r,e,n){t.removeEventListener(r,e,n)}function xe(t){return(t==null?void 0:t.ownerDocument)||Tl}function _a(t){return xe(t).documentElement}function Gr(t){return xe(t).body}function Ar(t){var r;return((r=t==null?void 0:t.ownerDocument)===null||r===void 0?void 0:r.defaultView)||window}function Hs(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function Se(t){return hr(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var Hl=function(){function t(){this.keys=[],this.values=[]}var r=t.prototype;return r.get=function(e){return this.values[this.keys.indexOf(e)]},r.set=function(e,n){var i=this.keys,a=this.values,o=i.indexOf(e),s=o===-1?i.length:o;i[s]=e,a[s]=n},t}(),Wl=function(){function t(){this.object={}}var r=t.prototype;return r.get=function(e){return this.object[e]},r.set=function(e,n){this.object[e]=n},t}(),ql=typeof Map=="function",Xl=function(){function t(){}var r=t.prototype;return r.connect=function(e,n){this.prev=e,this.next=n,e&&(e.next=this),n&&(n.prev=this)},r.disconnect=function(){var e=this.prev,n=this.next;e&&(e.next=n),n&&(n.prev=e)},r.getIndex=function(){for(var e=this,n=-1;e;)e=e.prev,++n;return n},t}();function Yl(t,r){var e=[],n=[];return t.forEach(function(i){var a=i[0],o=i[1],s=new Xl;e[a]=s,n[o]=s}),e.forEach(function(i,a){i.connect(e[a-1])}),t.filter(function(i,a){return!r[a]}).map(function(i,a){var o=i[0],s=i[1];if(o===s)return[0,0];var u=e[o],f=n[s-1],l=u.getIndex();u.disconnect(),f?u.connect(f,f.next):u.connect(void 0,e[0]);var c=u.getIndex();return[l,c]})}var Vl=function(){function t(e,n,i,a,o,s,u,f){this.prevList=e,this.list=n,this.added=i,this.removed=a,this.changed=o,this.maintained=s,this.changedBeforeAdded=u,this.fixed=f}var r=t.prototype;return Object.defineProperty(r,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(r,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),r.caculateOrdered=function(){var e=Yl(this.changedBeforeAdded,this.fixed),n=this.changed,i=[];this.cacheOrdered=e.filter(function(a,o){var s=a[0],u=a[1],f=n[o],l=f[0],c=f[1];if(s!==u)return i.push([l,c]),!0}),this.cachePureChanged=i},t}();function Qe(t,r,e){var n=ql?Map:e?Wl:Hl,i=e||function(b){return b},a=[],o=[],s=[],u=t.map(i),f=r.map(i),l=new n,c=new n,d=[],v=[],p={},h=[],g=0,m=0;return u.forEach(function(b,y){l.set(b,y)}),f.forEach(function(b,y){c.set(b,y)}),u.forEach(function(b,y){var S=c.get(b);typeof S>"u"?(++m,o.push(y)):p[S]=m}),f.forEach(function(b,y){var S=l.get(b);typeof S>"u"?(a.push(y),++g):(s.push([S,y]),m=p[y]||0,d.push([S-m,y-g]),v.push(y===S),S!==y&&h.push([S,y]))}),o.reverse(),new Vl(t,r,a,o,h,s,d,v)}var jl=function(){function t(e,n){e===void 0&&(e=[]),this.findKeyCallback=n,this.list=[].slice.call(e)}var r=t.prototype;return r.update=function(e){var n=[].slice.call(e),i=Qe(this.list,n,this.findKeyCallback);return this.list=n,i},t}(),Hi=function(t,r){return Hi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},Hi(t,r)};function tn(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");Hi(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var mr=function(){return mr=Object.assign||function(r){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},mr.apply(this,arguments)};function Ws(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e}function So(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return t.concat(a||Array.prototype.slice.call(r))}function _o(t){var r=0;return t.map(function(e){return e==null?"$compat".concat(++r):"".concat(e)})}function qs(t){var r=[];return t.forEach(function(e){r=r.concat(zt(e)?qs(e):e)}),r}function bi(t,r){if(!r)return t;for(var e in r)Vn(t[e])&&(t[e]=r[e]);return t}function An(t,r){if(t===r)return!1;for(var e in t)if(!(e in r))return!0;for(var e in r)if(t[e]!==r[e])return!0;return!1}function Eo(t){var r=t.className,e=Ws(t,["className"]);return r!=null&&(e.class=r),delete e.style,delete e.children,e}function Co(t){var r={},e={};for(var n in t)n.indexOf("on")===0?e[n]=t[n]:r[n]=t[n];return[r,e]}function jn(t){if(!t)return null;var r=t.b;return Se(r)?r:jn(t.c)}function Xs(t){var r=t.parentNode;r&&r.removeChild(t)}function Ys(t){t.forEach(function(r){r()})}function Ul(){return this.constructor(this.props,this.context)}var Ea=0,Un=function(){function t(e,n,i,a,o,s,u){u===void 0&&(u={}),this.t=e,this.d=n,this.k=i,this.i=a,this.c=o,this.ref=s,this.ps=u,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var r=t.prototype;return r.s=function(){return!0},r.u=function(e,n,i,a,o){var s=this,u=s.d,f=kl(n).filter(function(p){return p.$_req}),l=qs(f.map(function(p){return p.$_subs})),c=tr(l,function(p){return p.d===u});if(s.b&&!Qt(i)&&!o&&!s.s(i.props,a)&&!c){var d=l.reduce(function(p,h){var g=h.d;return p[0]?p[0].d===g&&p.push(h):g>u&&p.push(h),p},[]);return d.forEach(function(p){rn(p,p._ps,[p.o],e,n,!0)}),!1}s.o=i,s.ss(a);var v=s.ps;return Qt(i)||(s.ps=i.props,s.ref=i.ref),Ca(this),s.r(e,n,s.b?v:{},a),!0},r.md=function(){this.rr()},r.ss=function(){},r.ud=function(){this.rr()},r.rr=function(){var e=this,n=e.ref,i=e.fr;n&&n(i?i.current:e.b)},t}();function Vs(){return Object.__CROACT_CURRENT_INSTNACE__}function Kl(){return Ea}function $l(t){Ea=t}function Ca(t){return Object.__CROACT_CURRENT_INSTNACE__=t,Ea=0,t}var Da=function(){function t(e,n){e===void 0&&(e={}),this.props=e,this.context=n,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var r=t.prototype;return r.render=function(){return null},r.shouldComponentUpdate=function(e,n){return this.props!==e||this.state!==n},r.setState=function(e,n,i){var a=this;a.$_timer||(a.$_state={}),clearTimeout(a.$_timer),a.$_timer=0,a.$_state=mr(mr({},a.$_state),e),i?a.$_setState(n,i):a.$_timer=window.setTimeout(function(){a.$_timer=0,a.$_setState(n,i)})},r.forceUpdate=function(e){this.setState({},e,!0)},r.componentDidMount=function(){},r.componentDidUpdate=function(e,n){},r.componentWillUnmount=function(){},r.$_setState=function(e,n){var i=[],a=this.$_p,o=rn(a.c,[a],[a.o],i,a._cs,mr(mr({},this.state),this.$_state),n);o&&(e&&i.push(e),Ys(i),Ca(null))},t}(),js=function(t){tn(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}var e=r.prototype;return e.shouldComponentUpdate=function(n,i){return An(this.props,n)||An(this.state,i)},r}(Da);function Us(t){var r=function(e){r.current=e};return r.current=t,r}function Jl(t){return t._fr=!0,t}function Zl(t,r,e,n){var i,a;return!((i=t==null?void 0:t.prototype)===null||i===void 0)&&i.render?a=new t(r,e):(a=new Da(r,e),a.constructor=t,t._fr?(n.fr=Us(),a.render=function(){return this.constructor(this.props,n.fr)}):a.render=Ul),a.$_p=n,a}var Ql=function(t){tn(r,t);function r(n,i,a,o,s,u,f){f===void 0&&(f={});var l=t.call(this,n,i,a,o,s,u,bi(f,n.defaultProps))||this;return l.typ="comp",l._usefs=[],l._uefs=[],l._defs=[],l}var e=r.prototype;return e.s=function(n,i){var a=this.b;return a.shouldComponentUpdate(bi(n,this.t.defaultProps),i||a.state)!==!1},e.r=function(n,i,a){var o,s,u=this,f=u.t;u.ps=bi(u.ps,u.t.defaultProps);var l=u.ps,c=!u.b,d=f.contextType,v=u.b,p=d==null?void 0:d.get(u);u._cs=i,c?(v=Zl(f,l,p,u),u.b=v):(v.props=l,v.context=p);var h=v.state;u._usefs=[],u._uefs=[];var g=v.render();((s=(o=g==null?void 0:g.props)===null||o===void 0?void 0:o.children)===null||s===void 0?void 0:s.length)===0&&(g.props.children=u.ps.children);var m=mr(mr({},i),v.$_cs);rn(u,u._ps,g?[g]:[],n,m),c?u._uefs.push(function(){d==null||d.register(u),v.componentDidMount()}):u._uefs.push(function(){v.componentDidUpdate(a,h)}),n.push(function(){u._usefs.forEach(function(b){b()}),c?u.md():u.ud(),u._defs=u._uefs.map(function(b){return b()})})},e.ss=function(n){var i=this.b;!i||!n||(i.state=n)},e.un=function(){var n,i=this;i._ps.forEach(function(o){o.un()});var a=i.t;(n=a.contextType)===null||n===void 0||n.unregister(i),clearTimeout(i.b.$_timer),i._defs.forEach(function(o){o&&o()}),i.b.componentWillUnmount()},r}(Un);function tc(t,r,e){var n=wa(Eo(t),Eo(r)),i=n.added,a=n.removed,o=n.changed;for(var s in i)e.setAttribute(s,i[s]);for(var u in o)e.setAttribute(u,o[u][1]);for(var f in a)e.removeAttribute(f)}function rc(t,r,e){var n=wa(t,r),i=n.added,a=n.removed;for(var o in a)e.e(o,!0);for(var s in i)e.e(s)}function wa(t,r){var e=Or(t),n=Or(r),i=Qe(e,n,function(u){return u}),a={},o={},s={};return i.added.forEach(function(u){var f=n[u];a[f]=r[f]}),i.removed.forEach(function(u){var f=e[u];o[f]=t[f]}),i.maintained.forEach(function(u){var f=u[0],l=e[f],c=[t[l],r[l]];t[l]!==r[l]&&(s[l]=c)}),{added:a,removed:o,changed:s}}function ec(t,r,e){var n=e.style,i=wa(t,r),a=i.added,o=i.removed,s=i.changed;for(var u in a){var f=On(u,"-");n.setProperty(f,a[u])}for(var u in s){var l=On(u,"-");n.setProperty(l,s[u][1])}for(var u in o){var c=On(u,"-");n.removeProperty(c)}}function nc(t){return t.replace(/^on/g,"").toLowerCase()}var ic=function(t){tn(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n.typ="elem",n._es={},n._svg=!1,n}var e=r.prototype;return e.e=function(n,i){var a=this,o=a._es,s=a.b,u=nc(n);i?(Ft(s,u,o[n]),delete o[n]):(o[n]=function(f){var l,c;(c=(l=a.ps)[n])===null||c===void 0||c.call(l,f)},Ht(s,u,o[n]))},e.s=function(n){return An(this.ps,n)},e.r=function(n,i,a){var o,s=this,u=!s.b,f=s.ps;if(u){var l=jn(s.c),c=!1;s._svg||s.t==="svg"?c=!0:c=l&&l.ownerSVGElement,s._svg=c;var d=(o=s._hyd)===null||o===void 0?void 0:o.splice(0,1)[0],v=s.t;if(d)s._hyd=[].slice.call(d.children||[]);else{var p=xe(l);c?d=p.createElementNS("http://www.w3.org/2000/svg",v):d=p.createElement(v)}s.b=d}rn(s,s._ps,f.children,n,i);var h=s.b,g=Co(a),m=g[0],b=g[1],y=Co(f),S=y[0],E=y[1];return tc(m,S,h),rc(b,E,s),ec(a.style||{},f.style||{},h),n.push(function(){u?s.md():s.ud()}),!0},e.un=function(){var n=this,i=n._es,a=n.b;for(var o in i)Ft(a,o,i[o]);n._ps.forEach(function(s){s.un()}),n._es={},n._sel||Xs(a)},r}(Un);function qe(t){if(!t||Se(t))return t;var r=t.$_p._ps;return r.length?qe(r[0].b):null}function Ks(t){if(t){if(t.b&&Se(t.b))return t;var r=t._ps;return r.length?Ks(r[0]):null}}function pr(t,r){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var i=r||{},a=i.key,o=i.ref,s=Ws(i,["key","ref"]);return{type:t,key:a,ref:o,props:mr(mr({},s),{children:Ll(e).filter(function(u){return u!=null&&u!==!1})})}}var $s=function(t){tn(r,t);function r(n,i){i===void 0&&(i=0);var a=t.call(this,"container",i,"container",0,null)||this;return a.typ="container",a.b=n,a}var e=r.prototype;return e.r=function(){return!0},e.un=function(){},r}(Un),ac=function(t){tn(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n.typ="text",n}var e=r.prototype;return e.r=function(n){var i,a=this,o=!a.b;if(o){var s=jn(a.c),u=(i=a._hyd)===null||i===void 0?void 0:i.splice(0,1)[0];a.b=u||xe(s).createTextNode(a.t.replace("text_",""))}return n.push(function(){o?a.md():a.ud()}),!0},e.un=function(){Xs(this.b)},r}(Un);function oc(t,r,e){var n=e.map(function(u){return Qt(u)?null:u.key}),i=_o(r.map(function(u){return u.k})),a=_o(n),o=Qe(i,a,function(u){return u});o.removed.forEach(function(u){r.splice(u,1)[0].un()}),o.ordered.forEach(function(u){var f=u[0],l=u[1],c=r.splice(f,1)[0];r.splice(l,0,c);var d=qe(c.b),v=qe(r[l+1]&&r[l+1].b);d&&d.parentNode.insertBefore(d,v)}),o.added.forEach(function(u){r.splice(u,0,Do(e[u],n[u],u,t))});var s=o.maintained.filter(function(u){u[0];var f=u[1],l=e[f],c=r[f],d=Qt(l)?"text_".concat(l):l.type;return d!==c.t?(c.un(),r.splice(f,1,Do(l,n[f],f,t)),!0):(c.i=f,!1)});return So(So([],o.added,!0),s.map(function(u){u[0];var f=u[1];return f}),!0)}function sc(t,r){for(var e=t._ps,n=e.length,i=r.i+1;i<n;++i){var a=qe(e[i].b);if(a)return a}return null}function Do(t,r,e,n){var i=n.d+1;if(Qt(t)||de(t))return new ac("text_".concat(t),i,r,e,n,null,{});var a=t.type,o=typeof a=="string"?ic:Ql;return new o(a,i,r,e,n,t.ref,t.props)}function rn(t,r,e,n,i,a,o){var s=oc(t,r,e),u=t._hyd,f=r.filter(function(c,d){return c._hyd=u,c.u(n,i,e[d],a,o)});t.typ==="container"&&t._sel&&r.forEach(function(c){var d=Ks(c);d&&(d._sel=!0)}),t._hyd=null;var l=jn(t);return l&&s.reverse().forEach(function(c){var d=r[c],v=qe(d.b);if(v&&l!==v&&!v.parentNode){var p=sc(t,d);l.insertBefore(v,p)}}),f.length>0}function uc(t,r,e,n){e===void 0&&(e=r.__CROACT__),n===void 0&&(n={});var i=!!e;e||(e=new $s(r));var a=[];return rn(e,e._ps,t?[t]:[],a,n,void 0,void 0),Ys(a),Ca(null),i||(r.__CROACT__=e),e}function wo(t,r,e){return!e&&t&&(e=new $s(r.parentElement),e._hyd=[r],e._sel=!0),uc(t,r,e),e}function Js(t){var r=Vs(),e=r._hs||(r._hs=[]),n=Kl(),i=e[n];if($l(n+1),i){if(!An(i.deps,t.deps))return i.updated=!1,i;e[n]=t}else e.push(t);return t.value=t.func(),t.updated=!0,t}function fc(t,r){var e=Js({func:t,deps:r});return e.value}function lc(t){return fc(function(){return Us(t)},[])}function Zs(t,r,e){var n=Vs(),i=Js({func:function(){return t},deps:r}),a=e?n._usefs:n._uefs;i.updated?a.push(function(){return i.effect&&i.effect(),i.effect=t(),i.effect}):a.push(function(){return i.effect})}function cc(t,r,e){Zs(function(){t==null||t(r())},e,!0)}function Oa(t,r){for(var e=t.length,n=0;n<e;++n)if(r(t[n],n))return!0;return!1}function Qs(t,r){for(var e=t.length,n=0;n<e;++n)if(r(t[n],n))return t[n];return null}function tu(t){var r=t;if(typeof r>"u"){if(typeof navigator>"u"||!navigator)return"";r=navigator.userAgent||""}return r.toLowerCase()}function Ma(t,r){try{return new RegExp(t,"g").exec(r)}catch{return null}}function dc(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,r=t.brands||t.uaList;return!!(r&&r.length)}function pc(t,r){var e=Ma("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",r);return e?e[3]:""}function Wi(t){return t.replace(/_/g,".")}function Te(t,r){var e=null,n="-1";return Oa(t,function(i){var a=Ma("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",r);return!a||i.brand?!1:(e=i,n=a[3]||"-1",i.versionAlias?n=i.versionAlias:i.versionTest&&(n=pc(i.versionTest.toLowerCase(),r)||n),n=Wi(n),!0)}),{preset:e,version:n}}function Oe(t,r){var e={brand:"",version:"-1"};return Oa(t,function(n){var i=ru(r,n);return i?(e.brand=n.id,e.version=n.versionAlias||i.version,e.version!=="-1"):!1}),e}function ru(t,r){return Qs(t,function(e){var n=e.brand;return Ma(""+r.test,n.toLowerCase())})}var qi=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],eu=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],Xi=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],nu=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],iu=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function au(t){return!!Te(nu,t).preset}function vc(t){var r=tu(t),e=!!/mobi/g.exec(r),n={name:"unknown",version:"-1",majorVersion:-1,webview:au(r),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=Te(qi,r),o=a.preset,s=a.version,u=Te(iu,r),f=u.preset,l=u.version,c=Te(eu,r);if(n.chromium=!!c.preset,n.chromiumVersion=c.version,!n.chromium){var d=Te(Xi,r);n.webkit=!!d.preset,n.webkitVersion=d.version}return f&&(i.name=f.id,i.version=l,i.majorVersion=parseInt(l,10)),o&&(n.name=o.id,n.version=s,n.webview&&i.name==="ios"&&n.name!=="safari"&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:i,isMobile:e,isHints:!1}}function hc(t){var r=navigator.userAgentData,e=(r.uaList||r.brands).slice(),n=t&&t.fullVersionList,i=r.mobile||!1,a=e[0],o=(t&&t.platform||r.platform||navigator.platform).toLowerCase(),s={name:a.brand,version:a.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Oe(nu,e).brand||au(tu())},u={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&Oa(Xi,function(p){return ru(e,p)});var f=Oe(eu,e);if(s.chromium=!!f.brand,s.chromiumVersion=f.version,!s.chromium){var l=Oe(Xi,e);s.webkit=!!l.brand,s.webkitVersion=l.version}var c=Qs(iu,function(p){return new RegExp(""+p.test,"g").exec(o)});if(u.name=c?c.id:"",t&&(u.version=t.platformVersion),n&&n.length){var d=Oe(qi,n);s.name=d.brand||s.name,s.version=d.version||s.version}else{var v=Oe(qi,e);s.name=v.brand||s.name,s.version=v.brand&&t?t.uaFullVersion:v.version}return s.webkit&&(u.name=i?"ios":"mac"),u.name==="ios"&&s.webview&&(s.version="-1"),u.version=Wi(u.version),s.version=Wi(s.version),u.majorVersion=parseInt(u.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:u,isMobile:i,isHints:!0}}function gc(t){return typeof t>"u"&&dc()?hc():vc(t)}function mc(t,r,e,n,i,a){for(var o=0;o<i;++o){var s=e+o*i,u=n+o*i;t[s]+=t[u]*a,r[s]+=r[u]*a}}function bc(t,r,e,n,i){for(var a=0;a<i;++a){var o=e+a*i,s=n+a*i,u=t[o],f=r[o];t[o]=t[s],t[s]=u,r[o]=r[s],r[s]=f}}function yc(t,r,e,n,i){for(var a=0;a<n;++a){var o=e+a*n;t[o]/=i,r[o]/=i}}function ou(t,r,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),i=0;i<e;++i)n[i*e+r-1]=0,n[(r-1)*e+i]=0;return n[(r-1)*(e+1)]=1,n}function yr(t,r){r===void 0&&(r=Math.sqrt(t.length));for(var e=t.slice(),n=Mt(r),i=0;i<r;++i){var a=r*i+i;if(!ft(e[a],Bt)){for(var o=i+1;o<r;++o)if(e[r*i+o]){bc(e,n,i,o,r);break}}if(!ft(e[a],Bt))return[];yc(e,n,i,r,e[a]);for(var o=0;o<r;++o){var s=o,u=o+i*r,f=e[u];!ft(f,Bt)||i===o||mc(e,n,s,i,r,-f)}}return n}function xc(t,r){r===void 0&&(r=Math.sqrt(t.length));for(var e=[],n=0;n<r;++n)for(var i=0;i<r;++i)e[i*r+n]=t[r*n+i];return e}function su(t,r){r===void 0&&(r=Math.sqrt(t.length));for(var e=[],n=t[r*r-1],i=0;i<r-1;++i)e[i]=t[r*(r-1)+i]/n;return e[r-1]=0,e}function Sc(t,r){for(var e=Mt(r),n=0;n<r-1;++n)e[r*(r-1)+n]=t[n]||0;return e}function jr(t,r){for(var e=t.slice(),n=t.length;n<r-1;++n)e[n]=0;return e[r-1]=1,e}function gr(t,r,e){if(r===void 0&&(r=Math.sqrt(t.length)),r===e)return t;for(var n=Mt(e),i=Math.min(r,e),a=0;a<i-1;++a){for(var o=0;o<i-1;++o)n[a*e+o]=t[a*r+o];n[(a+1)*e-1]=t[(a+1)*r-1],n[(e-1)*e+a]=t[(r-1)*r+a]}return n[e*e-1]=t[r*r-1],n}function Bn(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];var n=Mt(t);return r.forEach(function(i){n=Et(n,i,t)}),n}function Et(t,r,e){e===void 0&&(e=Math.sqrt(t.length));var n=[],i=t.length/e,a=r.length/i;if(i){if(!a)return t}else return r;for(var o=0;o<e;++o)for(var s=0;s<a;++s){n[s*e+o]=0;for(var u=0;u<i;++u)n[s*e+o]+=t[u*e+o]*r[s*i+u]}return n}function yt(t,r){for(var e=Math.min(t.length,r.length),n=t.slice(),i=0;i<e;++i)n[i]=n[i]+r[i];return n}function nt(t,r){for(var e=Math.min(t.length,r.length),n=t.slice(),i=0;i<e;++i)n[i]=n[i]-r[i];return n}function _c(t,r){return r===void 0&&(r=t.length===6),r?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function uu(t,r){return r===void 0&&(r=t.length===9),r?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function Wt(t,r,e){e===void 0&&(e=r.length);var n=Et(t,r,e),i=n[e-1];return n.map(function(a){return a/i})}function Ec(t,r){return Et(t,[1,0,0,0,0,Math.cos(r),Math.sin(r),0,0,-Math.sin(r),Math.cos(r),0,0,0,0,1],4)}function Cc(t,r){return Et(t,[Math.cos(r),0,-Math.sin(r),0,0,1,0,0,Math.sin(r),0,Math.cos(r),0,0,0,0,1],4)}function Dc(t,r){return Et(t,nn(r,4))}function pn(t,r){var e=r[0],n=e===void 0?1:e,i=r[1],a=i===void 0?1:i,o=r[2],s=o===void 0?1:o;return Et(t,[n,0,0,0,0,a,0,0,0,0,s,0,0,0,0,1],4)}function en(t,r){return Wt(nn(r,3),jr(t,3))}function yi(t,r){var e=r[0],n=e===void 0?0:e,i=r[1],a=i===void 0?0:i,o=r[2],s=o===void 0?0:o;return Et(t,[1,0,0,0,0,1,0,0,0,0,1,0,n,a,s,1],4)}function Oo(t,r){return Et(t,r,4)}function nn(t,r){var e=Math.cos(t),n=Math.sin(t),i=Mt(r);return i[0]=e,i[1]=n,i[r]=-n,i[r+1]=e,i}function Mt(t){for(var r=t*t,e=[],n=0;n<r;++n)e[n]=n%(t+1)?0:1;return e}function Ra(t,r){for(var e=Mt(r),n=Math.min(t.length,r-1),i=0;i<n;++i)e[(r+1)*i]=t[i];return e}function Ur(t,r){for(var e=Mt(r),n=Math.min(t.length,r-1),i=0;i<n;++i)e[r*(r-1)+i]=t[i];return e}function Ta(t,r,e,n,i,a,o,s){var u=t[0],f=t[1],l=r[0],c=r[1],d=e[0],v=e[1],p=n[0],h=n[1],g=i[0],m=i[1],b=a[0],y=a[1],S=o[0],E=o[1],x=s[0],_=s[1],C=[u,0,l,0,d,0,p,0,f,0,c,0,v,0,h,0,1,0,1,0,1,0,1,0,0,u,0,l,0,d,0,p,0,f,0,c,0,v,0,h,0,1,0,1,0,1,0,1,-g*u,-m*u,-b*l,-y*l,-S*d,-E*d,-x*p,-_*p,-g*f,-m*f,-b*c,-y*c,-S*v,-E*v,-x*h,-_*h],D=yr(C,8);if(!D.length)return[];var M=Et(D,[g,m,b,y,S,E,x,_],8);return M[8]=1,gr(xc(M),3,4)}var Be=function(){return Be=Object.assign||function(r){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},Be.apply(this,arguments)};function wc(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Xe(t,r){return r===void 0&&(r=0),ee(pe(t,r))}function Oc(t,r){var e=Wt(t,[r[0],r[1]||0,r[2]||0,1],4),n=e[3]||1;return[e[0]/n,e[1]/n,e[2]/n]}function ee(t){var r=wc();return t.forEach(function(e){var n=e.matrixFunction,i=e.functionValue;n&&(r=n(r,i))}),r}function pe(t,r){r===void 0&&(r=0);var e=zt(t)?t:Br(t);return e.map(function(n){var i=Bs(n),a=i.prefix,o=i.value,s=null,u=a,f="";if(a==="translate"||a==="translateX"||a==="translate3d"){var l=hr(r)?Be(Be({},r),{"o%":r["%"]}):{"%":r,"o%":r},c=Vr(o).map(function(R,A){return A===0&&"x%"in l?l["%"]=r["x%"]:A===1&&"y%"in l?l["%"]=r["y%"]:l["%"]=r["o%"],_t(R,l)}),d=c[0],v=c[1],p=v===void 0?0:v,h=c[2],g=h===void 0?0:h;s=yi,f=[d,p,g]}else if(a==="translateY"){var m=hr(r)?Be({"%":r["y%"]},r):{"%":r},p=_t(o,m);s=yi,f=[0,p,0]}else if(a==="translateZ"){var g=parseFloat(o);s=yi,f=[0,0,g]}else if(a==="scale"||a==="scale3d"){var b=Vr(o).map(function(R){return parseFloat(R)}),y=b[0],S=b[1],E=S===void 0?y:S,x=b[2],_=x===void 0?1:x;s=pn,f=[y,E,_]}else if(a==="scaleX"){var y=parseFloat(o);s=pn,f=[y,1,1]}else if(a==="scaleY"){var E=parseFloat(o);s=pn,f=[1,E,1]}else if(a==="scaleZ"){var _=parseFloat(o);s=pn,f=[1,1,_]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var C=Ze(o),D=C.unit,M=C.value,I=D==="rad"?M:M*Math.PI/180;a==="rotate"||a==="rotateZ"?(u="rotateZ",s=Dc):a==="rotateX"?s=Ec:a==="rotateY"&&(s=Cc),f=I}else if(a==="matrix3d")s=Oo,f=Vr(o).map(function(R){return parseFloat(R)});else if(a==="matrix"){var T=Vr(o).map(function(R){return parseFloat(R)});s=Oo,f=[T[0],T[1],0,0,T[2],T[3],0,0,0,0,1,0,T[4],T[5],0,1]}else u="";return{name:a,functionName:u,value:o,matrixFunction:s,functionValue:f}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Yi=function(t,r){return Yi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},Yi(t,r)};function Mc(t,r){Yi(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var fu=typeof Map=="function"?void 0:function(){var t=0;return function(r){return r.__DIFF_KEY__||(r.__DIFF_KEY__=++t)}}(),lu=function(t){Mc(r,t);function r(e){return e===void 0&&(e=[]),t.call(this,e,fu)||this}return r}(jl);function Rc(t,r){return Qe(t,r,fu)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Vi=function(){return Vi=Object.assign||function(r){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},Vi.apply(this,arguments)};function Tc(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),i=0,r=0;r<e;r++)for(var a=arguments[r],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}var Pc=function(){function t(){this._events={}}var r=t.prototype;return r.on=function(e,n){if(hr(e))for(var i in e)this.on(i,e[i]);else this._addEvent(e,n,{});return this},r.off=function(e,n){if(!e)this._events={};else if(hr(e))for(var i in e)this.off(i);else if(!n)this._events[e]=[];else{var a=this._events[e];if(a){var o=wr(a,function(s){return s.listener===n});o>-1&&a.splice(o,1)}}return this},r.once=function(e,n){var i=this;return n&&this._addEvent(e,n,{once:!0}),new Promise(function(a){i._addEvent(e,a,{once:!0})})},r.emit=function(e,n){var i=this;n===void 0&&(n={});var a=this._events[e];if(!e||!a)return!0;var o=!1;return n.eventType=e,n.stop=function(){o=!0},n.currentTarget=this,Tc(a).forEach(function(s){s.listener(n),s.once&&i.off(e,s.listener)}),!o},r.trigger=function(e,n){return n===void 0&&(n={}),this.emit(e,n)},r._addEvent=function(e,n,i){var a=this._events;a[e]=a[e]||[];var o=a[e];o.push(Vi({listener:n},i))},t}();const Kn=Pc;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ji=function(t,r){return ji=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},ji(t,r)};function Ic(t,r){ji(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var ne=function(){return ne=Object.assign||function(r){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},ne.apply(this,arguments)};function Ac(t){var r=t.container;return r===document.body?[r.scrollLeft||document.documentElement.scrollLeft,r.scrollTop||document.documentElement.scrollTop]:[r.scrollLeft,r.scrollTop]}function Mo(t,r){return t.addEventListener("scroll",r),function(){t.removeEventListener("scroll",r)}}function vn(t){if(t){if(Qt(t))return document.querySelector(t)}else return null;if(ya(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var Bc=function(t){Ic(r,t);function r(){var n=t!==null&&t.apply(this,arguments)||this;return n._startRect=null,n._startPos=[],n._prevTime=0,n._timer=0,n._prevScrollPos=[0,0],n._isWait=!1,n._flag=!1,n._currentOptions=null,n._lock=!1,n._unregister=null,n._onScroll=function(){var i=n._currentOptions;n._lock||!i||n.emit("scrollDrag",{next:function(a){n.checkScroll({container:i.container,inputEvent:a})}})},n}var e=r.prototype;return e.dragStart=function(n,i){var a=vn(i.container);if(!a){this._flag=!1;return}var o=0,s=0,u=0,f=0;if(a===document.body)u=window.innerWidth,f=window.innerHeight;else{var l=a.getBoundingClientRect();o=l.top,s=l.left,u=l.width,f=l.height}this._flag=!0,this._startPos=[n.clientX,n.clientY],this._startRect={top:o,left:s,width:u,height:f},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},e.drag=function(n,i){if(clearTimeout(this._timer),!!this._flag){var a=n.clientX,o=n.clientY,s=i.threshold,u=s===void 0?0:s,f=this,l=f._startRect,c=f._startPos;this._currentOptions=i;var d=[0,0];return l.top>o-u?(c[1]>l.top||o<c[1])&&(d[1]=-1):l.top+l.height<o+u&&(c[1]<l.top+l.height||o>c[1])&&(d[1]=1),l.left>a-u?(c[0]>l.left||a<c[0])&&(d[0]=-1):l.left+l.width<a+u&&(c[0]<l.left+l.width||a>c[0])&&(d[0]=1),!d[0]&&!d[1]?!1:this._continueDrag(ne(ne({},i),{direction:d,inputEvent:n,isDrag:!0}))}},e.checkScroll=function(n){var i=this;if(this._isWait)return!1;var a=n.prevScrollPos,o=a===void 0?this._prevScrollPos:a,s=n.direction,u=n.throttleTime,f=u===void 0?0:u,l=n.inputEvent,c=n.isDrag,d=this._getScrollPosition(s||[0,0],n),v=d[0]-o[0],p=d[1]-o[1],h=s||[v?Math.abs(v)/v:0,p?Math.abs(p)/p:0];return this._prevScrollPos=d,this._lock=!1,!v&&!p?!1:(this.emit("move",{offsetX:h[0]?v:0,offsetY:h[1]?p:0,inputEvent:l}),f&&c&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(n)},f)),!0)},e.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},e._getScrollPosition=function(n,i){var a=i.container,o=i.getScrollPosition,s=o===void 0?Ac:o;return s({container:vn(a),direction:n})},e._continueDrag=function(n){var i=this,a,o=n.container,s=n.direction,u=n.throttleTime,f=n.useScroll,l=n.isDrag,c=n.inputEvent;if(!(!this._flag||l&&this._isWait)){var d=We(),v=Math.max(u+this._prevTime-d,0);if(v>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(n)},v),!1;this._prevTime=d;var p=this._getScrollPosition(s,n);this._prevScrollPos=p,l&&(this._isWait=!0),f||(this._lock=!0);var h={container:vn(o),direction:s,inputEvent:c};return(a=n.requestScroll)===null||a===void 0||a.call(n,h),this.emit("scroll",h),this._isWait=!1,f||this.checkScroll(ne(ne({},n),{prevScrollPos:p,direction:s,inputEvent:c}))}},e._registerScrollEvent=function(n){this._unregisterScrollEvent();var i=n.checkScrollEvent;if(i){var a=i===!0?Mo:i,o=vn(n.container);i===!0&&(o===document.body||o===document.documentElement)?this._unregister=Mo(window,this._onScroll):this._unregister=a(o,this._onScroll)}},e._unregisterScrollEvent=function(){var n;(n=this._unregister)===null||n===void 0||n.call(this),this._unregister=null},r}(Kn);const zc=Bc;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function kc(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;for(var n=Array(t),i=0,r=0;r<e;r++)for(var a=arguments[r],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function Kt(t){return ft(t,Bt)}function Fc(t,r){return t.every(function(e,n){return Kt(e-r[n])===0})}function Gc(t,r){return!Kt(t[0]-r[0])&&!Kt(t[1]-r[1])}function cu(t){return t.length<3?0:Math.abs(Fl(t.map(function(r,e){var n=t[e+1]||t[0];return r[0]*n[1]-n[0]*r[1]})))/2}function Ro(t,r){var e=r.width,n=r.height,i=r.left,a=r.top,o=Kr(t),s=o.minX,u=o.minY,f=o.maxX,l=o.maxY,c=e/(f-s),d=n/(l-u);return t.map(function(v){return[i+(v[0]-s)*c,a+(v[1]-u)*d]})}function Kr(t){var r=t.map(function(n){return n[0]}),e=t.map(function(n){return n[1]});return{minX:Math.min.apply(Math,r),minY:Math.min.apply(Math,e),maxX:Math.max.apply(Math,r),maxY:Math.max.apply(Math,e)}}function Ui(t,r,e){var n=t[0],i=t[1],a=Kr(r),o=a.minX,s=a.maxX,u=[[o,i],[s,i]],f=zn(u[0],u[1]),l=Ki(r),c=[];if(l.forEach(function(p){var h=zn(p[0],p[1]),g=p[0];if(Fc(f,h))c.push({pos:t,line:p,type:"line"});else{var m=du(Pa(f,h),[u,p]);m.forEach(function(b){p.some(function(y){return Gc(y,b)})?c.push({pos:b,line:p,type:"point"}):Kt(g[1]-i)!==0&&c.push({pos:b,line:p,type:"intersection"})})}}),!e&&tr(c,function(p){return p[0]===n}))return!0;var d=0,v={};return c.forEach(function(p){var h=p.pos,g=p.type,m=p.line;if(!(h[0]>n))if(g==="intersection")++d;else{if(g==="line")return;if(g==="point"){var b=tr(m,function(E){return E[1]!==i}),y=v[h[0]],S=b[1]>i?1:-1;y?y!==S&&++d:v[h[0]]=S}}}),d%2===1}function zn(t,r){var e=t[0],n=t[1],i=r[0],a=r[1],o=i-e,s=a-n;Math.abs(o)<Bt&&(o=0),Math.abs(s)<Bt&&(s=0);var u=0,f=0,l=0;return o?s?(u=-s/o,f=1,l=-u*e-n):(f=1,l=-n):s&&(u=-1,l=e),[u,f,l]}function Pa(t,r){var e=t[0],n=t[1],i=t[2],a=r[0],o=r[1],s=r[2],u=e===0&&a===0,f=n===0&&o===0,l=[];if(u&&f)return[];if(u){var c=-i/n,d=-s/o;return c!==d?[]:[[-1/0,c],[1/0,c]]}else if(f){var v=-i/e,p=-s/a;return v!==p?[]:[[v,-1/0],[v,1/0]]}else if(e===0){var h=-i/n,g=-(o*h+s)/a;l=[[g,h]]}else if(a===0){var h=-s/o,g=-(n*h+i)/e;l=[[g,h]]}else if(n===0){var g=-i/e,h=-(a*g+s)/o;l=[[g,h]]}else if(o===0){var g=-s/a,h=-(e*g+i)/n;l=[[g,h]]}else{var g=(n*s-o*i)/(o*e-n*a),h=-(e*g+i)/n;l=[[g,h]]}return l.map(function(m){return[m[0],m[1]]})}function du(t,r){var e=r.map(function(c){return[0,1].map(function(d){return[Math.min(c[0][d],c[1][d]),Math.max(c[0][d],c[1][d])]})}),n=[];if(t.length===2){var i=t[0],a=i[0],o=i[1];if(Kt(a-t[1][0])){if(!Kt(o-t[1][1])){var f=Math.max.apply(Math,e.map(function(c){return c[0][0]})),l=Math.min.apply(Math,e.map(function(c){return c[0][1]}));if(Kt(f-l)>0)return[];n=[[f,o],[l,o]]}}else{var s=Math.max.apply(Math,e.map(function(c){return c[1][0]})),u=Math.min.apply(Math,e.map(function(c){return c[1][1]}));if(Kt(s-u)>0)return[];n=[[a,s],[a,u]]}}return n.length||(n=t.filter(function(c){var d=c[0],v=c[1];return e.every(function(p){return 0<=Kt(d-p[0][0])&&0<=Kt(p[0][1]-d)&&0<=Kt(v-p[1][0])&&0<=Kt(p[1][1]-v)})})),n.map(function(c){return[Kt(c[0]),Kt(c[1])]})}function Ki(t){return kc(t.slice(1),[t[0]]).map(function(r,e){return[t[e],r]})}function Nc(t,r){var e=t.slice(),n=r.slice();yo(e)===-1&&e.reverse(),yo(n)===-1&&n.reverse();var i=Ki(e),a=Ki(n),o=i.map(function(l){return zn(l[0],l[1])}),s=a.map(function(l){return zn(l[0],l[1])}),u=[];o.forEach(function(l,c){var d=i[c],v=[];s.forEach(function(p,h){var g=Pa(l,p),m=du(g,[d,a[h]]);v.push.apply(v,m.map(function(b){return{index1:c,index2:h,pos:b,type:"intersection"}}))}),v.sort(function(p,h){return Er(d[0],p.pos)-Er(d[0],h.pos)}),u.push.apply(u,v),Ui(d[1],n)&&u.push({index1:c,index2:-1,pos:d[1],type:"inside"})}),a.forEach(function(l,c){if(Ui(l[1],e)){var d=!1,v=wr(u,function(p){var h=p.index2;return h===c?(d=!0,!1):!!d});v===-1&&(d=!1,v=wr(u,function(p){var h=p.index1,g=p.index2;return h===-1&&g+1===c?(d=!0,!1):!!d})),v===-1?u.push({index1:-1,index2:c,pos:l[1],type:"inside"}):u.splice(v,0,{index1:-1,index2:c,pos:l[1],type:"inside"})}});var f={};return u.filter(function(l){var c=l.pos,d=c[0]+"x"+c[1];return f[d]?!1:(f[d]=!0,!0)})}function Lc(t,r){var e=Nc(t,r);return e.map(function(n){var i=n.pos;return i})}function Hc(t,r){var e=Lc(t,r);return cu(e)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $i=function(t,r){return $i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},$i(t,r)};function Wc(t,r){$i(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var At=function(){return At=Object.assign||function(r){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},At.apply(this,arguments)};function qc(t,r){var e=r[0]-t[0],n=r[1]-t[1],i=Math.atan2(n,e);return i>=0?i:i+Math.PI*2}function xi(t){return qc([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function Xc(t){return t.touches&&t.touches.length>=2}function hn(t){return t?t.touches?Vc(t.touches):[pu(t)]:[]}function Yc(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function To(t,r,e){var n=e.length,i=ze(t,n),a=i.clientX,o=i.clientY,s=i.originalClientX,u=i.originalClientY,f=ze(r,n),l=f.clientX,c=f.clientY,d=ze(e,n),v=d.clientX,p=d.clientY,h=a-l,g=o-c,m=a-v,b=o-p;return{clientX:s,clientY:u,deltaX:h,deltaY:g,distX:m,distY:b}}function Si(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Vc(t){for(var r=Math.min(t.length,2),e=[],n=0;n<r;++n)e.push(pu(t[n]));return e}function pu(t){return{clientX:t.clientX,clientY:t.clientY}}function ze(t,r){r===void 0&&(r=t.length);for(var e={clientX:0,clientY:0,originalClientX:0,originalClientY:0},n=0;n<r;++n){var i=t[n];e.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,e.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,e.clientX+=i.clientX,e.clientY+=i.clientY}return r?{clientX:e.clientX/r,clientY:e.clientY/r,originalClientX:e.originalClientX/r,originalClientY:e.originalClientY/r}:e}var _i=function(){function t(r){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=r,this.prevClients=r,this.length=r.length}return t.prototype.getAngle=function(r){return r===void 0&&(r=this.prevClients),xi(r)},t.prototype.getRotation=function(r){return r===void 0&&(r=this.prevClients),xi(r)-xi(this.startClients)},t.prototype.getPosition=function(r,e){r===void 0&&(r=this.prevClients);var n=To(r||this.prevClients,this.prevClients,this.startClients),i=n.deltaX,a=n.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=r,n},t.prototype.getPositions=function(r){r===void 0&&(r=this.prevClients);var e=this.prevClients;return this.startClients.map(function(n,i){return To([r[i]],[e[i]],[n])})},t.prototype.getMovement=function(r){var e=this.movement;if(!r)return e;var n=ze(r,this.length),i=ze(this.prevClients,this.length),a=n.clientX-i.clientX,o=n.clientY-i.clientY;return Math.sqrt(a*a+o*o)+e},t.prototype.getDistance=function(r){return r===void 0&&(r=this.prevClients),Si(r)},t.prototype.getScale=function(r){return r===void 0&&(r=this.prevClients),Si(r)/Si(this.startClients)},t.prototype.move=function(r,e){this.startClients.forEach(function(n){n.clientX-=r,n.clientY-=e}),this.prevClients.forEach(function(n){n.clientX-=r,n.clientY-=e})},t}(),Po=["textarea","input"],jc=function(t){Wc(r,t);function r(e,n){n===void 0&&(n={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._window=window,i.onDragStart=function(d,v){if(v===void 0&&(v=!0),!(!i.flag&&d.cancelable===!1)){var p=d.type.indexOf("drag")>=-1;if(!(i.flag&&p)){i._isDragAPI=!0;var h=i.options,g=h.container,m=h.pinchOutside,b=h.preventWheelClick,y=h.preventRightClick,S=h.preventDefault,E=h.checkInput,x=h.dragFocusedInput,_=h.preventClickEventOnDragStart,C=h.preventClickEventOnDrag,D=h.preventClickEventByCondition,M=i._useTouch,I=!i.flag;if(i._isSecondaryButton=d.which===3||d.button===2,b&&(d.which===2||d.button===1)||y&&(d.which===3||d.button===2))return i.stop(),!1;if(I){var T=i._window.document.activeElement,R=d.target;if(R){var A=R.tagName.toLowerCase(),P=Po.indexOf(A)>-1,L=R.isContentEditable;if(P||L){if(E||!x&&T===R)return!1;if(T&&(T===R||L&&T.isContentEditable&&T.contains(R)))if(x)R.blur();else return!1}else if((S||d.type==="touchstart")&&T){var k=T.tagName.toLowerCase();(T.isContentEditable||Po.indexOf(k)>-1)&&T.blur()}(_||C||D)&&Ht(i._window,"click",i._onClick,!0)}i.clientStores=[new _i(hn(d))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=v,i._dragFlag=!0,i._prevInputEvent=d,i.data={},i.doubleFlag=We()-i.prevTime<200,i._isMouseEvent=Yc(d),!i._isMouseEvent&&i._preventMouseEvent&&(i._preventMouseEvent=!1);var B=i._preventMouseEvent||i.emit("dragStart",At(At({data:i.data,datas:i.data,inputEvent:d,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:v,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){d.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));B===!1&&i.stop(),i._isMouseEvent&&i.flag&&S&&d.preventDefault()}if(!i.flag)return!1;var H=0;if(I?(i._attchDragEvent(),M&&m&&(H=setTimeout(function(){Ht(g,"touchstart",i.onDragStart,{passive:!1})}))):M&&m&&Ft(g,"touchstart",i.onDragStart),i.flag&&Xc(d)){if(clearTimeout(H),I&&d.touches.length!==d.changedTouches.length)return;i.pinchFlag||i.onPinchStart(d)}}}},i.onDrag=function(d,v){if(i.flag){var p=i.options.preventDefault;!i._isMouseEvent&&p&&d.preventDefault(),i._prevInputEvent=d;var h=hn(d),g=i.moveClients(h,d,!1);if(i._dragFlag){if(i.pinchFlag||g.deltaX||g.deltaY){var m=i._preventMouseEvent||i.emit("drag",At(At({},g),{isScroll:!!v,inputEvent:d}));if(m===!1){i.stop();return}}i.pinchFlag&&i.onPinch(d,h)}i.getCurrentStore().getPosition(h,!0)}},i.onDragEnd=function(d){if(i.flag){var v=i.options,p=v.pinchOutside,h=v.container,g=v.preventClickEventOnDrag,m=v.preventClickEventOnDragStart,b=v.preventClickEventByCondition,y=i.isDrag;(g||m||b)&&requestAnimationFrame(function(){i._allowClickEvent()}),!b&&!m&&g&&!y&&i._allowClickEvent(),i._useTouch&&p&&Ft(h,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(d);var S=d!=null&&d.touches?hn(d):[],E=S.length;E===0||!i.options.keepDragging?i.flag=!1:i._addStore(new _i(S));var x=i._getPosition(),_=We(),C=!y&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=y||C?0:_,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",At({data:i.data,datas:i.data,isDouble:C,isDrag:y,isClick:!y,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:d,isTrusted:i._isTrusted},x)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,requestAnimationFrame(function(){requestAnimationFrame(function(){i._preventMouseEvent=!1})})),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){Ft(i._window,"click",i._onClick,!0)},i._onClick=function(d){i._allowClickEvent(),i._preventMouseEvent=!1;var v=i.options.preventClickEventByCondition;v!=null&&v(d)||(d.stopPropagation(),d.preventDefault())},i._onContextMenu=function(d){var v=i.options;v.preventRightClick?i.onDragEnd(d):d.preventDefault()},i._passCallback=function(){};var a=[].concat(e),o=a[0];i._window=Hs(o)?o:Ar(o),i.options=At({checkInput:!1,container:o&&!("document"in o)?Ar(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n);var s=i.options,u=s.container,f=s.events,l=s.checkWindowBlur;if(i._useDrag=f.indexOf("drag")>-1,i._useTouch=f.indexOf("touch")>-1,i._useMouse=f.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(d){Ht(d,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(d){Ht(d,"mousedown",i.onDragStart),Ht(d,"mousemove",i._passCallback)}),Ht(u,"contextmenu",i._onContextMenu)),l&&Ht(Ar(),"blur",i.onBlur),i._useTouch){var c={passive:!1};a.forEach(function(d){Ht(d,"touchstart",i.onDragStart,c),Ht(d,"touchmove",i._passCallback,c)})}return i}return r.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},r.prototype.getMovement=function(e){return this.getCurrentStore().getMovement(e)+this.clientStores.slice(1).reduce(function(n,i){return n+i.movement},0)},r.prototype.isDragging=function(){return this.isDrag},r.prototype.isIdle=function(){return this._isIdle},r.prototype.isFlag=function(){return this.flag},r.prototype.isPinchFlag=function(){return this.pinchFlag},r.prototype.isDoubleFlag=function(){return this.doubleFlag},r.prototype.isPinching=function(){return this.isPinch},r.prototype.scrollBy=function(e,n,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(e,n),a&&this.onDrag(i,!0))},r.prototype.move=function(e,n){var i=e[0],a=e[1],o=this.getCurrentStore(),s=o.prevClients;return this.moveClients(s.map(function(u){var f=u.clientX,l=u.clientY;return{clientX:f+i,clientY:l+a,originalClientX:f,originalClientY:l}}),n,!0)},r.prototype.triggerDragStart=function(e){this.onDragStart(e,!1)},r.prototype.setEventData=function(e){var n=this.data;for(var i in e)n[i]=e[i];return this},r.prototype.setEventDatas=function(e){return this.setEventData(e)},r.prototype.getCurrentEvent=function(e){return e===void 0&&(e=this._prevInputEvent),At(At({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},r.prototype.getEventData=function(){return this.data},r.prototype.getEventDatas=function(){return this.data},r.prototype.unset=function(){var e=this,n=this.targets,i=this.options.container;this.off(),Ft(this._window,"blur",this.onBlur),this._useDrag&&n.forEach(function(a){Ft(a,"dragstart",e.onDragStart)}),this._useMouse&&(n.forEach(function(a){Ft(a,"mousedown",e.onDragStart)}),Ft(i,"contextmenu",this._onContextMenu)),this._useTouch&&(n.forEach(function(a){Ft(a,"touchstart",e.onDragStart)}),Ft(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},r.prototype.onPinchStart=function(e){var n=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new _i(hn(e));this.pinchFlag=!0,this._addStore(a);var o=this.emit("pinchStart",At(At({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:e,isTrusted:this._isTrusted,preventDefault:function(){e.preventDefault()},preventDrag:function(){n._dragFlag=!1}}));o===!1&&(this.pinchFlag=!1)}},r.prototype.onPinch=function(e,n){if(!(!this.flag||!this.pinchFlag||n.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",At(At({data:this.data,datas:this.data,movement:this.getMovement(n),angle:i.getAngle(n),rotation:i.getRotation(n),touches:i.getPositions(n),scale:i.getScale(n),distance:i.getDistance(n)},i.getPosition(n)),{inputEvent:e,isTrusted:this._isTrusted}))}},r.prototype.onPinchEnd=function(e){if(this.pinchFlag){var n=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",At(At({data:this.data,datas:this.data,isPinch:n,touches:i.getPositions()},i.getPosition()),{inputEvent:e}))}},r.prototype.getCurrentStore=function(){return this.clientStores[0]},r.prototype.moveClients=function(e,n,i){var a=this._getPosition(e,i),o=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var s=!1;return!o&&this.isDrag&&(s=!0),At(At({data:this.data,datas:this.data},a),{movement:this.getMovement(e),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:n,isTrusted:this._isTrusted,isFirstDrag:s})},r.prototype._addStore=function(e){this.clientStores.splice(0,0,e)},r.prototype._getPosition=function(e,n){var i=this.getCurrentStore(),a=i.getPosition(e,n),o=this.clientStores.slice(1).reduce(function(f,l){var c=l.getPosition();return f.distX+=c.distX,f.distY+=c.distY,f},a),s=o.distX,u=o.distY;return At(At({},a),{distX:s,distY:u})},r.prototype._attchDragEvent=function(){var e=this._window,n=this.options.container,i={passive:!1};this._isDragAPI&&(Ht(n,"dragover",this.onDrag,i),Ht(e,"dragend",this.onDragEnd)),this._useMouse&&(Ht(n,"mousemove",this.onDrag),Ht(e,"mouseup",this.onDragEnd)),this._useTouch&&(Ht(n,"touchmove",this.onDrag,i),Ht(e,"touchend",this.onDragEnd,i),Ht(e,"touchcancel",this.onDragEnd,i))},r.prototype._dettachDragEvent=function(){var e=this._window,n=this.options.container;this._isDragAPI&&(Ft(n,"dragover",this.onDrag),Ft(e,"dragend",this.onDragEnd)),this._useMouse&&(Ft(n,"mousemove",this.onDrag),Ft(e,"mouseup",this.onDragEnd)),this._useTouch&&(Ft(n,"touchstart",this.onDragStart),Ft(n,"touchmove",this.onDrag),Ft(e,"touchend",this.onDragEnd),Ft(e,"touchcancel",this.onDragEnd))},r}(Kn);function Uc(t){for(var r=5381,e=t.length;e;)r=r*33^t.charCodeAt(--e);return r>>>0}var Kc=Uc;function $c(t){return Kc(t).toString(36)}function Jc(t){if(t&&t.getRootNode){var r=t.getRootNode();if(r.nodeType===11)return r}}function Zc(t,r,e){return e.original?r:r.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(n,i){var a=i.trim();return(a?Vr(a):[""]).map(function(o){var s=o.trim();return s.indexOf("@")===0?s:s.indexOf(":global")>-1?s.replace(/\:global/g,""):s.indexOf(":host")>-1?"".concat(s.replace(/\:host/g,".".concat(t))):s?".".concat(t," ").concat(s):".".concat(t)}).join(", ")+" {"})}function Qc(t,r,e,n,i){var a=xe(n),o=a.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",t),o.setAttribute("data-styled-count","1"),e.nonce&&o.setAttribute("nonce",e.nonce),o.innerHTML=Zc(t,r,e),(i||a.head||a.body).appendChild(o),o}function td(t){var r="rCS"+$c(t);return{className:r,inject:function(e,n){n===void 0&&(n={});var i=Jc(e),a=(i||e.ownerDocument||document).querySelector('style[data-styled-id="'.concat(r,'"]'));if(!a)a=Qc(r,t,n,e,i);else{var o=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(o+1))}return{destroy:function(){var s,u=parseFloat(a.getAttribute("data-styled-count"))||0;u<=1?(a.remove?a.remove():(s=a.parentNode)===null||s===void 0||s.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(u-1))}}}}}var Ji=function(){return Ji=Object.assign||function(r){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},Ji.apply(this,arguments)};function rd(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e}function vu(t,r){var e=td(r),n=e.className;return Jl(function(i,a){var o=i.className,s=o===void 0?"":o;i.cspNonce;var u=rd(i,["className","cspNonce"]),f=lc();return cc(a,function(){return f.current},[]),Zs(function(){var l=e.inject(f.current,{nonce:i.cspNonce});return function(){l.destroy()}},[]),pr(t,Ji({ref:f,"data-styled-id":n,className:"".concat(s," ").concat(n)},u))})}var Zi=function(t,r){return Zi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},Zi(t,r)};function an(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");Zi(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var w=function(){return w=Object.assign||function(r){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},w.apply(this,arguments)};function ed(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e}function nd(t,r,e,n){var i=arguments.length,a=i<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(r,e,a):o(r,e))||a);return i>3&&a&&Object.defineProperty(r,e,a),a}function id(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function O(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a}function q(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return t.concat(a||Array.prototype.slice.call(r))}function on(t,r){return w({events:[],props:[],name:t},r)}var ad=["n","w","s","e"],Ia=["n","w","s","e","nw","ne","sw","se"];function od(t,r){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(r,'deg);transform-origin: 16px 16px"></path></svg>')}function sd(t){var r=od(1,t),e=Math.round(t/45)*45%180,n="ns-resize";return e===135?n="nwse-resize":e===45?n="nesw-resize":e===90&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(r,"') 16 16, ").concat(n,";")}var _e=gc(),hu=_e.browser.webkit,gu=hu&&function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,r=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return r?parseFloat(r[1])<605:!1}(),mu=_e.browser.name,bu=parseInt(_e.browser.version,10),ud=mu==="chrome",fd=_e.browser.chromium,ld=parseInt(_e.browser.chromiumVersion,10)||0,cd=ud&&bu>=109||fd&&ld>=109,dd=mu==="firefox",pd=parseInt(_e.browser.webkitVersion,10)>=612||bu>=15,Aa="moveable-",vd=Ia.map(function(t){var r="",e="",n="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(r="top: ".concat(a,";"),i="bottom"),t.indexOf("s")>-1&&(r="top: 0px;",i="top"),t.indexOf("w")>-1&&(e="left: ".concat(a,";"),n="right"),t.indexOf("e")>-1&&(e="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(e).concat(r,`
        transform-origin: `).concat(n," ").concat(i,`;
    }`)}).join(`
`),hd=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(vd,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(sd(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(gu?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),gd=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Qi=1e-4,Ut=1e-7,gn=1e-9,ta=Math.pow(10,10),Io=-ta,md={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Ba={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},yu={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},xu=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function sn(t,r,e,n,i,a){var o,s;a===void 0&&(a="draggable");var u=(s=(o=r.gestos[a])===null||o===void 0?void 0:o.move(e,t.inputEvent))!==null&&s!==void 0?s:{},f=u.originalDatas||u.datas,l=f[a]||(f[a]={});return w(w({},i?sf(r,u):u),{isPinch:!!n,parentEvent:!0,datas:l,originalDatas:t.originalDatas})}var ve=function(){function t(r){var e;r===void 0&&(r="draggable"),this.ableName=r,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(e={},e[r]={},e)}return t.prototype.dragStart=function(r,e){this.isDrag=!1,this.isFlag=!1;var n=e.originalDatas;return this.datas=n,n[this.ableName]||(n[this.ableName]={}),w(w({},this.move(r,e.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(r,e){return this.move([r[0]-this.prevX,r[1]-this.prevY],e)},t.prototype.move=function(r,e){var n,i,a=!1;if(!this.isFlag)this.prevX=r[0],this.prevY=r[1],this.startX=r[0],this.startY=r[1],n=r[0],i=r[1],this.isFlag=!0;else{var o=this.isDrag;n=this.prevX+r[0],i=this.prevY+r[1],(r[0]||r[1])&&(this.isDrag=!0),!o&&this.isDrag&&(a=!0)}return this.prevX=n,this.prevY=i,{type:"drag",clientX:n,clientY:i,inputEvent:e,isFirstDrag:a,isDrag:this.isDrag,distX:n-this.startX,distY:i-this.startY,deltaX:r[0],deltaY:r[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function fe(t,r,e,n){var i=t.length===16,a=i?4:3,o=Zr(t,e,n,a),s=O(o,4),u=O(s[0],2),f=u[0],l=u[1],c=O(s[1],2),d=c[0],v=c[1],p=O(s[2],2),h=p[0],g=p[1],m=O(s[3],2),b=m[0],y=m[1],S=O(Rt(t,r,a),2),E=S[0],x=S[1],_=Math.min(f,d,h,b),C=Math.min(l,v,g,y),D=Math.max(f,d,h,b),M=Math.max(l,v,g,y);f=f-_||0,d=d-_||0,h=h-_||0,b=b-_||0,l=l-C||0,v=v-C||0,g=g-C||0,y=y-C||0,E=E-_||0,x=x-C||0;var I=t[0],T=t[a+1],R=ar(I*T);return{left:_,top:C,right:D,bottom:M,origin:[E,x],pos1:[f,l],pos2:[d,v],pos3:[h,g],pos4:[b,y],direction:R}}function Su(t,r){var e=r.clientX,n=r.clientY,i=r.datas,a=t.state,o=a.moveableClientRect,s=a.rootMatrix,u=a.is3d,f=a.pos1,l=o.left,c=o.top,d=u?4:3,v=O(nt(me(s,[e-l,n-c],d),f),2),p=v[0],h=v[1],g=O(xr({datas:i,distX:p,distY:h}),2),m=g[0],b=g[1];return[m,b]}function Jr(t,r){var e=r.datas,n=t.state,i=n.allMatrix,a=n.beforeMatrix,o=n.is3d,s=n.left,u=n.top,f=n.origin,l=n.offsetMatrix,c=n.targetMatrix,d=n.transformOrigin,v=o?4:3;e.is3d=o,e.matrix=i,e.targetMatrix=c,e.beforeMatrix=a,e.offsetMatrix=l,e.transformOrigin=d,e.inverseMatrix=yr(i,v),e.inverseBeforeMatrix=yr(a,v),e.absoluteOrigin=jr(yt([s,u],f),v),e.startDragBeforeDist=Wt(e.inverseBeforeMatrix,e.absoluteOrigin,v),e.startDragDist=Wt(e.inverseMatrix,e.absoluteOrigin,v)}function bd(t){return fe(t.datas.beforeTransform,[50,50],100,100).direction}function $n(t,r,e){var n=r.datas,i=r.originalDatas.beforeRenderable,a=n.transformIndex,o=i.nextTransforms,s=o.length,u=i.nextTransformAppendedIndexes,f=-1;a===-1?(e==="translate"?f=0:e==="rotate"&&(f=wr(o,function(v){return v.match(/scale\(/g)})),f===-1&&(f=o.length),n.transformIndex=f):tr(u,function(v){return v.index===a&&v.functionName===e})?f=a:f=a+u.filter(function(v){return v.index<a}).length;var l=qp(o,t.state,f),c=l.targetFunction,d=e==="rotate"?"rotateZ":e;n.beforeFunctionTexts=l.beforeFunctionTexts,n.afterFunctionTexts=l.afterFunctionTexts,n.beforeTransform=l.beforeFunctionMatrix,n.beforeTransform2=l.beforeFunctionMatrix2,n.targetTansform=l.targetFunctionMatrix,n.afterTransform=l.afterFunctionMatrix,n.afterTransform2=l.afterFunctionMatrix2,n.targetAllTransform=l.allFunctionMatrix,c.functionName===d?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):s>f&&(n.isAppendTransform=!0,i.nextTransformAppendedIndexes=q(q([],O(u),!1),[{functionName:e,index:f,isAppend:!0}],!1))}function Jn(t,r,e){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?e:r," ").concat(t.afterFunctionTexts.join(" "))}function yd(t){var r=t.datas,e=t.distX,n=t.distY,i=O(Eu({datas:r,distX:e,distY:n}),2),a=i[0],o=i[1],s=_u(r,Sc([a,o],4));return Wt(s,jr([0,0,0],4),4)}function _u(t,r,e){var n=t.beforeTransform,i=t.afterTransform,a=t.beforeTransform2,o=t.afterTransform2,s=t.targetAllTransform,u=e?Et(s,r,4):Et(r,s,4),f=Et(yr(e?a:n,4),u,4),l=Et(f,yr(e?o:i,4),4);return l}function Eu(t){var r=t.datas,e=t.distX,n=t.distY,i=r.inverseBeforeMatrix,a=r.is3d,o=r.startDragBeforeDist,s=r.absoluteOrigin,u=a?4:3;return nt(Wt(i,yt(s,[e,n]),u),o)}function xr(t,r){var e=t.datas,n=t.distX,i=t.distY,a=e.inverseBeforeMatrix,o=e.inverseMatrix,s=e.is3d,u=e.startDragBeforeDist,f=e.startDragDist,l=e.absoluteOrigin,c=s?4:3;return nt(Wt(r?a:o,yt(l,[n,i]),c),r?u:f)}function xd(t,r){var e=t.datas,n=t.distX,i=t.distY,a=e.beforeMatrix,o=e.matrix,s=e.is3d,u=e.startDragBeforeDist,f=e.startDragDist,l=e.absoluteOrigin,c=s?4:3;return nt(Wt(r?a:o,yt(r?u:f,[n,i]),c),l)}function Sd(t,r,e,n,i,a){return n===void 0&&(n=r),i===void 0&&(i=e),a===void 0&&(a=[0,0]),t?t.map(function(o,s){var u=Ze(o),f=u.value,l=u.unit,c=s?i:n,d=s?e:r;if(o==="%"||isNaN(f)){var v=c?a[s]/c:0;return d*v}else if(l!=="%")return f;return d*f/100}):a}function Cu(t){var r=[];return t[1]>=0&&(t[0]>=0&&r.push(3),t[0]<=0&&r.push(2)),t[1]<=0&&(t[0]>=0&&r.push(1),t[0]<=0&&r.push(0)),r}function _d(t,r){return Cu(r).map(function(e){return t[e]})}function Nt(t,r){var e=(r[0]+1)/2,n=(r[1]+1)/2,i=[Lr(t[0][0],t[1][0],e,1-e),Lr(t[0][1],t[1][1],e,1-e)],a=[Lr(t[2][0],t[3][0],e,1-e),Lr(t[2][1],t[3][1],e,1-e)];return[Lr(i[0],a[0],n,1-n),Lr(i[1],a[1],n,1-n)]}function Ed(t,r,e,n,i,a){var o=Zr(r,e,n,i),s=Nt(o,a),u=t[0]-s[0],f=t[1]-s[1];return[u,f]}function un(t,r,e,n){return Et(t,Fe(r,n,e),n)}function Cd(t,r,e,n){var i=t.transformOrigin,a=t.offsetMatrix,o=t.is3d,s=o?4:3,u;if(Qt(e)){var f=r.beforeTransform,l=r.afterTransform;n?u=gr(Xe(e),4,s):u=gr(Et(Et(f,Xe([e]),4),l,4),4,s)}else u=e;return un(a,u,i,s)}function Dd(t,r){var e=t.transformOrigin,n=t.offsetMatrix,i=t.is3d,a=t.targetMatrix,o=t.targetAllTransform,s=i?4:3;return un(n,Et(o||a,Ra(r,s),s),e,s)}function Zn(t,r){var e=Ee(r);return{setTransform:function(n,i){i===void 0&&(i=-1),e.startTransforms=zt(n)?n:Br(n),ra(t,r,i)},setTransformIndex:function(n){ra(t,r,n)}}}function Qn(t,r,e){var n=Ee(r),i=n.startTransforms;ra(t,r,wr(i,function(a){return a.indexOf("".concat(e,"("))===0}))}function ra(t,r,e){var n=Ee(r),i=r.datas;if(i.transformIndex=e,e!==-1){var a=n.startTransforms[e];if(a){var o=t.state,s=pe([a],{"x%":function(u){return u/100*o.offsetWidth},"y%":function(u){return u/100*o.offsetHeight}});i.startValue=s[0].functionValue}}}function za(t,r){var e=Ee(t);e.nextTransforms=Br(r)}function Ee(t){return t.originalDatas.beforeRenderable}function kn(t){var r=t.originalDatas.beforeRenderable;return r.nextTransforms}function mn(t){return(kn(t)||[]).join(" ")}function bn(t){return Ee(t).nextStyle}function Du(t,r,e,n,i){za(i,r);var a=Vt.drag(t,sn(i,t.state,e,n,!1)),o=a?a.transform:r;return w(w({transform:r,drag:a},jt({transform:o},i)),{afterTransform:o})}function ka(t,r,e,n,i,a){var o=Cd(t.state,i,r,a),s=Md(t,e,n,o);return s}function wu(t,r,e,n,i,a,o){var s=ka(t,r,e,i,a,o),u=t.state,f=u.left,l=u.top,c=t.props.groupable,d=c?f:0,v=c?l:0,p=nt(n,s);return nt(p,[d,v])}function wd(t,r,e,n,i,a,o){var s=wu(t,r,e,n,i,a,o);return s}function Od(t,r,e){return[r?-1+t[0]/(r/2):0,e?-1+t[1]/(e/2):0]}function Md(t,r,e,n){n===void 0&&(n=t.state.allMatrix);var i=t.state,a=i.width,o=i.height,s=i.is3d,u=s?4:3,f=[a/2*(1+r[0])+e[0],o/2*(1+r[1])+e[1]];return Rt(n,f,u)}function Rd(t,r,e){var n=e.fixedDirection,i=e.fixedPosition,a=e.fixedOffset;return wu(t,"rotate(".concat(r,"deg)"),n,i,a,e)}function Td(t,r,e,n,i,a){var o=t.props.groupable,s=t.state,u=s.transformOrigin,f=s.offsetMatrix,l=s.is3d,c=s.width,d=s.height,v=s.left,p=s.top,h=a.fixedDirection,g=a.nextTargetMatrix||s.targetMatrix,m=l?4:3,b=Sd(i,r,e,c,d,u),y=o?v:0,S=o?p:0,E=un(f,g,b,m),x=Ed(n,E,r,e,m,h);return nt(x,[y,S])}function Pd(t,r){return Nt(fr(t.state),r)}function Id(t,r){var e=t.targetGesto,n=t.controlGesto,i;return e!=null&&e.isFlag()&&(i=e.getEventData()[r]),!i&&(n!=null&&n.isFlag())&&(i=n.getEventData()[r]),i||{}}function Ad(t){if(t&&t.getRootNode){var r=t.getRootNode();if(r.nodeType===11)return r}}function Bd(t){var r=t("scale"),e=t("rotate"),n=t("translate"),i=[];return n&&n!=="0px"&&n!=="none"&&i.push("translate(".concat(n.split(/\s+/).join(","),")")),e&&e!=="1"&&e!=="none"&&i.push("rotate(".concat(e,")")),r&&r!=="1"&&r!=="none"&&i.push("scale(".concat(r.split(/\s+/).join(","),")")),i}function Ou(t,r,e){for(var n=t,i=[],a=_a(t)||Gr(t),o=!e&&t===r||t===a,s=o,u=!1,f=3,l,c,d,v=!1,p=Ve(r,r,!0).offsetParent,h=1;n&&!s;){s=o;var g=er(n),m=g("position"),b=Ku(n),y=m==="fixed",S=Bd(g),E=_c(Tp(b)),x=void 0,_=!1,C=!1,D=0,M=0,I=0,T=0,R={hasTransform:!1,fixedContainer:null};y&&(v=!0,R=zp(n),p=R.fixedContainer);var A=E.length;!u&&(A===16||S.length)&&(u=!0,f=4,sa(i),d&&(d=gr(d,3,4))),u&&A===9&&(E=gr(E,3,4));var P=Bp(n,t),L=P.tagName,k=P.hasOffset,B=P.isSVG,H=P.origin,Y=P.targetOrigin,G=P.offset,K=O(G,2),$=K[0],W=K[1];L==="svg"&&d&&(i.push({type:"target",target:n,matrix:kp(n,f)}),i.push({type:"offset",target:n,matrix:Mt(f)}));var j=parseFloat(g("zoom"))||1;if(y)x=R.fixedContainer,_=!0;else{var X=Ve(n,r,!1,!0,g),z=X.offsetZoom;if(x=X.offsetParent,_=X.isEnd,C=X.isStatic,h*=z,(X.isCustomElement||z!==1)&&C)$-=x.offsetLeft,W-=x.offsetTop;else if(dd||cd){var U=X.parentSlotElement;if(U){for(var it=x,rt=0,Q=0;it&&Ad(it);)rt+=it.offsetLeft,Q+=it.offsetTop,it=it.offsetParent;$-=rt,W-=Q}}}if(hu&&!pd&&k&&!B&&C&&(m==="relative"||m==="static")&&($-=x.offsetLeft,W-=x.offsetTop,o=o||_),y)k&&R.hasTransform&&(I=x.clientLeft,T=x.clientTop);else if(k&&p!==x&&(D=x.clientLeft,M=x.clientTop),k&&x===a){var Z=$u(n,!1);$+=Z[0],W+=Z[1]}if(i.push({type:"target",target:n,matrix:Fe(E,f,H)}),S.length&&(i.push({type:"offset",target:n,matrix:Mt(f)}),i.push({type:"target",target:n,matrix:Fe(Xe(S),f,H)})),k){var ht=n===t,ot=ht?0:n.scrollLeft,st=ht?0:n.scrollTop;i.push({type:"offset",target:n,matrix:Ur([$-ot+D-I,W-st+M-T],f)})}else i.push({type:"offset",target:n,origin:H});if(j!==1&&i.push({type:"zoom",target:n,matrix:Fe(Ra([j,j],f),f,[0,0])}),d||(d=E),l||(l=H),c||(c=Y),s||y)break;n=x,o=_,(!e||n===a)&&(s=o)}return d||(d=Mt(f)),l||(l=[0,0]),c||(c=[0,0]),{zoom:h,offsetContainer:p,matrixes:i,targetMatrix:d,transformOrigin:l,targetOrigin:c,is3d:u,hasFixed:v}}var Hr=null,Wr=null,ie=null;function he(t){t?(window.Map&&(Hr=new Map,Wr=new Map),ie=[]):(Hr=null,ie=null,Wr=null)}function zd(t){var r=Wr==null?void 0:Wr.get(t);if(r)return r;var e=Ge(t,!0);return Wr&&Wr.set(t,e),e}function kd(t,r){if(ie){var e=tr(ie,function(i){return i[0][0]==t&&i[0][1]==r});if(e)return e[1]}var n=Ou(t,r,!0);return ie&&ie.push([[t,r],n]),n}function er(t){var r=Hr==null?void 0:Hr.get(t);if(!r){var e=Ar(t).getComputedStyle(t);if(!Hr)return function(a){return e[a]};r={style:e,cached:{}},Hr.set(t,r)}var n=r.cached,i=r.style;return function(a){return a in n||(n[a]=i[a]),n[a]}}function vr(t,r,e){var n=e.originalDatas;n.groupable=n.groupable||{};var i=n.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return t.moveables.map(function(o,s){return a[s]=a[s]||{},a[s][r]=a[s][r]||{},w(w({},e),{isRequestChild:!0,datas:a[s][r],originalDatas:a[s]})})}function Ei(t,r,e,n,i,a,o){var s=!!e.match(/Start$/g),u=!!e.match(/End$/g),f=i.isPinch,l=i.datas,c=vr(t,r.name,i),d=t.moveables,v=c.map(function(p,h){var g=d[h],m=g.state,b=m.gestos,y=p;if(s)y=new ve(o).dragStart(n,p);else{if(b[o]||(b[o]=l.childGestos[h]),!b[o])return;y=sn(p,m,n,f,a,o)}var S=r[e](g,w(w({},y),{parentFlag:!0}));return u&&(b[o]=null),S});return s&&(l.childGestos=d.map(function(p){return p.state.gestos[o]})),v}function Cr(t,r,e,n,i,a){i===void 0&&(i=function(l,c){return c});var o=!!e.match(/End$/g),s=vr(t,r.name,n),u=t.moveables,f=s.map(function(l,c){var d=u[c],v=l;v=i(d,l);var p=r[e](d,w(w({},v),{parentFlag:!0}));return p&&a&&a(d,l,p,c),o&&(d.state.gestos={}),p});return f}function Fn(t,r,e,n){var i=e.fixedDirection,a=e.fixedPosition,o=n.datas.startPositions||fr(r.state),s=Nt(o,i),u=O(Wt(nn(-t.rotation/180*Math.PI,3),[s[0]-a[0],s[1]-a[1],1],3),2),f=u[0],l=u[1];return n.datas.originalX=f,n.datas.originalY=l,n}function Mu(t,r,e,n){var i=t.getState(),a=i.renderPoses,o=i.rotation,s=i.direction,u=$r(t.props,r).zoom,f=ke(o/Math.PI*180),l={},c=t.renderState;c.renderDirectionMap||(c.renderDirectionMap={});var d=c.renderDirectionMap;e.forEach(function(p){var h=p.dir;l[h]=!0});var v=ar(s);return e.map(function(p){var h=p.data,g=p.classNames,m=p.dir,b=Ba[m];if(!b||!l[m])return null;d[m]=!0;var y=(ft(f,15)+v*yu[m]+720)%180,S={};return Or(h).forEach(function(E){S["data-".concat(E)]=h[E]}),n.createElement("div",w({className:et.apply(void 0,q(["control","direction",m,r],O(g),!1)),"data-rotation":y,"data-direction":m},S,{key:"direction-".concat(m),style:Hn.apply(void 0,q([o,u],O(b.map(function(E){return a[E]})),!1))}))})}function Ru(t,r,e,n){var i=$r(t.props,e),a=i.renderDirections,o=a===void 0?r:a,s=i.displayAroundControls;if(!o)return[];var u=o===!0?Ia:o;return q(q([],O(s?Au(t,n,e,u):[]),!1),O(Mu(t,e,u.map(function(f){return{data:{},classNames:[],dir:f}}),n)),!1)}function Ye(t,r,e,n,i,a){for(var o=[],s=6;s<arguments.length;s++)o[s-6]=arguments[s];var u=Tt(e,n),f=r?ft(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:et.apply(void 0,q(["line","direction",r?"edge":"",r],O(o),!1)),"data-rotation":f,"data-line-key":a,"data-direction":r,style:Ie(e,n,i,u)})}function Tu(t,r,e,n,i){var a=e===!0?ad:e;return a.map(function(o,s){var u=O(Ba[o],2),f=u[0],l=u[1];if(l!=null)return Ye(t,o,n[f],n[l],i,"".concat(r,"Edge").concat(s),r)}).filter(Boolean)}function Pu(t){return function(r,e){var n=$r(r.props,t).edge;return n&&(n===!0||n.length)?q(q([],O(Tu(e,t,n,r.getState().renderPoses,r.props.zoom)),!1),O(Fd(r,t,e)),!1):Iu(r,t,e)}}function Iu(t,r,e){return Ru(t,Ia,r,e)}function Fd(t,r,e){return Ru(t,["nw","ne","sw","se"],r,e)}function Au(t,r,e,n){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=t.getState(),o=a.renderPoses,s=a.rotation,u=a.direction,f=i.renderDirectionMap,l=t.props.zoom,c=ar(u),d=s/Math.PI*180;return(n||Or(f)).map(function(v){var p=Ba[v];if(!p)return null;var h=(ft(d,15)+c*yu[v]+720)%180,g=["around-control"];return e&&g.push("direction",e),r.createElement("div",{className:et.apply(void 0,q([],O(g),!1)),"data-rotation":h,"data-direction":v,key:"direction-around-".concat(v),style:Hn.apply(void 0,q([s,l],O(p.map(function(m){return o[m]})),!1))})})}function Fa(t,r,e){var n=t||{},i=n.position,a=i===void 0?"client":i,o=n.left,s=o===void 0?-1/0:o,u=n.top,f=u===void 0?-1/0:u,l=n.right,c=l===void 0?1/0:l,d=n.bottom,v=d===void 0?1/0:d,p={position:a,left:s,top:f,right:c,bottom:v};return{vertical:Ao(p,r,!0),horizontal:Ao(p,e,!1)}}function ti(t,r){var e=t.state,n=e.containerClientRect,i=n.clientHeight,a=n.clientWidth,o=n.clientLeft,s=n.clientTop,u=e.snapOffset,f=u.left,l=u.top,c=u.right,d=u.bottom,v=r||t.props.bounds||{},p=v.position||"client",h=p==="css",g=v.left,m=g===void 0?-1/0:g,b=v.top,y=b===void 0?-1/0:b,S=v.right,E=S===void 0?h?-1/0:1/0:S,x=v.bottom,_=x===void 0?h?-1/0:1/0:x;return h&&(E=a+c-f-E,_=i+d-l-_),{left:m+f-o,right:E+f-o,top:y+l-s,bottom:_+l-s}}function Gd(t,r,e){var n=ti(t),i=n.left,a=n.top,o=n.right,s=n.bottom,u=O(e,2),f=u[0],l=u[1],c=O(nt(e,r),2),d=c[0],v=c[1];N(d)<Ut&&(d=0),N(v)<Ut&&(v=0);var p=v>0,h=d>0,g={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(d===0&&v===0)return{vertical:g,horizontal:m};if(d===0)p?s<l&&(m.pos=s,m.offset=l-s):a>l&&(m.pos=a,m.offset=l-a);else if(v===0)h?o<f&&(g.pos=o,g.offset=f-o):i>f&&(g.pos=i,g.offset=f-i);else{var b=v/d,y=e[1]-b*f,S=0,E=0,x=!1;h&&o<=f?(S=b*o+y,E=o,x=!0):!h&&f<=i&&(S=b*i+y,E=i,x=!0),x&&(S<a||S>s)&&(x=!1),x||(p&&s<=l?(S=s,E=(S-y)/b,x=!0):!p&&l<=a&&(S=a,E=(S-y)/b,x=!0)),x&&(g.isBound=!0,g.pos=E,g.offset=f-E,m.isBound=!0,m.pos=S,m.offset=l-S)}return{vertical:g,horizontal:m}}function Ao(t,r,e){var n=t[e?"left":"top"],i=t[e?"right":"bottom"],a=Math.min.apply(Math,q([],O(r),!1)),o=Math.max.apply(Math,q([],O(r),!1)),s=[];return n+1>a&&s.push({direction:"start",isBound:!0,offset:a-n,pos:n}),i-1<o&&s.push({direction:"end",isBound:!0,offset:o-i,pos:i}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(u,f){return N(f.offset)-N(u.offset)})}function Bo(t,r,e){var n=e?t.map(function(i){return en(i,e)}):t;return n.some(function(i){return i[0]<r.left&&N(i[0]-r.left)>.1||i[0]>r.right&&N(i[0]-r.right)>.1||i[1]<r.top&&N(i[1]-r.top)>.1||i[1]>r.bottom&&N(i[1]-r.bottom)>.1})}function Nd(t,r,e){var n=ur(t),i=Math.sqrt(n*n-r*r)||0;return[i,-i].sort(function(a,o){return N(a-t[e?0:1])-N(o-t[e?0:1])}).map(function(a){return Tt([0,0],e?[a,r]:[r,a])})}function Ld(t,r,e,n,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,o=ti(t),s=o.left,u=o.top,f=o.right,l=o.bottom,c=s-n[0],d=f-n[0],v=u-n[1],p=l-n[1],h={left:c,top:v,right:d,bottom:p};if(!Bo(e,h,0))return[];var g=[];return[[c,0],[d,0],[v,1],[p,1]].forEach(function(m){var b=O(m,2),y=b[0],S=b[1];e.forEach(function(E){var x=Tt([0,0],E);g.push.apply(g,q([],O(Nd(E,y,S).map(function(_){return a+_-x}).filter(function(_){return!Bo(r,h,_)}).map(function(_){return ft(_*180/Math.PI,Ut)})),!1))})}),g}var Hd=["left","right","center"],Wd=["top","bottom","middle"],zo={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},zr={start:"left",end:"right",center:"center"},kr={start:"top",end:"bottom",center:"middle"};function ae(){return{left:!1,top:!1,right:!1,bottom:!1}}function Ce(t,r){var e=t.props,n=e.snappable,i=e.bounds,a=e.innerBounds,o=e.verticalGuidelines,s=e.horizontalGuidelines,u=e.snapGridWidth,f=e.snapGridHeight,l=t.state,c=l.guidelines,d=l.enableSnap;return!n||!d||r&&n!==!0&&n.indexOf(r)<0?!1:!!(u||f||i||a||c&&c.length||o&&o.length||s&&s.length)}function Ga(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function qd(t,r){var e=Ga(t),n={};for(var i in e)i in r&&e[i]&&(n[i]=r[i]);return n}function Na(t,r){var e=qd(t,r),n=Wd.filter(function(a){return a in e}),i=Hd.filter(function(a){return a in e});return{horizontalNames:n,verticalNames:i,horizontal:n.map(function(a){return e[a]}),vertical:i.map(function(a){return e[a]})}}function Xd(t,r,e){var n=Rt(t,[r.clientLeft,r.clientTop],e);return[r.left+n[0],r.top+n[1]]}function Yd(t){var r=O(t,2),e=r[0],n=r[1],i=n[0]-e[0],a=n[1]-e[1];Math.abs(i)<Bt&&(i=0),Math.abs(a)<Bt&&(a=0);var o=0,s=0,u=0;return i?a?(o=-a/i,s=1,u=o*e[0]-e[1]):(s=1,u=-e[1]):(o=-1,u=e[0]),[o,s,u].map(function(f){return ft(f,Bt)})}function ri(t,r,e,n,i,a){n===void 0&&(n=[]),i===void 0&&(i=[]);var o=t.props,s=Hp(a,o.snapThreshold,5);return Bu(t.state.guidelines,r,e,n,i,s)}function Bu(t,r,e,n,i,a){return{vertical:Fo(t,"vertical",r,a,n),horizontal:Fo(t,"horizontal",e,a,i)}}function Vd(t,r,e){var n=O(e,2),i=n[0],a=n[1],o=O(r,2),s=o[0],u=o[1],f=O(nt(e,r),2),l=f[0],c=f[1],d=c>0,v=l>0;l=Wn(l),c=Wn(c);var p={isSnap:!1,offset:0,pos:0},h={isSnap:!1,offset:0,pos:0};if(l===0&&c===0)return{vertical:p,horizontal:h};var g=ri(t,l?[i]:[],c?[a]:[]),m=g.vertical,b=g.horizontal;m.posInfos.filter(function(L){var k=L.pos;return v?k>=s:k<=s}),b.posInfos.filter(function(L){var k=L.pos;return d?k>=u:k<=u}),m.isSnap=m.posInfos.length>0,b.isSnap=b.posInfos.length>0;var y=ea(m),S=y.isSnap,E=y.guideline,x=ea(b),_=x.isSnap,C=x.guideline,D=_?C.pos[1]:0,M=S?E.pos[0]:0;if(l===0)_&&(h.isSnap=!0,h.pos=C.pos[1],h.offset=a-h.pos);else if(c===0)S&&(p.isSnap=!0,p.pos=M,p.offset=i-M);else{var I=c/l,T=e[1]-I*i,R=0,A=0,P=!1;S?(A=M,R=I*A+T,P=!0):_&&(R=D,A=(R-T)/I,P=!0),P&&(p.isSnap=!0,p.pos=A,p.offset=i-A,h.isSnap=!0,h.pos=R,h.offset=a-R)}return{vertical:p,horizontal:h}}function Pr(t){var r="";return t===-1||t==="top"||t==="left"?r="start":t===0||t==="center"||t==="middle"?r="center":(t===1||t==="right"||t==="bottom")&&(r="end"),r}function ko(t,r,e){var n=Na(t.props.snapDirections,r),i=ri(t,n.vertical,n.horizontal,n.verticalNames.map(function(s){return Pr(s)}),n.horizontalNames.map(function(s){return Pr(s)}),e),a=Pr(n.horizontalNames[i.horizontal.index]),o=Pr(n.verticalNames[i.vertical.index]);return{vertical:w(w({},i.vertical),{direction:o}),horizontal:w(w({},i.horizontal),{direction:a})}}function ea(t){var r=t.isSnap;if(!r)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var e=t.posInfos[0],n=e.guidelineInfos[0],i=n.offset,a=n.dist,o=n.guideline;return{isSnap:r,offset:i,dist:a,pos:e.pos,guideline:o}}function Fo(t,r,e,n,i){var a,o;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var s=r==="vertical",u=s?0:1,f=e.map(function(c,d){var v=i[d]||"",p=t.map(function(h){var g=h.pos,m=c-g[u];return{offset:m,dist:N(m),guideline:h,direction:v}}).filter(function(h){var g=h.guideline,m=h.dist,b=g.type;return!(b!==r||m>n)}).sort(function(h,g){return h.dist-g.dist});return{pos:c,index:d,guidelineInfos:p,direction:v}}).filter(function(c){return c.guidelineInfos.length>0}).sort(function(c,d){return c.guidelineInfos[0].dist-d.guidelineInfos[0].dist}),l=f.length>0;return{isSnap:l,index:l?f[0].index:-1,direction:(o=(a=f[0])===null||a===void 0?void 0:a.direction)!==null&&o!==void 0?o:"",posInfos:f}}function jd(t,r,e,n){n===void 0&&(n=1);var i=[];e[0]&&e[1]?i=[e,[-e[0],e[1]],[e[0],-e[1]]]:!e[0]&&!e[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(c,d,v){var p=v[d+1]||v[0];i.push(c),i.push([(c[0]+p[0])/2,(c[1]+p[1])/2])}):t.props.keepRatio?i.push([-1,-1],[-1,1],[1,-1],[1,1],e):(i.push.apply(i,q([],O(_d([[-1,-1],[1,-1],[-1,-1],[1,1]],e)),!1)),i.length>1&&i.push([(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]));var a=i.map(function(c){return Nt(r,c)}),o=a.map(function(c){return c[0]}),s=a.map(function(c){return c[1]}),u=ri(t,o,s,i.map(function(c){return Pr(c[0])}),i.map(function(c){return Pr(c[1])}),n),f=Pr(i.map(function(c){return c[0]})[u.vertical.index]),l=Pr(i.map(function(c){return c[1]})[u.horizontal.index]);return{vertical:w(w({},u.vertical),{direction:f}),horizontal:w(w({},u.horizontal),{direction:l})}}function zu(t,r){var e=N(t.offset),n=N(r.offset);return t.isBound&&r.isBound?n-e:t.isBound?-1:r.isBound?1:t.isSnap&&r.isSnap?n-e:t.isSnap?-1:r.isSnap||e<Ut?1:n<Ut?-1:e-n}function Gn(t,r){return t.slice().sort(function(e,n){var i=e.sign[r],a=n.sign[r],o=e.offset[r],s=n.offset[r];if(i){if(!a)return-1}else return 1;return zu({isBound:e.isBound,isSnap:e.isSnap,offset:o},{isBound:n.isBound,isSnap:n.isSnap,offset:s})})[0]}function Ud(t,r,e){var n=[];if(e)N(r[0])!==1||N(r[1])!==1?n.push([r,[-1,-1]],[r,[-1,1]],[r,[1,-1]],[r,[1,1]]):n.push([r,[t[0],-t[1]]],[r,[-t[0],t[1]]]),n.push([r,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(s){var u=[o*i[0],s*i[1]];r[0]===u[0]&&r[1]===u[1]||n.push([r,u])})})}else if(t[0]){var a=N(r[0])===1?[1]:[1,-1];a.forEach(function(o){n.push([[r[0],-1],[o*t[0],-1]],[[r[0],0],[o*t[0],0]],[[r[0],1],[o*t[0],1]])})}else if(t[1]){var a=N(r[1])===1?[1]:[1,-1];a.forEach(function(s){n.push([[-1,r[1]],[-1,s*t[1]]],[[0,r[1]],[0,s*t[1]]],[[1,r[1]],[1,s*t[1]]])})}return n}function ku(t,r){var e=Li([r[0][0],r[1][0]]),n=Li([r[0][1],r[1][1]]);return{vertical:e<=t[0],horizontal:n<=t[1]}}function La(t,r){var e=O(r,2),n=e[0],i=e[1],a=i[0]-n[0],o=i[1]-n[1];N(a)<Ut&&(a=0),N(o)<Ut&&(o=0);var s,u;if(!a)s=n[0],u=t[0];else if(!o)s=n[1],u=t[1];else{var f=o/a;s=f*(t[0]-n[0])+n[1],u=t[1]}return s-u}function Fu(t,r,e,n){return n===void 0&&(n=Ut),t.every(function(i){var a=La(i,r),o=a<=0;return o===e||N(a)<=n})}function Go(t,r,e,n,i){return i===void 0&&(i=0),n&&r-i<=t||!n&&t<=e+i?{isBound:!0,offset:n?r-t:e-t}:{isBound:!1,offset:0}}function Kd(t,r){var e=r.line,n=r.centerSign,i=r.verticalSign,a=r.horizontalSign,o=r.lineConstants,s=t.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=s.left,f=s.top,l=s.width,c=s.height,d=[[u,f],[u,f+c]],v=[[u,f],[u+l,f]],p=[[u+l,f],[u+l,f+c]],h=[[u,f+c],[u+l,f+c]];if(Fu([[u,f],[u+l,f],[u,f+c],[u+l,f+c]],e,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=Ir(e,o,v,i),m=Ir(e,o,h,i),b=Ir(e,o,d,a),y=Ir(e,o,p,a),S=g.isBound&&m.isBound,E=g.isBound||m.isBound,x=b.isBound&&y.isBound,_=b.isBound||y.isBound,C=ge(g.offset,m.offset),D=ge(b.offset,y.offset),M=[0,0],I=!1,T=!1;return N(D)<N(C)?(M=[C,0],I=E,T=S):(M=[0,D],I=_,T=x),{isAllBound:T,isVerticalBound:E,isHorizontalBound:_,isBound:I,offset:M}}function Ir(t,r,e,n,i,a){var o=O(r,2),s=o[0],u=o[1],f=t[0],l=e[0],c=e[1],d=Wn(c[1]-l[1]),v=Wn(c[0]-l[0]),p=u,h=s,g=-s/u;if(v){if(!d){if(a&&!p)return{isBound:!1,offset:0};if(h){var S=(l[1]-f[1])/g+f[0];return Go(S,l[0],c[0],n,i)}else{var b=l[1]-f[1],y=N(b)<=(i||0);return{isBound:y,offset:y?b:0}}}}else{if(a&&!h)return{isBound:!1,offset:0};if(p){var m=g*(l[0]-f[0])+f[1];return Go(m,l[1],c[1],n,i)}else{var b=l[0]-f[0],y=N(b)<=(i||0);return{isBound:y,offset:y?b:0}}}return{isBound:!1,offset:0}}function Gu(t,r,e){return r.map(function(n){var i=Kd(t,n),a=i.isBound,o=i.offset,s=i.isVerticalBound,u=i.isHorizontalBound,f=n.multiple,l=xr({datas:e,distX:o[0],distY:o[1]}).map(function(c,d){return c*(f[d]?2/f[d]:0)});return{sign:f,isBound:a,isVerticalBound:s,isHorizontalBound:u,isSnap:!1,offset:l}})}function $d(t,r,e){var n,i=Ha(t,r,[0,0],!1).map(function(d){return w(w({},d),{multiple:d.multiple.map(function(v){return N(v)*2})})}),a=Gu(t,i,e),o=Gn(a,0),s=Gn(a,1),u=0,f=0,l=o.isVerticalBound||s.isVerticalBound,c=o.isHorizontalBound||s.isHorizontalBound;return(l||c)&&(n=O(xd({datas:e,distX:-o.offset[0],distY:-s.offset[1]}),2),u=n[0],f=n[1]),{vertical:{isBound:l,offset:u},horizontal:{isBound:c,offset:f}}}function Jd(t,r){var e=[],n=t[0],i=t[1];return n&&i?e.push([[0,i*2],t,[-n,i]],[[n*2,0],t,[n,-i]]):n?(e.push([[n*2,0],[n,1],[n,-1]]),r&&e.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):i?(e.push([[0,i*2],[1,i],[-1,i]]),r&&e.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):e.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),e}function Ha(t,r,e,n){var i=t.state,a=i.allMatrix,o=i.is3d,s=Zr(a,100,100,o?4:3),u=Nt(s,[0,0]);return Jd(e,n).map(function(f){var l=O(f,3),c=l[0],d=l[1],v=l[2],p=[Nt(s,d),Nt(s,v)],h=Yd(p),g=ku(u,p),m=g.vertical,b=g.horizontal,y=La(u,p)<=0;return{multiple:c,centerSign:y,verticalSign:m,horizontalSign:b,lineConstants:h,line:[Nt(r,d),Nt(r,v)]}})}function No(t,r,e,n){var i=n?t.map(function(a){return en(a,n)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(a){var o=La(e,a)<=0;return!Fu(r,a,o)})}function Zd(t){var r=O(t,2),e=r[0],n=r[1],i=n[0]-e[0],a=n[1]-e[1];if(!i)return N(e[0]);if(!a)return N(e[1]);var o=a/i;return N((-o*e[0]+e[1])/Math.sqrt(Math.pow(o,2)+1))}function Qd(t){var r=O(t,2),e=r[0],n=r[1],i=n[0]-e[0],a=n[1]-e[1];if(!i)return[e[0],0];if(!a)return[0,e[1]];var o=a/i,s=-o*e[0]+e[1];return[-s/(o+1/o),s/(o*o+1)]}function tp(t,r,e,n,i){var a=t.props.innerBounds,o=i*Math.PI/180;if(!a)return[];var s=a.left,u=a.top,f=a.width,l=a.height,c=s-n[0],d=s+f-n[0],v=u-n[1],p=u+l-n[1],h=[[c,v],[d,v],[c,p],[d,p]],g=Nt(e,[0,0]);if(!No(e,h,g,0))return[];var m=[],b=h.map(function(y){return[ur(y),Tt([0,0],y)]});return[[e[0],e[1]],[e[1],e[3]],[e[3],e[2]],[e[2],e[0]]].forEach(function(y){var S=Tt([0,0],Qd(y)),E=Zd(y);m.push.apply(m,q([],O(b.filter(function(x){var _=O(x,1),C=_[0];return C&&E<=C}).map(function(x){var _=O(x,2),C=_[0],D=_[1],M=Math.acos(C?E/C:0),I=D+M,T=D-M;return[o+I-S,o+T-S]}).reduce(function(x,_){return x.push.apply(x,q([],O(_),!1)),x},[]).filter(function(x){return!No(r,h,g,x)}).map(function(x){return ft(x*180/Math.PI,Ut)})),!1))}),m}function rp(t){var r=t.props.innerBounds,e=ae();if(!r)return{boundMap:e,vertical:[],horizontal:[]};var n=t.getRect(),i=n.pos1,a=n.pos2,o=n.pos3,s=n.pos4,u=[i,a,o,s],f=Nt(u,[0,0]),l=r.left,c=r.top,d=r.width,v=r.height,p=[[l,c],[l,c+v]],h=[[l,c],[l+d,c]],g=[[l+d,c],[l+d,c+v]],m=[[l,c+v],[l+d,c+v]],b=Ha(t,u,[0,0],!1),y=[],S=[];return b.forEach(function(E){var x=E.line,_=E.lineConstants,C=ku(f,x),D=C.horizontal,M=C.vertical,I=Ir(x,_,h,M,1,!0),T=Ir(x,_,m,M,1,!0),R=Ir(x,_,p,D,1,!0),A=Ir(x,_,g,D,1,!0);I.isBound&&!e.top&&(y.push(c),e.top=!0),T.isBound&&!e.bottom&&(y.push(c+v),e.bottom=!0),R.isBound&&!e.left&&(S.push(l),e.left=!0),A.isBound&&!e.right&&(S.push(l+d),e.right=!0)}),{boundMap:e,horizontal:y,vertical:S}}function ep(t,r,e,n){var i=r[0]-t[0],a=r[1]-t[1];if(N(i)<Bt&&(i=0),N(a)<Bt&&(a=0),!i)return n?[0,0]:[0,e];if(!a)return n?[e,0]:[0,0];var o=a/i,s=t[1]-o*t[0];if(n){var u=o*(r[0]+e)+s;return[e,u-r[1]]}else{var f=(r[1]+e-s)/o;return[f-r[0],e]}}function na(t,r,e,n,i){var a=ep(t,r,e,n);if(!a)return{isOutside:!1,offset:[0,0]};var o=Er(t,r),s=Er(a,t),u=Er(a,r),f=s>o||u>o,l=O(xr({datas:i,distX:a[0],distY:a[1]}),2),c=l[0],d=l[1];return{offset:[c,d],isOutside:f}}function Nn(t,r){return t.isBound?t.offset:r.isSnap?ea(r).offset:0}function np(t,r,e,n,i){var a=O(r,2),o=a[0],s=a[1],u=O(e,2),f=u[0],l=u[1],c=O(n,2),d=c[0],v=c[1],p=O(i,2),h=p[0],g=p[1],m=-h,b=-g;if(t&&o&&s){m=0,b=0;var y=[];if(f&&l?y.push([0,g],[h,0]):f?y.push([h,0]):l?y.push([0,g]):d&&v?y.push([0,g],[h,0]):d?y.push([h,0]):v&&y.push([0,g]),y.length){y.sort(function(_,C){return ur(nt([o,s],_))-ur(nt([o,s],C))});var S=y[0];if(S[0]&&N(o)>Bt)m=-S[0],b=s*N(o+m)/N(o)-s;else if(S[1]&&N(s)>Bt){var E=s;b=-S[1],m=o*N(s+b)/N(E)-o}if(t&&l&&f)if(N(m)>Bt&&N(m)<N(h)){var x=N(h)/N(m);m*=x,b*=x}else if(N(b)>Bt&&N(b)<N(g)){var x=N(g)/N(b);m*=x,b*=x}else m=ge(-h,m),b=ge(-g,b)}}else m=o||f?-h:0,b=s||l?-g:0;return[m,b]}function ip(t,r,e,n,i,a){if(!Ce(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=Xa(a.absolutePoses,[r,e]),s=or(o),u=s.left,f=s.right,l=s.top,c=s.bottom,d={horizontal:o.map(function(A){return A[1]}),vertical:o.map(function(A){return A[0]})},v=Ga(t.props.snapDirections),p=Na(v,{left:u,right:f,top:l,bottom:c,center:(u+f)/2,middle:(l+c)/2}),h=ei(t,i,p,d),g=h.vertical,m=h.horizontal,b=$d(t,o,a),y=b.vertical,S=b.horizontal,E=g.isSnap,x=m.isSnap,_=g.isBound||y.isBound,C=m.isBound||S.isBound,D=ge(g.offset,y.offset),M=ge(m.offset,S.offset),I=O(np(n,[r,e],[_,C],[E,x],[D,M]),2),T=I[0],R=I[1];return[{isBound:_,isSnap:E,offset:T},{isBound:C,isSnap:x,offset:R}]}function ei(t,r,e,n){n===void 0&&(n=e);var i=Fa(ti(t),n.vertical,n.horizontal),a=i.horizontal,o=i.vertical,s=r?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:ri(t,e.vertical,e.horizontal),u=s.horizontal,f=s.vertical,l=Nn(a[0],u),c=Nn(o[0],f),d=N(l),v=N(c);return{horizontal:{isBound:a[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:l,dist:d,bounds:a,snap:u},vertical:{isBound:o[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:c,dist:v,bounds:o,snap:f}}}function Lo(t,r,e,n,i){var a=Fa(r,e,n),o=a.horizontal,s=a.vertical,u=Bu(t,e,n,[],[],i),f=u.horizontal,l=u.vertical,c=Nn(o[0],f),d=Nn(s[0],l),v=N(c),p=N(d);return{horizontal:{isBound:o[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:c,dist:v,bounds:o,snap:f},vertical:{isBound:s[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:d,dist:p,bounds:s,snap:l}}}function ap(t,r,e,n){var i=Tt(t,r)/Math.PI*180,a=e.vertical,o=a.isBound,s=a.isSnap,u=a.dist,f=e.horizontal,l=f.isBound,c=f.isSnap,d=f.dist,v=i%180,p=v<3||v>177,h=v>87&&v<93;return d<u&&(o||s&&!h&&(!n||!p))?"vertical":l||c&&!p&&(!n||!h)?"horizontal":""}function op(t,r,e,n,i,a){return e.map(function(o){var s=O(o,2),u=s[0],f=s[1],l=Nt(r,u),c=Nt(r,f),d=n?sp(t,l,c,i):ei(t,i,{vertical:[c[0]],horizontal:[c[1]]}),v=d.horizontal,p=v.offset,h=v.isBound,g=v.isSnap,m=d.vertical,b=m.offset,y=m.isBound,S=m.isSnap,E=nt(f,u);if(!b&&!p)return{isBound:y||h,isSnap:S||g,sign:E,offset:[0,0]};var x=ap(l,c,d,n);if(!x)return{sign:E,isBound:!1,isSnap:!1,offset:[0,0]};var _=x==="vertical",C=[0,0];return!n&&N(f[0])===1&&N(f[1])===1&&u[0]!==f[0]&&u[1]!==f[1]?C=xr({datas:a,distX:-b,distY:-p}):C=na(l,c,-(_?b:p),_,a).offset,C=C.map(function(D,M){return D*(E[M]?2/E[M]:0)}),{sign:E,isBound:_?y:h,isSnap:_?S:g,offset:C}})}function Ho(t,r){return t.isBound?t.offset:r.isSnap?r.offset:0}function sp(t,r,e,n){var i=Gd(t,r,e),a=i.horizontal,o=i.vertical,s=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:Vd(t,r,e),u=s.horizontal,f=s.vertical,l=Ho(a,u),c=Ho(o,f),d=N(l),v=N(c);return{horizontal:{isBound:a.isBound,isSnap:u.isSnap,offset:l,dist:d},vertical:{isBound:o.isBound,isSnap:f.isSnap,offset:c,dist:v}}}function up(t,r,e,n,i){var a=[-e[0],-e[1]],o=t.state,s=o.width,u=o.height,f=t.props.bounds,l=1/0,c=1/0;if(f){var d=[[e[0],-e[1]],[-e[0],e[1]]],v=f.left,p=v===void 0?-1/0:v,h=f.top,g=h===void 0?-1/0:h,m=f.right,b=m===void 0?1/0:m,y=f.bottom,S=y===void 0?1/0:y;d.forEach(function(E){var x=E[0]!==a[0],_=E[1]!==a[1],C=Nt(r,E),D=Tt(n,C)*360/Math.PI;if(_){var M=C.slice();(N(D-360)<2||N(D-180)<2)&&(M[1]=n[1]);var I=na(n,M,(n[1]<C[1]?S:g)-C[1],!1,i),T=O(I.offset,2),R=T[1],A=I.isOutside;isNaN(R)||(c=u+(A?1:-1)*N(R))}if(x){var M=C.slice();(N(D-90)<2||N(D-270)<2)&&(M[0]=n[0]);var P=na(n,M,(n[0]<C[0]?b:p)-C[0],!0,i),L=O(P.offset,1),k=L[0],B=P.isOutside;isNaN(k)||(l=s+(B?1:-1)*N(k))}})}return{maxWidth:l,maxHeight:c}}var Vt={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,r){var e=t.props,n=e.hideThrottleDragRotateLine,i=e.throttleDragRotate,a=e.zoom,o=t.getState(),s=o.dragInfo,u=o.beforeOrigin;if(n||!i||!s)return[];var f=s.dist;if(!f[0]&&!f[1])return[];var l=ur(f),c=Tt(f,[0,0]);return[r.createElement("div",{className:et("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(l,"px"),transform:"translate(".concat(u[0],"px, ").concat(u[1],"px) rotate(").concat(c,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,r){var e=r.datas,n=r.parentEvent,i=r.parentGesto,a=t.state,o=a.gestos,s=a.style;if(o.draggable)return!1;o.draggable=i||t.targetGesto,e.datas={},e.left=parseFloat(s.left||"")||0,e.top=parseFloat(s.top||"")||0,e.bottom=parseFloat(s.bottom||"")||0,e.right=parseFloat(s.right||"")||0,e.startValue=[0,0],Jr(t,r),Qn(t,r,"translate"),wp(t,e),e.prevDist=[0,0],e.prevBeforeDist=[0,0],e.isDrag=!1,e.deltaOffset=[0,0];var u=ct(t,r,w({set:function(l){e.startValue=l}},Zn(t,r))),f=n||J(t,"onDragStart",u);return f!==!1?(e.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.draggable=null,e.isPinch=!1),e.isDrag?u:!1},drag:function(t,r){if(r){$n(t,r,"translate");var e=r.datas,n=r.parentEvent,i=r.parentFlag,a=r.isPinch,o=r.deltaOffset,s=r.useSnap,u=r.isRequest,f=r.distX,l=r.distY,c=e.isDrag,d=e.prevDist,v=e.prevBeforeDist,p=e.startValue;if(c){o&&(f+=o[0],l+=o[1]);var h=t.props,g=h.parentMoveable,m=n?0:h.throttleDrag||0,b=n?0:h.throttleDragRotate||0,y=0,S=!1,E=!1,x=!1,_=!1;if(!n&&b>0&&(f||l)){var C=h.startDragRotate||0,D=ft(C+Tt([0,0],[f,l])*180/Math.PI,b)-C,M=l*Math.abs(Math.cos((D-90)/180*Math.PI)),I=f*Math.abs(Math.cos(D/180*Math.PI)),T=ur([I,M]);y=D*Math.PI/180,f=T*Math.cos(y),l=T*Math.sin(y)}if(!a&&!n&&!i){var R=O(ip(t,f,l,b,!s&&u||o,e),2),A=R[0],P=R[1];S=A.isSnap,E=A.isBound,x=P.isSnap,_=P.isBound;var L=A.offset,k=P.offset;f+=L,l+=k}var B=yt(Eu({datas:e,distX:f,distY:l}),p),H=yt(yd({datas:e,distX:f,distY:l}),p);xo(H,Ut),xo(B,Ut),b||(!S&&!E&&(H[0]=ft(H[0],m),B[0]=ft(B[0],m)),!x&&!_&&(H[1]=ft(H[1],m),B[1]=ft(B[1],m)));var Y=nt(B,p),G=nt(H,p),K=nt(G,d),$=nt(Y,v);e.prevDist=G,e.prevBeforeDist=Y,e.passDelta=K,e.passDist=G;var W=e.left+Y[0],j=e.top+Y[1],X=e.right-Y[0],z=e.bottom-Y[1],U=Jn(e,"translate(".concat(H[0],"px, ").concat(H[1],"px)"),"translate(".concat(G[0],"px, ").concat(G[1],"px)"));if(za(r,U),t.state.dragInfo.dist=n?[0,0]:G,!(!n&&!g&&K.every(function(ht){return!ht})&&$.some(function(ht){return!ht}))){var it=t.state,rt=it.width,Q=it.height,Z=ct(t,r,w({transform:U,dist:G,delta:K,translate:H,beforeDist:Y,beforeDelta:$,beforeTranslate:B,left:W,top:j,right:X,bottom:z,width:rt,height:Q,isPinch:a},jt({transform:U},r)));return!n&&J(t,"onDrag",Z),Z}}}},dragAfter:function(t,r){var e=r.datas,n=e.deltaOffset;return n[0]||n[1]?(e.deltaOffset=[0,0],this.drag(t,w(w({},r),{deltaOffset:n}))):!1},dragEnd:function(t,r){var e=r.parentEvent,n=r.datas;if(t.state.dragInfo=null,!!n.isDrag){n.isDrag=!1;var i=nr(t,r,{});return!e&&J(t,"onDragEnd",i),i}},dragGroupStart:function(t,r){var e=r.datas,n=r.clientX,i=r.clientY,a=this.dragStart(t,r);if(!a)return!1;var o=Ei(t,this,"dragStart",[n||0,i||0],r,!1,"draggable"),s=w(w({},a),{targets:t.props.targets,events:o}),u=J(t,"onDragGroupStart",s);return e.isDrag=u!==!1,e.isDrag?a:!1},dragGroup:function(t,r){var e=r.datas;if(e.isDrag){var n=this.drag(t,r),i=r.datas.passDelta,a=Ei(t,this,"drag",i,r,!1,"draggable");if(n){var o=w({targets:t.props.targets,events:a},n);return J(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isDrag){this.dragEnd(t,r);var i=Ei(t,this,"dragEnd",[0,0],r,!1,"draggable");return J(t,"onDragGroupEnd",nr(t,r,{targets:t.props.targets,events:i})),e}},request:function(t){var r={},e=t.getRect(),n=0,i=0,a=!1;return{isControl:!1,requestStart:function(o){return a=o.useSnap,{datas:r,useSnap:a}},request:function(o){return"x"in o?n=o.x-e.left:"deltaX"in o&&(n+=o.deltaX),"y"in o?i=o.y-e.top:"deltaY"in o&&(i+=o.deltaY),{datas:r,distX:n,distY:i,useSnap:a}},requestEnd:function(){return{datas:r,isDrag:!0,useSnap:a}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function Nu(t,r){var e=Nt(t,r),n=[0,0];return{fixedPosition:e,fixedDirection:r,fixedOffset:n}}function fp(t,r){var e=t.allMatrix,n=t.is3d,i=t.width,a=t.height,o=n?4:3,s=[i/2*(1+r[0]),a/2*(1+r[1])],u=Rt(e,s,o),f=[0,0];return{fixedPosition:u,fixedDirection:r,fixedOffset:f}}function Lu(t,r){var e=t.allMatrix,n=t.is3d,i=t.width,a=t.height,o=n?4:3,s=Od(r,i,a),u=Rt(e,r,o),f=[i?0:r[0],a?0:r[1]];return{fixedPosition:u,fixedDirection:s,fixedOffset:f}}var Wo=ja("resizable"),ia={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:Pu("resizable"),dragControlCondition:Wo,viewClassName:Va("resizable"),dragControlStart:function(t,r){var e,n=r.inputEvent,i=r.isPinch,a=r.isGroup,o=r.parentDirection,s=r.parentGesto,u=r.datas,f=r.parentFixedDirection,l=r.parentEvent,c=rf(o,i,n,u),d=t.state,v=d.target,p=d.width,h=d.height,g=d.gestos;if(!c||!v||g.resizable)return!1;g.resizable=s||t.controlGesto,!i&&Jr(t,r),u.datas={},u.direction=c,u.startOffsetWidth=p,u.startOffsetHeight=h,u.prevWidth=0,u.prevHeight=0,u.minSize=[0,0],u.startWidth=d.inlineCSSWidth||d.cssWidth,u.startHeight=d.inlineCSSHeight||d.cssHeight,u.maxSize=[1/0,1/0],a||(u.minSize=[d.minOffsetWidth,d.minOffsetHeight],u.maxSize=[d.maxOffsetWidth,d.maxOffsetHeight]);var m=t.props.transformOrigin||"% %";u.transformOrigin=m&&Qt(m)?m.split(" "):m,u.startOffsetMatrix=d.offsetMatrix,u.startTransformOrigin=d.transformOrigin,u.isWidth=(e=r==null?void 0:r.parentIsWidth)!==null&&e!==void 0?e:!c[0]&&!c[1]||c[0]||!c[1];function b(D){u.ratio=D&&isFinite(D)?D:0}u.startPositions=fr(t.state);function y(D){var M=Nu(u.startPositions,D);u.fixedDirection=M.fixedDirection,u.fixedPosition=M.fixedPosition,u.fixedOffset=M.fixedOffset}function S(D){var M=Lu(t.state,D);u.fixedDirection=M.fixedDirection,u.fixedPosition=M.fixedPosition,u.fixedOffset=M.fixedOffset}function E(D){u.minSize=[_t("".concat(D[0]),0)||0,_t("".concat(D[1]),0)||0]}function x(D){var M=[D[0]||1/0,D[1]||1/0];(!de(M[0])||isFinite(M[0]))&&(M[0]=_t("".concat(M[0]),0)||1/0),(!de(M[1])||isFinite(M[1]))&&(M[1]=_t("".concat(M[1]),0)||1/0),u.maxSize=M}b(p/h),y(f||[-c[0],-c[1]]),u.setFixedDirection=y,u.setFixedPosition=S,u.setMin=E,u.setMax=x;var _=ct(t,r,{direction:c,startRatio:u.ratio,set:function(D){var M=O(D,2),I=M[0],T=M[1];u.startWidth=I,u.startHeight=T},setMin:E,setMax:x,setRatio:b,setFixedDirection:y,setFixedPosition:S,setOrigin:function(D){u.transformOrigin=D},dragStart:Vt.dragStart(t,new ve().dragStart([0,0],r))}),C=l||J(t,"onResizeStart",_);return u.startFixedDirection=u.fixedDirection,u.startFixedPosition=u.fixedPosition,C!==!1&&(u.isResize=!0,t.state.snapRenderInfo={request:r.isRequest,direction:c}),u.isResize?_:!1},dragControl:function(t,r){var e,n=r.datas,i=r.parentFlag,a=r.isPinch,o=r.parentKeepRatio,s=r.dragClient,u=r.parentDist,f=r.useSnap,l=r.isRequest,c=r.isGroup,d=r.parentEvent,v=r.resolveMatrix,p=n.isResize,h=n.transformOrigin,g=n.startWidth,m=n.startHeight,b=n.prevWidth,y=n.prevHeight,S=n.minSize,E=n.maxSize,x=n.ratio,_=n.startOffsetWidth,C=n.startOffsetHeight,D=n.isWidth;if(!p)return;if(v){var M=t.state.is3d,I=n.startOffsetMatrix,T=n.startTransformOrigin,R=M?4:3,A=Xe(kn(r)),P=Math.sqrt(A.length);R!==P&&(A=gr(A,P,R));var L=un(I,A,T,R),k=Zr(L,_,C,R);n.startPositions=k,n.nextTargetMatrix=A,n.nextAllMatrix=L}var B=$r(t.props,"resizable"),H=B.resizeFormat,Y=B.throttleResize,G=Y===void 0?i?0:1:Y,K=B.parentMoveable,$=B.keepRatioFinally,W=n.direction,j=W,X=0,z=0;!W[0]&&!W[1]&&(j=[1,1]);var U=x&&(o??B.keepRatio)||!1;function it(){var vt=n.fixedDirection,gt=ff(j,U,n,r);X=gt.distWidth,z=gt.distHeight;var Ct=j[0]-vt[0]||U?Math.max(_+X,Ut):_,Dt=j[1]-vt[1]||U?Math.max(C+z,Ut):C;return U&&_&&C&&(D?Dt=Ct/x:Ct=Dt*x),[Ct,Dt]}var rt=O(it(),2),Q=rt[0],Z=rt[1];d||(n.setFixedDirection(n.fixedDirection),J(t,"onBeforeResize",ct(t,r,{startFixedDirection:n.startFixedDirection,startFixedPosition:n.startFixedPosition,setFixedDirection:function(vt){var gt;return n.setFixedDirection(vt),gt=O(it(),2),Q=gt[0],Z=gt[1],[Q,Z]},setFixedPosition:function(vt){var gt;return n.setFixedPosition(vt),gt=O(it(),2),Q=gt[0],Z=gt[1],[Q,Z]},boundingWidth:Q,boundingHeight:Z,setSize:function(vt){var gt;gt=O(vt,2),Q=gt[0],Z=gt[1]}},!0)));var ht=s;s||(!i&&a?ht=Pd(t,[0,0]):ht=n.fixedPosition);var ot=[0,0];a||(ot=Cp(t,Q,Z,W,ht,!f&&l,n)),u&&(!u[0]&&(ot[0]=0),!u[1]&&(ot[1]=0));function st(){var vt;H&&(vt=O(H([Q,Z]),2),Q=vt[0],Z=vt[1]),Q=ft(Q,G),Z=ft(Z,G)}if(U){j[0]&&j[1]&&ot[0]&&ot[1]&&(N(ot[0])>N(ot[1])?ot[1]=0:ot[0]=0);var ut=!ot[0]&&!ot[1];ut&&st(),j[0]&&!j[1]||ot[0]&&!ot[1]||ut&&D?(Q+=ot[0],Z=Q/x):(!j[0]&&j[1]||!ot[0]&&ot[1]||ut&&!D)&&(Z+=ot[1],Q=Z*x)}else Q+=ot[0],Z+=ot[1],Q=Math.max(0,Q),Z=Math.max(0,Z);e=O(Fs([Q,Z],S,E,U?x:!1),2),Q=e[0],Z=e[1],st(),U&&(c||$)&&(D?Z=Q/x:Q=Z*x),X=Q-_,z=Z-C;var St=[X-b,z-y];n.prevWidth=X,n.prevHeight=z;var xt=Td(t,Q,Z,ht,h,n);if(!(!K&&St.every(function(vt){return!vt})&&xt.every(function(vt){return!vt}))){var dt=Vt.drag(t,sn(r,t.state,xt,!!a,!1,"draggable")),mt=dt.transform,Pt=g+X,Lt=m+z,pt=ct(t,r,w({width:Pt,height:Lt,offsetWidth:Math.round(Q),offsetHeight:Math.round(Z),startRatio:x,boundingWidth:Q,boundingHeight:Z,direction:W,dist:[X,z],delta:St,isPinch:!!a,drag:dt},nf({style:{width:"".concat(Pt,"px"),height:"".concat(Lt,"px")},transform:mt},dt,r)));return!d&&J(t,"onResize",pt),pt}},dragControlAfter:function(t,r){var e=r.datas,n=e.isResize,i=e.startOffsetWidth,a=e.startOffsetHeight,o=e.prevWidth,s=e.prevHeight;if(!(!n||t.props.checkResizableError===!1)){var u=t.state,f=u.width,l=u.height,c=f-(i+o),d=l-(a+s),v=N(c)>3,p=N(d)>3;if(v&&(e.startWidth+=c,e.startOffsetWidth+=c,e.prevWidth+=c),p&&(e.startHeight+=d,e.startOffsetHeight+=d,e.prevHeight+=d),v||p)return this.dragControl(t,r)}},dragControlEnd:function(t,r){var e=r.datas,n=r.parentEvent;if(e.isResize){e.isResize=!1;var i=nr(t,r,{});return!n&&J(t,"onResizeEnd",i),i}},dragGroupControlCondition:Wo,dragGroupControlStart:function(t,r){var e=r.datas,n=this.dragControlStart(t,w(w({},r),{isGroup:!0}));if(!n)return!1;var i=vr(t,"resizable",r),a=e.startOffsetWidth,o=e.startOffsetHeight;function s(){var v=e.minSize;i.forEach(function(p){var h=p.datas,g=h.minSize,m=h.startOffsetWidth,b=h.startOffsetHeight,y=a*(m?g[0]/m:0),S=o*(b?g[1]/b:0);v[0]=Math.max(v[0],y),v[1]=Math.max(v[1],S)})}function u(){var v=e.maxSize;i.forEach(function(p){var h=p.datas,g=h.maxSize,m=h.startOffsetWidth,b=h.startOffsetHeight,y=a*(m?g[0]/m:0),S=o*(b?g[1]/b:0);v[0]=Math.min(v[0],y),v[1]=Math.min(v[1],S)})}var f=Cr(t,this,"dragControlStart",r,function(v,p){return Fn(t,v,e,p)});s(),u();var l=function(v){n.setFixedDirection(v),f.forEach(function(p,h){p.setFixedDirection(v),Fn(t,p.moveable,e,i[h])})};e.setFixedDirection=l;var c=w(w({},n),{targets:t.props.targets,events:f.map(function(v){return w(w({},v),{setMin:function(p){v.setMin(p),s()},setMax:function(p){v.setMax(p),u()}})}),setFixedDirection:l,setMin:function(v){n.setMin(v),s()},setMax:function(v){n.setMax(v),u()}}),d=J(t,"onResizeGroupStart",c);return e.isResize=d!==!1,e.isResize?n:!1},dragGroupControl:function(t,r){var e=r.datas;if(e.isResize){var n=$r(t.props,"resizable");ii(t,"onBeforeResize",function(v){J(t,"onBeforeResizeGroup",ct(t,r,w(w({},v),{targets:n.targets}),!0))});var i=this.dragControl(t,w(w({},r),{isGroup:!0}));if(i){var a=i.boundingWidth,o=i.boundingHeight,s=i.dist,u=n.keepRatio,f=[a/(a-s[0]),o/(o-s[1])],l=e.fixedPosition,c=Cr(t,this,"dragControl",r,function(v,p){var h=O(Wt(nn(t.rotation/180*Math.PI,3),[p.datas.originalX*f[0],p.datas.originalY*f[1],1],3),2),g=h[0],m=h[1];return w(w({},p),{parentDist:null,parentScale:f,dragClient:yt(l,[g,m]),parentKeepRatio:u})}),d=w({targets:n.targets,events:c},i);return J(t,"onResizeGroup",d),d}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isResize){this.dragControlEnd(t,r);var i=Cr(t,this,"dragControlEnd",r),a=nr(t,r,{targets:t.props.targets,events:i});return J(t,"onResizeGroupEnd",a),e}},request:function(t){var r={},e=0,n=0,i=!1,a=t.getRect();return{isControl:!0,requestStart:function(o){var s;return i=o.useSnap,{datas:r,parentDirection:o.direction||[1,1],parentIsWidth:(s=o==null?void 0:o.horizontal)!==null&&s!==void 0?s:!0,useSnap:i}},request:function(o){return"offsetWidth"in o?e=o.offsetWidth-a.offsetWidth:"deltaWidth"in o&&(e+=o.deltaWidth),"offsetHeight"in o?n=o.offsetHeight-a.offsetHeight:"deltaHeight"in o&&(n+=o.deltaHeight),{datas:r,parentDist:[e,n],parentKeepRatio:o.keepRatio,useSnap:i}},requestEnd:function(){return{datas:r,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function Ci(t,r,e,n,i){var a=t.props.groupable,o=t.state,s=o.is3d?4:3,u=r.origin,f=Rt(t.state.rootMatrix,nt([u[0],u[1]],a?[0,0]:[o.left,o.top]),s),l=yt([i.left,i.top],f);r.startAbsoluteOrigin=l,r.prevDeg=Tt(l,[e,n])/Math.PI*180,r.defaultDeg=r.prevDeg,r.prevSnapDeg=0,r.loop=0,r.startDist=Er(l,[e,n])}function Mn(t,r,e){var n=e.defaultDeg,i=e.prevDeg,a=i%360,o=Math.floor(i/360);a<0&&(a+=360),a>t&&a>270&&t<90?++o:a<t&&a<90&&t>270&&--o;var s=r*(o*360+t-n);return e.prevDeg=n+s,s}function Di(t,r,e,n){return Mn(Tt(n.startAbsoluteOrigin,[t,r])/Math.PI*180,e,n)}function wi(t,r,e,n,i,a){var o=t.props.throttleRotate,s=o===void 0?0:o,u=e.prevSnapDeg,f=0,l=!1;if(a){var c=Ep(t,r,n,i+n);l=c.isSnap,f=i+c.dist}l||(f=ft(i+n,s));var d=f-i;return e.prevSnapDeg=d,[d-u,d,f]}function Hu(t,r,e){var n=O(r,4),i=n[0],a=n[1],o=n[2],s=n[3];if(t==="none")return[];if(zt(t))return t.map(function(g){return Hu(g,[i,a,o,s],e)[0]});var u=O((t||"top").split("-"),2),f=u[0],l=u[1],c=[i,a];f==="left"?c=[o,i]:f==="right"?c=[a,s]:f==="bottom"&&(c=[s,o]);var d=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2],v=Qu(c,e);if(l){var p=l==="top"||l==="left",h=f==="bottom"||f==="left";d=c[p&&!h||!p&&h?0:1]}return[[d,v]]}function aa(t,r){if(r.isRequest)return r.requestAble==="rotatable";var e=r.inputEvent.target;if(Gt(e,et("rotation-control"))||t.props.rotateAroundControls&&Gt(e,et("around-control"))||Gt(e,et("control"))&&Gt(e,et("rotatable")))return!0;var n=t.props.rotationTarget;return n?Ua(n,!0).some(function(i){return i?e===i||e.contains(i):!1}):!1}var lp=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,cp={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[lp],viewClassName:function(t){return t.isDragging("rotatable")?et("view-rotation-dragging"):""},render:function(t,r){var e=$r(t.props,"rotatable"),n=e.rotatable,i=e.rotationPosition,a=e.zoom,o=e.renderDirections,s=e.rotateAroundControls,u=e.resolveAblesWithRotatable,f=t.getState(),l=f.renderPoses,c=f.direction;if(!n)return null;var d=Hu(i,l,c),v=[];if(d.forEach(function(m,b){var y=O(m,2),S=y[0],E=y[1];v.push(r.createElement("div",{key:"rotation".concat(b),className:et("rotation"),style:{transform:"translate(-50%) translate(".concat(S[0],"px, ").concat(S[1],"px) rotate(").concat(E,"rad)")}},r.createElement("div",{className:et("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),r.createElement("div",{className:et("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),o){var p=Or(u||{}),h={};p.forEach(function(m){u[m].forEach(function(b){h[b]=m})});var g=[];zt(o)&&(g=o.map(function(m){var b=h[m];return{data:b?{resolve:b}:{},classNames:b?["move"]:[],dir:m}})),v.push.apply(v,q([],O(Mu(t,"rotatable",g,r)),!1))}return s&&v.push.apply(v,q([],O(Au(t,r)),!1)),v},dragControlCondition:aa,dragControlStart:function(t,r){var e,n,i=r.datas,a=r.clientX,o=r.clientY,s=r.parentRotate,u=r.parentFlag,f=r.isPinch,l=r.isRequest,c=t.state,d=c.target,v=c.left,p=c.top,h=c.direction,g=c.beforeDirection,m=c.targetTransform,b=c.moveableClientRect,y=c.offsetMatrix,S=c.targetMatrix,E=c.allMatrix,x=c.width,_=c.height;if(!l&&!d)return!1;var C=t.getRect();i.rect=C,i.transform=m,i.left=v,i.top=p;var D=function(j){var X=Lu(t.state,j);i.fixedDirection=X.fixedDirection,i.fixedOffset=X.fixedOffset,i.fixedPosition=X.fixedPosition,G&&G.setFixedPosition(j)},M=function(j){var X=fp(t.state,j);i.fixedDirection=X.fixedDirection,i.fixedOffset=X.fixedOffset,i.fixedPosition=X.fixedPosition,G&&G.setFixedDirection(j)},I=a,T=o;if(l||f||u){var R=s||0;i.beforeInfo={origin:C.beforeOrigin,prevDeg:R,defaultDeg:R,prevSnapDeg:0,startDist:0},i.afterInfo=w(w({},i.beforeInfo),{origin:C.origin}),i.absoluteInfo=w(w({},i.beforeInfo),{origin:C.origin,startValue:R})}else{var A=(n=r.inputEvent)===null||n===void 0?void 0:n.target;if(A){var P=A.getAttribute("data-direction")||"",L=md[P];if(L){i.isControl=!0,i.isAroundControl=Gt(A,et("around-control")),i.controlDirection=L;var k=A.getAttribute("data-resolve");k&&(i.resolveAble=k);var B=Np(c.rootMatrix,c.renderPoses,b);e=O(Nt(B,L),2),I=e[0],T=e[1]}}i.beforeInfo={origin:C.beforeOrigin},i.afterInfo={origin:C.origin},i.absoluteInfo={origin:C.origin,startValue:C.rotation};var H=D;D=function(j){var X=c.is3d?4:3,z=O(yt(su(S,X),j),2),U=z[0],it=z[1],rt=Wt(y,jr([U,it],X)),Q=Wt(E,jr([j[0],j[1]],X));H(j);var Z=c.posDelta;i.beforeInfo.origin=nt(rt,Z),i.afterInfo.origin=nt(Q,Z),i.absoluteInfo.origin=nt(Q,Z),Ci(t,i.beforeInfo,I,T,b),Ci(t,i.afterInfo,I,T,b),Ci(t,i.absoluteInfo,I,T,b)},M=function(j){var X=Nt([[0,0],[x,0],[0,_],[x,_]],j);D(X)}}i.startClientX=I,i.startClientY=T,i.direction=h,i.beforeDirection=g,i.startValue=0,i.datas={},Qn(t,r,"rotate");var Y=!1,G=!1;if(i.isControl&&i.resolveAble){var K=i.resolveAble;K==="resizable"&&(G=ia.dragControlStart(t,w(w({},new ve("resizable").dragStart([0,0],r)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}G||(Y=Vt.dragStart(t,new ve().dragStart([0,0],r))),D(Lp(t));var $=ct(t,r,w(w({set:function(j){i.startValue=j*Math.PI/180},setFixedDirection:M,setFixedPosition:D},Zn(t,r)),{dragStart:Y,resizeStart:G})),W=J(t,"onRotateStart",$);return i.isRotate=W!==!1,c.snapRenderInfo={request:r.isRequest},i.isRotate?$:!1},dragControl:function(t,r){var e,n,i,a=r.datas,o=r.clientDistX,s=r.clientDistY,u=r.parentRotate,f=r.parentFlag,l=r.isPinch,c=r.groupDelta,d=r.resolveMatrix,v=a.beforeDirection,p=a.beforeInfo,h=a.afterInfo,g=a.absoluteInfo,m=a.isRotate,b=a.startValue,y=a.rect,S=a.startClientX,E=a.startClientY;if(m){$n(t,r,"rotate");var x=bd(r),_=v*x,C=t.props.parentMoveable,D=0,M,I,T=0,R,A,P=0,L,k,B=180/Math.PI*b,H=g.startValue,Y=!1,G=S+o,K=E+s;if(!f&&"parentDist"in r){var $=r.parentDist;M=$,R=$,L=$}else l||f?(M=Mn(u,v,p),R=Mn(u,_,h),L=Mn(u,_,g)):(M=Di(G,K,v,p),R=Di(G,K,_,h),L=Di(G,K,_,g),Y=!0);if(I=B+M,A=B+R,k=H+L,J(t,"onBeforeRotate",ct(t,r,{beforeRotation:I,rotation:A,absoluteRotation:k,setRotation:function(ht){R=ht-B,M=R,L=R}},!0)),e=O(wi(t,y,p,M,B,Y),3),D=e[0],M=e[1],I=e[2],n=O(wi(t,y,h,R,B,Y),3),T=n[0],R=n[1],A=n[2],i=O(wi(t,y,g,L,H,Y),3),P=i[0],L=i[1],k=i[2],!(!P&&!T&&!D&&!C&&!d)){var W=Jn(a,"rotate(".concat(A,"deg)"),"rotate(".concat(R,"deg)"));d&&(a.fixedPosition=ka(t,a.targetAllTransform,a.fixedDirection,a.fixedOffset,a));var j=Rd(t,R,a),X=nt(yt(c||[0,0],j),a.prevInverseDist||[0,0]);a.prevInverseDist=j,a.requestValue=null;var z=Du(t,W,X,l,r),U=z,it=Er([G,K],g.startAbsoluteOrigin)-g.startDist,rt=void 0;if(a.resolveAble==="resizable"){var Q=ia.dragControl(t,w(w({},sn(r,t.state,[r.deltaX,r.deltaY],!!l,!1,"resizable")),{resolveMatrix:!0,parentDistance:it}));Q&&(rt=Q,U=nf(U,Q,r))}var Z=ct(t,r,w(w({delta:T,dist:R,rotate:A,rotation:A,beforeDist:M,beforeDelta:D,beforeRotate:I,beforeRotation:I,absoluteDist:L,absoluteDelta:P,absoluteRotate:k,absoluteRotation:k,isPinch:!!l,resize:rt},z),U));return J(t,"onRotate",Z),Z}}},dragControlEnd:function(t,r){var e=r.datas;if(e.isRotate){e.isRotate=!1;var n=nr(t,r,{});return J(t,"onRotateEnd",n),n}},dragGroupControlCondition:aa,dragGroupControlStart:function(t,r){var e=r.datas,n=t.state,i=n.left,a=n.top,o=n.beforeOrigin,s=this.dragControlStart(t,r);if(!s)return!1;s.set(e.beforeDirection*t.rotation);var u=Cr(t,this,"dragControlStart",r,function(c,d){var v=c.state,p=v.left,h=v.top,g=v.beforeOrigin,m=yt(nt([p,h],[i,a]),nt(g,o));return d.datas.startGroupClient=m,d.datas.groupClient=m,w(w({},d),{parentRotate:0})}),f=w(w({},s),{targets:t.props.targets,events:u}),l=J(t,"onRotateGroupStart",f);return e.isRotate=l!==!1,e.isRotate?s:!1},dragGroupControl:function(t,r){var e=r.datas;if(e.isRotate){ii(t,"onBeforeRotate",function(f){J(t,"onBeforeRotateGroup",ct(t,r,w(w({},f),{targets:t.props.targets}),!0))});var n=this.dragControl(t,r);if(n){var i=e.beforeDirection,a=n.beforeDist,o=a/180*Math.PI,s=Cr(t,this,"dragControl",r,function(f,l){var c=l.datas.startGroupClient,d=O(l.datas.groupClient,2),v=d[0],p=d[1],h=O(en(c,o*i),2),g=h[0],m=h[1],b=[g-v,m-p];return l.datas.groupClient=[g,m],w(w({},l),{parentRotate:a,groupDelta:b})});t.rotation=i*n.beforeRotation;var u=w({targets:t.props.targets,events:s,set:function(f){t.rotation=f},setGroupRotation:function(f){t.rotation=f}},n);return J(t,"onRotateGroup",u),u}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isRotate){this.dragControlEnd(t,r);var i=Cr(t,this,"dragControlEnd",r),a=nr(t,r,{targets:t.props.targets,events:i});return J(t,"onRotateGroupEnd",a),e}},request:function(t){var r={},e=0,n=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:r}},request:function(i){return"deltaRotate"in i?e+=i.deltaRotate:"rotate"in i&&(e=i.rotate-n),{datas:r,parentDist:e}},requestEnd:function(){return{datas:r,isDrag:!0}}}}};function dp(t,r){var e,n=t.direction,i=t.classNames,a=t.size,o=t.pos,s=t.zoom,u=t.key,f=n==="horizontal",l=f?"Y":"X";return r.createElement("div",{key:u,className:i.join(" "),style:(e={},e[f?"width":"height"]="".concat(a),e.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(l,"(-50%) scale").concat(l,"(").concat(s,")"),e)})}function Wa(t,r){return dp(w(w({},t),{classNames:q([et("line","guideline",t.direction)],O(t.classNames),!1).filter(function(e){return e}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(e){return"".concat(ft(e,.1),"px")})}),r)}function qo(t,r,e,n,i,a,o,s){var u=t.props.zoom;return e.map(function(f,l){var c=f.type,d=f.pos,v=[0,0];return v[o]=n,v[o?0:1]=-i+d,Wa({key:"".concat(r,"TargetGuideline").concat(l),classNames:[et("target","bold",c)],posValue:v,sizeValue:a,zoom:u,direction:r},s)})}function Xo(t,r,e,n,i,a){var o=t.props,s=o.zoom,u=o.isDisplayInnerSnapDigit,f=r==="horizontal"?zr:kr,l=i[f.start],c=i[f.end];return e.filter(function(d){var v=d.hide,p=d.elementRect;if(v)return!1;if(u&&p){var h=p.rect;if(h[f.start]<=l&&c<=h[f.end])return!1}return!0}).map(function(d,v){var p=d.pos,h=d.size,g=d.element,m=d.className,b=[-n[0]+p[0],-n[1]+p[1]];return Wa({key:"".concat(r,"-default-guideline-").concat(v),classNames:g?[et("bold"),m]:[et("normal"),m],direction:r,posValue:b,sizeValue:h,zoom:s},a)})}function Pe(t,r,e,n,i,a,o,s){var u,f=t.props,l=f.snapDigit,c=l===void 0?0:l,d=f.isDisplaySnapDigit,v=d===void 0?!0:d,p=f.snapDistFormat,h=p===void 0?function(E,x){return E}:p,g=f.zoom,m=r==="horizontal"?"X":"Y",b=r==="vertical"?"height":"width",y=Math.abs(i),S=v?parseFloat(y.toFixed(c)):0;return s.createElement("div",{key:"".concat(r,"-").concat(e,"-guideline-").concat(n),className:et("guideline-group",r),style:(u={left:"".concat(a[0],"px"),top:"".concat(a[1],"px")},u[b]="".concat(y,"px"),u)},Wa({direction:r,classNames:[et(e),o],size:"100%",posValue:[0,0],sizeValue:y,zoom:g},s),s.createElement("div",{className:et("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(g,")")}},S>0?h(S,r):""))}function pp(t,r,e,n){var i=t==="vertical"?0:1,a=t==="vertical"?1:0,o=i?zr:kr,s=e[o.start],u=e[o.end];return af(r,function(f){return f.pos[i]}).map(function(f){var l=[],c=[],d=[];return f.forEach(function(v){var p,h,g=v.element,m=v.elementRect.rect;if(m[o.end]<s)l.push(v);else if(u<m[o.start])c.push(v);else if(m[o.start]<=s&&u<=m[o.end]&&n){var b=v.pos,y={element:g,rect:w(w({},m),(p={},p[o.end]=m[o.start],p))},S={element:g,rect:w(w({},m),(h={},h[o.start]=m[o.end],h))},E=[0,0],x=[0,0];E[i]=b[i],E[a]=b[a],x[i]=b[i],x[a]=b[a]+v.size,l.push({type:t,pos:E,size:0,elementRect:y,direction:"",elementDirection:"end"}),c.push({type:t,pos:x,size:0,elementRect:S,direction:"",elementDirection:"start"})}}),l.sort(function(v,p){return p.pos[a]-v.pos[a]}),c.sort(function(v,p){return v.pos[a]-p.pos[a]}),{total:f,start:l,end:c,inner:d}})}function vp(t,r,e,n,i){var a=t.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(s){var u=r.filter(function(g){return g.type===s}),f=s==="vertical"?1:0,l=f?0:1,c=pp(s,u,n,a),d=f?kr:zr,v=f?zr:kr,p=n[d.start],h=n[d.end];c.forEach(function(g){var m=g.total,b=g.start,y=g.end,S=g.inner,E=e[l]+m[0].pos[l]-n[v.start],x=n;b.forEach(function(_){var C=_.elementRect.rect,D=x[d.start]-C[d.end];if(D>0){var M=[0,0];M[f]=e[f]+x[d.start]-p-D,M[l]=E,o.push(Pe(t,s,"dashed",o.length,D,M,_.className,i))}x=C}),x=n,y.forEach(function(_){var C=_.elementRect.rect,D=C[d.start]-x[d.end];if(D>0){var M=[0,0];M[f]=e[f]+x[d.end]-p,M[l]=E,o.push(Pe(t,s,"dashed",o.length,D,M,_.className,i))}x=C}),S.forEach(function(_){var C=_.elementRect.rect,D=p-C[d.start],M=C[d.end]-h,I=[0,0],T=[0,0];I[f]=e[f]-D,I[l]=E,T[f]=e[f]+h-p,T[l]=E,o.push(Pe(t,s,"dashed",o.length,D,I,_.className,i)),o.push(Pe(t,s,"dashed",o.length,M,T,_.className,i))})})}),o}function hp(t,r,e,n,i){var a=[];return["horizontal","vertical"].forEach(function(o){var s=r.filter(function(g){return g.type===o}).slice(0,1),u=o==="vertical"?0:1,f=u?0:1,l=u?kr:zr,c=u?zr:kr,d=n[l.start],v=n[l.end],p=n[c.start],h=n[c.end];s.forEach(function(g){var m=g.gap,b=g.gapRects,y=Math.max.apply(Math,q([p],O(b.map(function(x){var _=x.rect;return _[c.start]})),!1)),S=Math.min.apply(Math,q([h],O(b.map(function(x){var _=x.rect;return _[c.end]})),!1)),E=(y+S)/2;y===S||E===(p+h)/2||b.forEach(function(x){var _=x.rect,C=x.className,D=[e[0],e[1]];if(_[l.end]<d)D[u]+=_[l.end]-d;else if(v<_[l.start])D[u]+=_[l.start]-d-m;else return;D[f]+=E-p,a.push(Pe(t,u?"vertical":"horizontal","gap",a.length,m,D,C,i))})})}),a}function oa(t){var r=t.state,e=r.containerClientRect,n=r.hasFixed,i=e.overflow,a=e.scrollHeight,o=e.scrollWidth,s=e.clientHeight,u=e.clientWidth,f=e.clientLeft,l=e.clientTop,c=t.props,d=c.snapGap,v=d===void 0?!0:d,p=c.verticalGuidelines,h=c.horizontalGuidelines,g=c.snapThreshold,m=g===void 0?5:g,b=c.snapGridWidth,y=b===void 0?0:b,S=c.snapGridHeight,E=S===void 0?0:S,x=c.maxSnapElementGuidelineDistance,_=x===void 0?1/0:x,C=c.isDisplayGridGuidelines,D=or(fr(t.state)),M=D.top,I=D.left,T=D.bottom,R=D.right,A={top:M,left:I,bottom:T,right:R,center:(I+R)/2,middle:(M+T)/2},P=bp(t),L=q([],O(P),!1);v&&L.push.apply(L,q([],O(gp(t,A,m)),!1));var k=w({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(L.push.apply(L,q([],O(mp(y,E,i?o:u,i?a:s,f,l,k,C)),!1)),n){var B=e.left,H=e.top;k.left+=B,k.top+=H,k.right+=B,k.bottom+=H}return L.push.apply(L,q([],O(qu(h||!1,p||!1,i?o:u,i?a:s,f,l,k)),!1)),L=L.filter(function(Y){var G=Y.element,K=Y.elementRect,$=Y.type;if(!G||!K)return!0;var W=K.rect;return Wu(A,W,$,_)}),L}function gp(t,r,e){var n=t.props,i=n.maxSnapElementGuidelineDistance,a=i===void 0?1/0:i,o=n.maxSnapElementGapDistance,s=o===void 0?1/0:o,u=t.state.elementRects,f=[];return[["vertical",zr,kr],["horizontal",kr,zr]].forEach(function(l){var c=O(l,3),d=c[0],v=c[1],p=c[2],h=r[v.start],g=r[v.end],m=r[v.center],b=r[p.start],y=r[p.end];function S(_){var C=_.rect;return C[v.end]<h+e?h-C[v.end]:g-e<C[v.start]?C[v.start]-g:-1}var E=u.filter(function(_){var C=_.rect;return C[p.start]>y||C[p.end]<b?!1:S(_)>0}).sort(function(_,C){return S(_)-S(C)}),x=[];E.forEach(function(_){E.forEach(function(C){if(_!==C){var D=_.rect,M=C.rect,I=D[p.start],T=D[p.end],R=M[p.start],A=M[p.end];I>A||R>T||x.push([_,C])}})}),x.forEach(function(_){var C=O(_,2),D=C[0],M=C[1],I=D.rect,T=M.rect,R=I[v.start],A=I[v.end],P=T[v.start],L=T[v.end],k=0,B=0,H=!1,Y=!1,G=!1;if(A<=h&&g<=P){if(Y=!0,k=(P-A-(g-h))/2,B=A+k+(g-h)/2,N(B-m)>e)return}else if(A<P&&L<h+e){if(H=!0,k=P-A,B=L+k,N(B-h)>e)return}else if(A<P&&g-e<R){if(G=!0,k=P-A,B=R-k,N(B-g)>e)return}else return;k&&Wu(r,T,d,a)&&(k>s||f.push({type:d,pos:d==="vertical"?[B,0]:[0,B],element:M.element,size:0,className:M.className,isStart:H,isCenter:Y,isEnd:G,gap:k,hide:!0,gapRects:[D,M],direction:"",elementDirection:""}))})}),f}function mp(t,r,e,n,i,a,o,s){i===void 0&&(i=0),a===void 0&&(a=0);var u=[],f=o.left,l=o.top;if(r)for(var c=0;c<=n;c+=r)u.push({type:"horizontal",pos:[f,ft(c-a+l,.1)],className:et("grid-guideline"),size:e,hide:!s,direction:""});if(t)for(var c=0;c<=e;c+=t)u.push({type:"vertical",pos:[ft(c-i+f,.1),l],className:et("grid-guideline"),size:n,hide:!s,direction:""});return u}function Wu(t,r,e,n){return e==="horizontal"?N(t.right-r.left)<=n||N(t.left-r.right)<=n||t.left<=r.right&&r.left<=t.right:e==="vertical"?N(t.bottom-r.top)<=n||N(t.top-r.bottom)<=n||t.top<=r.bottom&&r.top<=t.bottom:!0}function bp(t){var r=t.state,e=t.props.elementGuidelines,n=e===void 0?[]:e;if(!n.length)return r.elementRects=[],[];var i=(r.elementRects||[]).filter(function(d){return!d.refresh}),a=n.map(function(d){return hr(d)&&"element"in d?w(w({},d),{element:br(d.element,!0)}):{element:br(d,!0)}}).filter(function(d){return d.element}),o=Rc(i.map(function(d){return d.element}),a.map(function(d){return d.element})),s=o.maintained,u=o.added,f=[];s.forEach(function(d){var v=O(d,2),p=v[0],h=v[1];f[h]=i[p]}),yp(t,u.map(function(d){return a[d]})).map(function(d,v){f[u[v]]=d}),r.elementRects=f;var l=Ga(t.props.elementSnapDirections),c=[];return f.forEach(function(d){var v=d.element,p=d.top,h=p===void 0?l.top:p,g=d.left,m=g===void 0?l.left:g,b=d.right,y=b===void 0?l.right:b,S=d.bottom,E=S===void 0?l.bottom:S,x=d.center,_=x===void 0?l.center:x,C=d.middle,D=C===void 0?l.middle:C,M=d.className,I=d.rect,T=Na({top:h,right:y,left:m,bottom:E,center:_,middle:D},I),R=T.horizontal,A=T.vertical,P=T.horizontalNames,L=T.verticalNames,k=I.top,B=I.left,H=I.right-B,Y=I.bottom-k,G=[H,Y];A.forEach(function(K,$){c.push({type:"vertical",element:v,pos:[ft(K,.1),k],size:Y,sizes:G,className:M,elementRect:d,elementDirection:zo[L[$]]||L[$],direction:""})}),R.forEach(function(K,$){c.push({type:"horizontal",element:v,pos:[B,ft(K,.1)],size:H,sizes:G,className:M,elementRect:d,elementDirection:zo[P[$]]||P[$],direction:""})})}),c}function Yo(t,r){return t?t.map(function(e){var n=hr(e)?e:{pos:e},i=n.pos;return de(i)?n:w(w({},n),{pos:_t(i,r)})}):[]}function qu(t,r,e,n,i,a,o){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var s=[],u=o.left,f=o.top,l=o.bottom,c=o.right,d=e+c-u,v=n+l-f;return Yo(t,v).forEach(function(p){s.push({type:"horizontal",pos:[u,ft(p.pos-a+f,.1)],size:d,className:p.className,direction:""})}),Yo(r,d).forEach(function(p){s.push({type:"vertical",pos:[ft(p.pos-i+u,.1),f],size:v,className:p.className,direction:""})}),s}function yp(t,r){if(!r.length)return[];var e=t.props.groupable,n=t.state,i=n.containerClientRect,a=n.rootMatrix,o=n.is3d,s=n.offsetDelta,u=o?4:3,f=O(Xd(a,i,u),2),l=f[0],c=f[1],d=e?0:s[0],v=e?0:s[1];return r.map(function(p){var h=p.element.getBoundingClientRect(),g=h.left-l-d,m=h.top-c-v,b=m+h.height,y=g+h.width,S=O(me(a,[g,m],u),2),E=S[0],x=S[1],_=O(me(a,[y,b],u),2),C=_[0],D=_[1];return w(w({},p),{rect:{left:E,right:C,top:x,bottom:D,center:(E+C)/2,middle:(x+D)/2}})})}function yn(t){var r=t.state,e=r.container,n=t.props.snapContainer||e;if(r.snapContainer===n&&r.guidelines&&r.guidelines.length)return!1;var i=r.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(e!==n){var o=br(n,!0);if(o){var s=Ge(o),u=$o(r,[s.left-i.left,s.top-i.top]),f=$o(r,[s.right-i.right,s.bottom-i.bottom]);a.left=ft(u[0],1e-5),a.top=ft(u[1],1e-5),a.right=ft(f[0],1e-5),a.bottom=ft(f[1],1e-5)}}return r.snapContainer=n,r.snapOffset=a,r.guidelines=oa(t),r.enableSnap=!0,!0}function Xu(t,r,e,n,i,a){var o=Zr(t,r,e,a?4:3),s=Nt(o,n);return Xa(o,nt(i,s))}function Vo(t){return t?t/N(t):0}function xp(t,r,e,n,i,a){var o=a.fixedDirection,s=Ud(e,o,n),u=Ha(t,r,e,n),f=q(q([],O(op(t,r,s,n,i,a)),!1),O(Gu(t,u,a)),!1),l=Gn(f,0),c=Gn(f,1);return{width:{isBound:l.isBound,offset:l.offset[0]},height:{isBound:c.isBound,offset:c.offset[1]}}}function Sp(t,r,e,n,i,a,o,s,u){var f=Nt(r,o),l=ei(t,s,{vertical:[f[0]],horizontal:[f[1]]}),c=l.horizontal.offset,d=l.vertical.offset;if(ft(d,Qi)||ft(c,Qi)){var v=O(xr({datas:u,distX:-d,distY:-c}),2),p=v[0],h=v[1],g=Math.min(i||1/0,e+o[0]*p),m=Math.min(a||1/0,n+o[1]*h);return[g-e,m-n]}return[0,0]}function Yu(t,r,e,n,i,a,o,s){for(var u=fr(t.state),f=t.props.keepRatio,l=0,c=0,d=0;d<2;++d){var v=r(l,c),p=xp(t,v,i,f,o,s),h=p.width,g=p.height,m=h.isBound,b=g.isBound,y=h.offset,S=g.offset;if(d===1&&(m||(y=0),b||(S=0)),d===0&&o&&!m&&!b)return[0,0];if(f){var E=N(y)*(e?1/e:1),x=N(S)*(n?1/n:1),_=m&&b?E<x:b||!m&&E<x;_?y=e*S/n:S=n*y/e}l+=y,c+=S}if(!f&&i[0]&&i[1]){var C=up(t,u,i,a,s),D=C.maxWidth,M=C.maxHeight,I=O(Sp(t,r(l,c).map(function(A){return A.map(function(P){return ft(P,Qi)})}),e+l,n+c,D,M,i,o,s),2),y=I[0],S=I[1];l+=y,c+=S}return[l,c]}function ke(t){return t<0&&(t=t%360+360),t%=360,t}function _p(t,r){r=ke(r);var e=Math.floor(t/360),n=e*360+360-r,i=e*360+r;return N(t-n)<N(t-i)?n:i}function Oi(t,r){t=ke(t),r=ke(r);var e=ke(t-r);return Math.min(e,360-e)}function Ep(t,r,e,n){var i,a=t.props,o=(i=a[Vu])!==null&&i!==void 0?i:5,s=a[ju];if(Ce(t,"rotatable")){var u=r.pos1,f=r.pos2,l=r.pos3,c=r.pos4,d=r.origin,v=e*Math.PI/180,p=[u,f,l,c].map(function(S){return nt(S,d)}),h=p.map(function(S){return en(S,v)}),g=q(q([],O(Ld(t,p,h,d,e)),!1),O(tp(t,p,h,d,e)),!1);g.sort(function(S,E){return N(S-e)-N(E-e)});var m=g.length>0;if(m)return{isSnap:m,dist:m?g[0]:e}}if(s!=null&&s.length&&o){var b=s.slice().sort(function(S,E){return Oi(S,n)-Oi(E,n)}),y=b[0];if(Oi(y,n)<=o)return{isSnap:!0,dist:e+_p(n,y)-n}}return{isSnap:!1,dist:e}}function Cp(t,r,e,n,i,a,o){if(!Ce(t,"resizable"))return[0,0];var s=o.fixedDirection,u=o.nextAllMatrix,f=t.state,l=f.allMatrix,c=f.is3d;return Yu(t,function(d,v){return Xu(u||l,r+d,e+v,s,i,c)},r,e,n,i,a,o)}function Dp(t,r,e,n,i){if(!Ce(t,"scalable"))return[0,0];var a=i.startOffsetWidth,o=i.startOffsetHeight,s=i.fixedPosition,u=i.fixedDirection,f=i.is3d,l=Yu(t,function(c,d){return Xu(Dd(i,yt(r,[c/a,d/o])),a,o,u,s,f)},a,o,e,s,n,i);return[l[0]/a,l[1]/o]}function wp(t,r){r.absolutePoses=fr(t.state)}function jo(t){var r=[];return t.forEach(function(e){e.guidelineInfos.forEach(function(n){var i=n.guideline;tr(r,function(a){return a.guideline===i})||(i.direction="",r.push({guideline:i,posInfo:e}))})}),r.map(function(e){var n=e.guideline,i=e.posInfo;return w(w({},n),{direction:i.direction})})}function Uo(t,r,e,n,i,a){var o=Fa(ti(t,a),r,e),s=o.vertical,u=o.horizontal,f=ae();s.forEach(function(p){p.isBound&&(p.direction==="start"&&(f.left=!0),p.direction==="end"&&(f.right=!0),n.push({type:"bounds",pos:p.pos}))}),u.forEach(function(p){p.isBound&&(p.direction==="start"&&(f.top=!0),p.direction==="end"&&(f.bottom=!0),i.push({type:"bounds",pos:p.pos}))});var l=rp(t),c=l.boundMap,d=l.vertical,v=l.horizontal;return d.forEach(function(p){wr(n,function(h){var g=h.type,m=h.pos;return g==="bounds"&&m===p})>=0||n.push({type:"bounds",pos:p})}),v.forEach(function(p){wr(i,function(h){var g=h.type,m=h.pos;return g==="bounds"&&m===p})>=0||i.push({type:"bounds",pos:p})}),{boundMap:f,innerBoundMap:c}}var Op=ja("",["resizable","scalable"]),Vu="snapRotationThreshold",ju="snapRotationDegrees",Mp={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold",Vu,ju,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,r){var e=t.state,n=e.top,i=e.left,a=e.pos1,o=e.pos2,s=e.pos3,u=e.pos4,f=e.snapRenderInfo,l=t.props.snapRenderThreshold,c=l===void 0?1:l;if(!f||!f.render||!Ce(t,""))return se(t,"boundMap",ae(),function(W){return JSON.stringify(W)}),se(t,"innerBoundMap",ae(),function(W){return JSON.stringify(W)}),[];e.guidelines=oa(t);var d=Math.min(a[0],o[0],s[0],u[0]),v=Math.min(a[1],o[1],s[1],u[1]),p=f.externalPoses||[],h=fr(t.state),g=[],m=[],b=[],y=[],S=[],E=or(h),x=E.width,_=E.height,C=E.top,D=E.left,M=E.bottom,I=E.right,T={left:D,right:I,top:C,bottom:M,center:(D+I)/2,middle:(C+M)/2},R=p.length>0,A=R?or(p):{};if(!f.request){if(f.direction&&S.push(jd(t,h,f.direction,c)),f.snap){var P=or(h);f.center&&(P.middle=(P.top+P.bottom)/2,P.center=(P.left+P.right)/2),S.push(ko(t,P,c))}R&&(f.center&&(A.middle=(A.top+A.bottom)/2,A.center=(A.left+A.right)/2),S.push(ko(t,A,c))),S.forEach(function(W){var j=W.vertical.posInfos,X=W.horizontal.posInfos;g.push.apply(g,q([],O(j.filter(function(z){var U=z.guidelineInfos;return U.some(function(it){var rt=it.guideline;return!rt.hide})}).map(function(z){return{type:"snap",pos:z.pos}})),!1)),m.push.apply(m,q([],O(X.filter(function(z){var U=z.guidelineInfos;return U.some(function(it){var rt=it.guideline;return!rt.hide})}).map(function(z){return{type:"snap",pos:z.pos}})),!1)),b.push.apply(b,q([],O(jo(j)),!1)),y.push.apply(y,q([],O(jo(X)),!1))})}var L=Uo(t,[D,I],[C,M],g,m),k=L.boundMap,B=L.innerBoundMap;R&&Uo(t,[A.left,A.right],[A.top,A.bottom],g,m,f.externalBounds);var H=q(q([],O(b),!1),O(y),!1),Y=H.filter(function(W){return W.element&&!W.gapRects}),G=H.filter(function(W){return W.gapRects}).sort(function(W,j){return W.gap-j.gap});J(t,"onSnap",{guidelines:H.filter(function(W){var j=W.element;return!j}),elements:Y,gaps:G},!0);var K=se(t,"boundMap",k,function(W){return JSON.stringify(W)},ae()),$=se(t,"innerBoundMap",B,function(W){return JSON.stringify(W)},ae());return(k===K||B===$)&&J(t,"onBound",{bounds:k,innerBounds:B},!0),q(q(q(q(q(q([],O(vp(t,Y,[d,v],T,r)),!1),O(hp(t,G,[d,v],T,r)),!1),O(Xo(t,"horizontal",y,[i,n],T,r)),!1),O(Xo(t,"vertical",b,[i,n],T,r)),!1),O(qo(t,"horizontal",m,d,n,x,0,r)),!1),O(qo(t,"vertical",g,v,i,_,1,r)),!1)},dragStart:function(t,r){t.state.snapRenderInfo={request:r.isRequest,snap:!0,center:!0},yn(t)},drag:function(t){var r=t.state;yn(t)||(r.guidelines=oa(t)),r.snapRenderInfo&&(r.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,r){if(Op(t,r)||aa(t,r))return!0;if(!r.isRequest&&r.inputEvent)return Gt(r.inputEvent.target,et("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,yn(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,r){this.dragStart(t,r)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,yn(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var r=t.state;r.enableSnap=!1,r.guidelines=[],r.snapRenderInfo=null,r.elementRects=[]}};function Rp(t,r){return[t[0]*r[0],t[1]*r[1]]}function et(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return El.apply(void 0,q([Aa],O(t),!1))}function Uu(t){t()}function Tp(t){return!t||t==="none"?[1,0,0,1,0,0]:hr(t)?t:Xe(t)}function Fe(t,r,e){return Bn(r,Ur(e,r),t,Ur(e.map(function(n){return-n}),r))}function Pp(t,r,e){if(r==="%"){var n=qa(t.ownerSVGElement);return n[e?"width":"height"]/100}return 1}function Ip(t){var r=Ap(Ya(t,":before"));return r.map(function(e,n){var i=Ze(e),a=i.value,o=i.unit;return a*Pp(t,o,n===0)})}function Ln(t){return t?t.split(" "):["0","0"]}function Ap(t){return Ln(t.transformOrigin)}function Ku(t){var r=er(t),e=r("transform");if(e&&e!=="none")return e;if("transform"in t){var n=t.transform,i=n.baseVal;if(!i)return"";var a=i.length;if(!a)return"";for(var o=[],s=function(f){var l=i[f].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(c){return l[c]}).join(", "),")"))},u=0;u<a;++u)s(u);return o.join(" ")}return""}function Ve(t,r,e,n,i){var a,o,s=_a(t)||Gr(t),u=!1,f,l;if(!t||e)f=t;else{var c=(a=t==null?void 0:t.assignedSlot)===null||a===void 0?void 0:a.parentElement,d=t.parentElement;c?(u=!0,l=d,f=c):f=d}for(var v=!1,p=t===r||f===r,h="relative",g=1,m=parseFloat(i==null?void 0:i("zoom"))||1,b=i==null?void 0:i("position");f&&f!==s;){r===f&&(p=!0);var y=er(f),S=f.tagName.toLowerCase(),E=Ku(f),x=y("willChange"),_=parseFloat(y("zoom"))||1;if(h=y("position"),n&&_!==1){g=_;break}if(!e&&n&&m!==1&&b&&b!=="absolute"||S==="svg"||h!=="static"||E&&E!=="none"||x==="transform")break;var C=(o=t==null?void 0:t.assignedSlot)===null||o===void 0?void 0:o.parentNode,D=f.parentNode;C&&(u=!0,l=D);var M=D;if(M&&M.nodeType===11){f=M.host,v=!0,h=er(f)("position");break}f=M,h="relative"}return{offsetZoom:g,hasSlot:u,parentSlotElement:l,isCustomElement:v,isStatic:h==="static",isEnd:p||!f||f===s,offsetParent:f||s}}function Bp(t,r){var e,n=t.tagName.toLowerCase(),i=t.offsetLeft,a=t.offsetTop,o=er(t),s=Vn(i),u=!s,f,l;return!u&&n!=="svg"?(f=gu?Ip(t):Ln(o("transformOrigin")).map(function(c){return parseFloat(c)}),l=f.slice(),u=!0,e=O(Fp(t,f,t===r&&r.tagName.toLowerCase()==="g"),4),i=e[0],a=e[1],f[0]=e[2],f[1]=e[3]):(f=Ln(o("transformOrigin")).map(function(c){return parseFloat(c)}),l=f.slice()),{tagName:n,isSVG:s,hasOffset:u,offset:[i||0,a||0],origin:f,targetOrigin:l}}function $u(t,r){var e=er(t),n=er(Gr(t)),i=n("position");if(!r&&(!i||i==="static"))return[0,0];var a=parseInt(n("marginLeft"),10),o=parseInt(n("marginTop"),10);return e("position")==="absolute"&&((e("top")!=="auto"||e("bottom")!=="auto")&&(o=0),(e("left")!=="auto"||e("right")!=="auto")&&(a=0)),[a,o]}function sa(t){t.forEach(function(r){var e=r.matrix;e&&(r.matrix=gr(e,3,4))})}function zp(t){for(var r=t.parentElement,e=!1,n=Gr(t);r;){var i=Ya(r).transform;if(i&&i!=="none"){e=!0;break}if(r===n)break;r=r.parentElement}return{fixedContainer:r||n,hasTransform:e}}function ni(t,r){return r===void 0&&(r=t.length>9),"".concat(r?"matrix3d":"matrix","(").concat(uu(t,!r).join(","),")")}function qa(t){var r=t.clientWidth,e=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:r,clientHeight:e};var n=t.viewBox,i=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||r,height:i.height||e,clientWidth:r,clientHeight:e}}function kp(t,r){var e,n=qa(t),i=n.width,a=n.height,o=n.clientWidth,s=n.clientHeight,u=o/i,f=s/a,l=t.preserveAspectRatio.baseVal,c=l.align,d=l.meetOrSlice,v=[0,0],p=[u,f],h=[0,0];if(c!==1){var g=(c-2)%3,m=Math.floor((c-2)/3);v[0]=i*g/2,v[1]=a*m/2;var b=d===2?Math.max(f,u):Math.min(u,f);p[0]=b,p[1]=b,h[0]=(o-i)/2*g,h[1]=(s-a)/2*m}var y=Ra(p,r);return e=O(h,2),y[r*(r-1)]=e[0],y[r*(r-1)+1]=e[1],Fe(y,r,v)}function Fp(t,r,e){if(!t.getBBox||!e&&t.tagName.toLowerCase()==="g")return[0,0,0,0];var n=t.getBBox(),i=qa(t.ownerSVGElement),a=n.x-i.x,o=n.y-i.y;return[a,o,r[0]-a,r[1]-o]}function Rt(t,r,e){return Wt(t,jr(r,e),e)}function Zr(t,r,e,n){return[[0,0],[r,0],[0,e],[r,e]].map(function(i){return Rt(t,i,n)})}function or(t){var r=t.map(function(f){return f[0]}),e=t.map(function(f){return f[1]}),n=Math.min.apply(Math,q([],O(r),!1)),i=Math.min.apply(Math,q([],O(e),!1)),a=Math.max.apply(Math,q([],O(r),!1)),o=Math.max.apply(Math,q([],O(e),!1)),s=a-n,u=o-i;return{left:n,top:i,right:a,bottom:o,width:s,height:u}}function Ko(t,r,e,n){var i=Zr(t,r,e,n);return or(i)}function Gp(t,r,e,n,i){var a,o=t.target,s=t.origin,u=r.matrix,f=Zu(o),l=f.offsetWidth,c=f.offsetHeight,d=e.getBoundingClientRect(),v=[0,0];e===Gr(e)&&(v=$u(o,!0));for(var p=o.getBoundingClientRect(),h=p.left-d.left+e.scrollLeft-(e.clientLeft||0)+v[0],g=p.top-d.top+e.scrollTop-(e.clientTop||0)+v[1],m=p.width,b=p.height,y=Bn(n,i,u),S=Ko(y,l,c,n),E=S.left,x=S.top,_=S.width,C=S.height,D=Rt(y,s,n),M=nt(D,[E,x]),I=[h+M[0]*m/_,g+M[1]*b/C],T=[0,0],R=0;++R<10;){var A=yr(i,n);a=O(nt(Rt(A,I,n),Rt(A,D,n)),2),T[0]=a[0],T[1]=a[1];var P=Bn(n,i,Ur(T,n),u),L=Ko(P,l,c,n),k=L.left,B=L.top,H=k-h,Y=B-g;if(N(H)<2&&N(Y)<2)break;I[0]-=H,I[1]-=Y}return T.map(function(G){return Math.round(G)})}function Np(t,r,e){var n=t.length===16,i=n?4:3,a=r.map(function(u){return Rt(t,u,i)}),o=e.left,s=e.top;return a.map(function(u){return[u[0]+o,u[1]+s]})}function ur(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ju(t,r){return ur([r[0]-t[0],r[1]-t[1]])}function Ie(t,r,e,n){e===void 0&&(e=1),n===void 0&&(n=Tt(t,r));var i=Ju(t,r);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(n,"rad) scaleY(").concat(e,")"),width:"".concat(i,"px")}}function Hn(t,r){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var i=e.length,a=e.reduce(function(s,u){return s+u[0]},0)/i,o=e.reduce(function(s,u){return s+u[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(o,"px) rotate(").concat(t,"rad) scale(").concat(r,")")}}function $r(t,r){var e=t[r];return hr(e)?w(w({},t),e):t}function Zu(t){var r=t&&!Vn(t.offsetWidth),e=0,n=0,i=0,a=0,o=0,s=0,u=0,f=0,l=0,c=0,d=0,v=0,p=1/0,h=1/0,g=1/0,m=1/0,b=0,y=0,S=!1;if(t)if(!r&&t.tagName.toLowerCase()!=="svg"){var E=t.getBBox();S=!0,e=E.width,n=E.height,o=e,s=n,u=e,f=n,i=e,a=n}else{var x=er(t),_=t.style,C=x("boxSizing")==="border-box",D=parseFloat(x("borderLeftWidth"))||0,M=parseFloat(x("borderRightWidth"))||0,I=parseFloat(x("borderTopWidth"))||0,T=parseFloat(x("borderBottomWidth"))||0,R=parseFloat(x("paddingLeft"))||0,A=parseFloat(x("paddingRight"))||0,P=parseFloat(x("paddingTop"))||0,L=parseFloat(x("paddingBottom"))||0,k=R+A,B=P+L,H=D+M,Y=I+T,G=k+H,K=B+Y,$=x("position"),W=0,j=0;if("clientLeft"in t){var X=null;if($==="absolute"){var z=Ve(t,Gr(t));X=z.offsetParent}else X=t.parentElement;if(X){var U=er(X);W=parseFloat(U("width")),j=parseFloat(U("height"))}}l=Math.max(k,_t(x("minWidth"),W)||0),c=Math.max(B,_t(x("minHeight"),j)||0),p=_t(x("maxWidth"),W),h=_t(x("maxHeight"),j),isNaN(p)&&(p=1/0),isNaN(h)&&(h=1/0),b=_t(_.width,0)||0,y=_t(_.height,0)||0,o=parseFloat(x("width"))||0,s=parseFloat(x("height"))||0,u=N(o-b)<1?Ni(l,b||o,p):o,f=N(s-y)<1?Ni(c,y||s,h):s,e=u,n=f,i=u,a=f,C?(g=p,m=h,d=l,v=c,u=e-G,f=n-K):(g=p+G,m=h+K,d=l+G,v=c+K,e=u+G,n=f+K),i=u+k,a=f+B}return{svg:S,offsetWidth:e,offsetHeight:n,clientWidth:i,clientHeight:a,contentWidth:u,contentHeight:f,inlineCSSWidth:b,inlineCSSHeight:y,cssWidth:o,cssHeight:s,minWidth:l,minHeight:c,maxWidth:p,maxHeight:h,minOffsetWidth:d,minOffsetHeight:v,maxOffsetWidth:g,maxOffsetHeight:m}}function Qu(t,r){return Tt(r>0?t[0]:t[1],r>0?t[1]:t[0])}function xn(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function tf(t,r){var e=t===Gr(t)||t===_a(t),n={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return e&&(n.clientHeight=Math.max(r.height,n.clientHeight),n.scrollHeight=Math.max(r.height,n.scrollHeight)),n.overflow=er(t)("overflow")!=="visible",w(w({},r),n)}function Mi(t,r,e,n){var i=t.left,a=t.right,o=t.top,s=t.bottom,u=r.top,f=r.left,l={left:f+i,top:u+o,right:f+a,bottom:u+s,width:a-i,height:s-o};return e&&n?tf(e,l):l}function Ge(t,r){var e=0,n=0,i=0,a=0;if(t){var o=t.getBoundingClientRect();e=o.left,n=o.top,i=o.width,a=o.height}var s={left:e,top:n,width:i,height:a,right:e+i,bottom:n+a};return t&&r?tf(t,s):s}function Lp(t){var r=t.props,e=r.groupable,n=r.svgOrigin,i=t.getState(),a=i.offsetWidth,o=i.offsetHeight,s=i.svg,u=i.transformOrigin;return!e&&s&&n?Ka(n,a,o):u}function rf(t,r,e,n){var i;if(t)i=t;else if(r)i=[0,0];else{var a=e.target;i=ef(a,n)}return i}function ef(t,r){if(t){var e=t.getAttribute("data-rotation")||"",n=t.getAttribute("data-direction");if(r.deg=e,!!n){var i=[0,0];return n.indexOf("w")>-1&&(i[0]=-1),n.indexOf("e")>-1&&(i[0]=1),n.indexOf("n")>-1&&(i[1]=-1),n.indexOf("s")>-1&&(i[1]=1),i}}}function Xa(t,r){return[yt(r,t[0]),yt(r,t[1]),yt(r,t[2]),yt(r,t[3])]}function fr(t){var r=t.left,e=t.top,n=t.pos1,i=t.pos2,a=t.pos3,o=t.pos4;return Xa([n,i,a,o],[r,e])}function ua(t,r){t[r?"controlAbles":"targetAbles"].forEach(function(e){e.unset&&e.unset(t)})}function oe(t,r){var e=r?"controlGesto":"targetGesto",n=t[e];(n==null?void 0:n.isIdle())===!1&&ua(t,r),n==null||n.unset(),t[e]=null}function jt(t,r){if(r){var e=Ee(r);e.nextStyle=w(w({},e.nextStyle),t)}return{style:t,cssText:Or(t).map(function(n){return"".concat(On(n,"-"),": ").concat(t[n],";")}).join("")}}function nf(t,r,e){var n=r.afterTransform||r.transform;return w(w({},jt(w(w(w({},t.style),r.style),{transform:n}),e)),{afterTransform:n,transform:t.transform})}function ct(t,r,e,n){var i=r.datas;i.datas||(i.datas={});var a=w(w({},e),{target:t.state.target,clientX:r.clientX,clientY:r.clientY,inputEvent:r.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:r.isRequest,isRequestChild:r.isRequestChild,isFirstDrag:!!r.isFirstDrag,isTrusted:r.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var o;(o=r.stop)===null||o===void 0||o.call(r)}});return i.isStartEvent?n||(i.lastEvent=a):i.isStartEvent=!0,a}function nr(t,r,e){var n=r.datas,i="isDrag"in e?e.isDrag:r.isDrag;return n.datas||(n.datas={}),w(w({isDrag:i},e),{moveable:t,target:t.state.target,clientX:r.clientX,clientY:r.clientY,inputEvent:r.inputEvent,currentTarget:t,lastEvent:n.lastEvent,isDouble:r.isDouble,datas:n.datas,isFirstDrag:!!r.isFirstDrag})}function ii(t,r,e){t._emitter.on(r,e)}function J(t,r,e,n,i){return t.triggerEvent(r,e,n,i)}function Ya(t,r){return Ar(t).getComputedStyle(t,r)}function Sn(t,r,e){var n={},i={};return t.filter(function(a){var o=a.name;if(n[o]||!r.some(function(s){return a[s]}))return!1;if(!e&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return n[o]=!0,!0})}function fa(t,r){return t===r||t==null&&r==null}function Hp(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var e=t.length-1,n=0;n<e;++n){var i=t[n];if(!Vn(i))return i}return t[e]}function af(t,r){var e=[],n=[];return t.forEach(function(i,a){var o=r(i,a,t),s=n.indexOf(o),u=e[s]||[];s===-1&&(n.push(o),e.push(u)),u.push(i)}),e}function Wp(t,r){var e=[],n={};return t.forEach(function(i,a){var o=r(i,a,t),s=n[o];s||(s=[],n[o]=s,e.push(s)),s.push(i)}),e}function of(t){return t.reduce(function(r,e){return r.concat(e)},[])}function ge(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.sort(function(e,n){return N(n)-N(e)}),t[0]}function me(t,r,e){return Wt(yr(t,e),jr(r,e),e)}function sf(t,r){var e,n=t.is3d,i=t.rootMatrix,a=n?4:3;return e=O(me(i,[r.distX,r.distY],a),2),r.distX=e[0],r.distY=e[1],r}function _n(t,r,e,n){if(!e[0]&&!e[1])return r;var i=Rt(t,[Vo(e[0]),0],n),a=Rt(t,[0,Vo(e[1])],n),o=Rt(t,[e[0]/ur(i),e[1]/ur(a)],n);return yt(r,o)}function cr(t,r,e){return e?"".concat(t/r*100,"%"):"".concat(t,"px")}function Wn(t){return N(t)<=Ut?0:t}function Va(t){return function(r){if(!r.isDragging(t))return"";var e=Id(r,t),n=e.deg;return n?et("view-control-rotation".concat(n)):""}}function ja(t,r){return r===void 0&&(r=[t]),function(e,n){if(n.isRequest)return r.some(function(a){return n.requestAble===a})?n.parentDirection:!1;var i=n.inputEvent.target;return Gt(i,et("direction"))&&(!t||Gt(i,et(t)))}}function qp(t,r,e){var n,i=pe(t,{"x%":function(E){return E/100*r.offsetWidth},"y%":function(E){return E/100*r.offsetHeight}}),a=t.slice(0,e<0?void 0:e),o=t.slice(0,e<0?void 0:e+1),s=t[e]||"",u=e<0?[]:t.slice(e),f=e<0?[]:t.slice(e+1),l=i.slice(0,e<0?void 0:e),c=i.slice(0,e<0?void 0:e+1),d=(n=i[e])!==null&&n!==void 0?n:pe([""])[0],v=e<0?[]:i.slice(e),p=e<0?[]:i.slice(e+1),h=d?[d]:[],g=ee(l),m=ee(c),b=ee(v),y=ee(p),S=Et(g,b,4);return{transforms:t,beforeFunctionMatrix:g,beforeFunctionMatrix2:m,targetFunctionMatrix:ee(h),afterFunctionMatrix:b,afterFunctionMatrix2:y,allFunctionMatrix:S,beforeFunctions:l,beforeFunctions2:c,targetFunction:h[0],afterFunctions:v,afterFunctions2:p,beforeFunctionTexts:a,beforeFunctionTexts2:o,targetFunctionText:s,afterFunctionTexts:u,afterFunctionTexts2:f}}function Xp(t){return!t||!hr(t)||Se(t)?!1:zt(t)||"length"in t}function br(t,r){return t?Se(t)?t:Qt(t)?r?document.querySelector(t):t:ya(t)?t():Hs(t)?t:"current"in t?t.current:t:null}function Ua(t,r){if(!t)return[];var e=Xp(t)?[].slice.call(t):[t];return e.reduce(function(n,i){return Qt(i)&&r?q(q([],O(n),!1),O([].slice.call(document.querySelectorAll(i))),!1):(zt(i)?n.push(Ua(i,r)):n.push(br(i,r)),n)},[])}function Yp(t,r,e){var n=Tt(t,r)/Math.PI*180;return n=e>=0?n:180-n,n=n>=0?n:360+n,n}function $o(t,r){var e=t.rootMatrix,n=t.is3d,i=n?4:3,a=yr(e,i);return n||(a=gr(a,3,4)),a[12]=0,a[13]=0,a[14]=0,Oc(a,r)}function uf(t,r,e,n,i){var a=O(t,2),o=a[0],s=a[1],u=0,f=0;if(i&&o&&s){var l=Tt([0,0],r),c=Tt([0,0],n),d=ur(r),v=Math.cos(l-c)*d;if(!n[0])f=v,u=f*e;else if(!n[1])u=v,f=u/e;else{var p=n[0]*o,h=n[1]*s,g=Math.atan2(p+r[0],h+r[1]),m=Math.atan2(p,h);g<0&&(g+=Math.PI*2),m<0&&(m+=Math.PI*2);var b=0;N(g-m)<Math.PI/2||N(g-m)>Math.PI/2*3||(m+=Math.PI),b=g-m,b>Math.PI*2?b-=Math.PI*2:b>Math.PI?b=2*Math.PI-b:b<-Math.PI&&(b=-2*Math.PI-b);var y=ur([p+r[0],h+r[1]])*Math.cos(b);u=y*Math.sin(m)-p,f=y*Math.cos(m)-h,n[0]<0&&(u*=-1),n[1]<0&&(f*=-1)}}else u=n[0]*r[0],f=n[1]*r[1];return[u,f]}function ff(t,r,e,n){var i,a=e.ratio,o=e.startOffsetWidth,s=e.startOffsetHeight,u=0,f=0,l=n.distX,c=n.distY,d=n.pinchScale,v=n.parentDistance,p=n.parentDist,h=n.parentScale,g=e.fixedDirection,m=[0,1].map(function(_){return N(t[_]-g[_])}),b=[0,1].map(function(_){var C=m[_];return C!==0&&(C=2/C),C});if(p)u=p[0],f=p[1],r&&(u?f||(f=u/a):u=f*a);else if(de(d))u=(d-1)*o,f=(d-1)*s;else if(h)u=(h[0]-1)*o,f=(h[1]-1)*s;else if(v){var y=o*m[0],S=s*m[1],E=ur([y,S]);u=v/E*y*b[0],f=v/E*S*b[1]}else{var x=xr({datas:e,distX:l,distY:c});x=b.map(function(_,C){return x[C]*_}),i=O(uf([o,s],x,a,t,r),2),u=i[0],f=i[1]}return{distWidth:u,distHeight:f}}function la(t,r){if(r){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var e=O(t.split(" "),2),n=e[0],i=e[1],a=la(n||""),o=la(i||""),s=w(w({},a),o),u={x:"50%",y:"50%"};return s.x&&(u.x=s.x),s.y&&(u.y=s.y),s.value&&(s.x&&!s.y&&(u.y=s.value),!s.x&&s.y&&(u.x=s.value)),u}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function Ka(t,r,e){var n=la(t,!0),i=n.x,a=n.y;return[_t(i,r)||0,_t(a,e)||0]}function Vp(t,r,e){var n=t.map(function(a){return nt(a,r)}),i=n.map(function(a){return en(a,e)});return{prev:n,next:i,result:i.map(function(a){return yt(a,r)})}}function lf(t,r){return t.length===r.length&&t.every(function(e,n){var i=r[n],a=zt(e),o=zt(i);return a&&o?lf(e,i):!a&&!o?e===i:!1})}function se(t,r,e,n,i){var a=t._store,o=a[r];if(!(r in a))if(i!=null)a[r]=i,o=i;else return a[r]=e,e;return o===e||n(o)===n(e)?o:(a[r]=e,e)}function ar(t){return t>=0?1:-1}function N(t){return Math.abs(t)}function Ri(t,r){return Nl(t).map(function(e){return r(e)})}function cf(t){return de(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var jp=on("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,r){var e=r.datas,n=r.targets,i=r.angle,a=r.originalDatas,o=t.props,s=o.pinchable,u=o.ables;if(!s)return!1;var f="onPinch".concat(n?"Group":"","Start"),l="drag".concat(n?"Group":"","ControlStart"),c=(s===!0?t.controlAbles:u.filter(function(h){return s.indexOf(h.name)>-1})).filter(function(h){return h.canPinch&&h[l]}),d=ct(t,r,{});n&&(d.targets=n);var v=J(t,f,d);e.isPinch=v!==!1,e.ables=c;var p=e.isPinch;return p?(c.forEach(function(h){if(a[h.name]=a[h.name]||{},!!h[l]){var g=w(w({},r),{datas:a[h.name],parentRotate:i,isPinch:!0});h[l](t,g)}}),t.state.snapRenderInfo={request:r.isRequest,direction:[0,0]},p):!1},pinch:function(t,r){var e=r.datas,n=r.scale,i=r.distance,a=r.originalDatas,o=r.inputEvent,s=r.targets,u=r.angle;if(e.isPinch){var f=i*(1-1/n),l=ct(t,r,{});s&&(l.targets=s);var c="onPinch".concat(s?"Group":"");J(t,c,l);var d=e.ables,v="drag".concat(s?"Group":"","Control");return d.forEach(function(p){p[v]&&p[v](t,w(w({},r),{datas:a[p.name],inputEvent:o,resolveMatrix:!0,pinchScale:n,parentDistance:f,parentRotate:u,isPinch:!0}))}),l}},pinchEnd:function(t,r){var e=r.datas,n=r.isPinch,i=r.inputEvent,a=r.targets,o=r.originalDatas;if(e.isPinch){var s="onPinch".concat(a?"Group":"","End"),u=nr(t,r,{isDrag:n});a&&(u.targets=a),J(t,s,u);var f=e.ables,l="drag".concat(a?"Group":"","ControlEnd");return f.forEach(function(c){c[l]&&c[l](t,w(w({},r),{isDrag:n,datas:o[c.name],inputEvent:i,isPinch:!0}))}),n}},pinchGroupStart:function(t,r){return this.pinchStart(t,w(w({},r),{targets:t.props.targets}))},pinchGroup:function(t,r){return this.pinch(t,w(w({},r),{targets:t.props.targets}))},pinchGroupEnd:function(t,r){return this.pinchEnd(t,w(w({},r),{targets:t.props.targets}))}}),Jo=ja("scalable"),Up={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:Pu("scalable"),dragControlCondition:Jo,viewClassName:Va("scalable"),dragControlStart:function(t,r){var e=r.datas,n=r.isPinch,i=r.inputEvent,a=r.parentDirection,o=rf(a,n,i,e),s=t.state,u=s.width,f=s.height,l=s.targetTransform,c=s.target,d=s.pos1,v=s.pos2,p=s.pos4;if(!o||!c)return!1;n||Jr(t,r),e.datas={},e.transform=l,e.prevDist=[1,1],e.direction=o,e.startOffsetWidth=u,e.startOffsetHeight=f,e.startValue=[1,1];var h=!o[0]&&!o[1]||o[0]||!o[1];Qn(t,r,"scale"),e.isWidth=h;function g(x){e.ratio=x&&isFinite(x)?x:0}e.startPositions=fr(t.state);function m(x){var _=Nu(e.startPositions,x);e.fixedDirection=_.fixedDirection,e.fixedPosition=_.fixedPosition,e.fixedOffset=_.fixedOffset}e.setFixedDirection=m,g(Er(d,v)/Er(v,p)),m([-o[0],-o[1]]);var b=function(x){e.minScaleSize=x},y=function(x){e.maxScaleSize=x};b([-1/0,-1/0]),y([1/0,1/0]);var S=ct(t,r,w(w({direction:o,set:function(x){e.startValue=x},setRatio:g,setFixedDirection:m,setMinScaleSize:b,setMaxScaleSize:y},Zn(t,r)),{dragStart:Vt.dragStart(t,new ve().dragStart([0,0],r))})),E=J(t,"onScaleStart",S);return e.startFixedDirection=e.fixedDirection,E!==!1&&(e.isScale=!0,t.state.snapRenderInfo={request:r.isRequest,direction:o}),e.isScale?S:!1},dragControl:function(t,r){$n(t,r,"scale");var e=r.datas,n=r.parentKeepRatio,i=r.parentFlag,a=r.isPinch,o=r.dragClient,s=r.isRequest,u=r.useSnap,f=r.resolveMatrix,l=e.prevDist,c=e.direction,d=e.startOffsetWidth,v=e.startOffsetHeight,p=e.isScale,h=e.startValue,g=e.isWidth,m=e.ratio;if(!p)return!1;var b=t.props,y=b.throttleScale,S=b.parentMoveable,E=c;!c[0]&&!c[1]&&(E=[1,1]);var x=m&&(n??b.keepRatio)||!1,_=t.state,C=[h[0],h[1]];function D(){var rt=ff(E,x,e,r),Q=rt.distWidth,Z=rt.distHeight,ht=d?(d+Q)/d:1,ot=v?(v+Z)/v:1;h[0]||(C[0]=Q/d),h[1]||(C[1]=Z/v);var st=(E[0]||x?ht:1)*C[0],ut=(E[1]||x?ot:1)*C[1];return st===0&&(st=ar(l[0])*gn),ut===0&&(ut=ar(l[1])*gn),[st,ut]}var M=D();if(!a&&t.props.groupable){var I=_.snapRenderInfo||{},T=I.direction;zt(T)&&(T[0]||T[1])&&(_.snapRenderInfo={direction:c,request:r.isRequest})}J(t,"onBeforeScale",ct(t,r,{scale:M,setFixedDirection:function(rt){return e.setFixedDirection(rt),M=D(),M},startFixedDirection:e.startFixedDirection,setScale:function(rt){M=rt}},!0));var R=[M[0]/C[0],M[1]/C[1]],A=o,P=[0,0],L=!o&&!i&&a;if(L||f?A=ka(t,e.targetAllTransform,[0,0],[0,0],e):o||(A=e.fixedPosition),a||(P=Dp(t,R,c,!u&&s,e)),x){E[0]&&E[1]&&P[0]&&P[1]&&(Math.abs(P[0]*d)>Math.abs(P[1]*v)?P[1]=0:P[0]=0);var k=!P[0]&&!P[1];if(k&&(g?R[0]=ft(R[0]*C[0],y)/C[0]:R[1]=ft(R[1]*C[1],y)/C[1]),E[0]&&!E[1]||P[0]&&!P[1]||k&&g){R[0]+=P[0];var B=d*R[0]*C[0]/m;R[1]=B/v/C[1]}else if(!E[0]&&E[1]||!P[0]&&P[1]||k&&!g){R[1]+=P[1];var H=v*R[1]*C[1]*m;R[0]=H/d/C[0]}}else R[0]+=P[0],R[1]+=P[1],P[0]||(R[0]=ft(R[0]*C[0],y)/C[0]),P[1]||(R[1]=ft(R[1]*C[1],y)/C[1]);R[0]===0&&(R[0]=ar(l[0])*gn),R[1]===0&&(R[1]=ar(l[1])*gn),M=Rp(R,[C[0],C[1]]);var Y=[d,v],G=[d*M[0],v*M[1]];G=Fs(G,e.minScaleSize,e.maxScaleSize,x?m:!1),M=Ri(2,function(rt){return Y[rt]?G[rt]/Y[rt]:G[rt]}),R=Ri(2,function(rt){return M[rt]/C[rt]});var K=Ri(2,function(rt){return l[rt]?R[rt]/l[rt]:R[rt]}),$="scale(".concat(R.join(", "),")"),W="scale(".concat(M.join(", "),")"),j=Jn(e,W,$),X=!h[0]||!h[1],z=wd(t,X?W:$,e.fixedDirection,A,e.fixedOffset,e,X),U=L?z:nt(z,e.prevInverseDist||[0,0]);if(e.prevDist=R,e.prevInverseDist=z,M[0]===l[0]&&M[1]===l[1]&&U.every(function(rt){return!rt})&&!S&&!L)return!1;var it=ct(t,r,w({offsetWidth:d,offsetHeight:v,direction:c,scale:M,dist:R,delta:K,isPinch:!!a},Du(t,j,U,a,r)));return J(t,"onScale",it),it},dragControlEnd:function(t,r){var e=r.datas;if(!e.isScale)return!1;e.isScale=!1;var n=nr(t,r,{});return J(t,"onScaleEnd",n),n},dragGroupControlCondition:Jo,dragGroupControlStart:function(t,r){var e=r.datas,n=this.dragControlStart(t,r);if(!n)return!1;var i=vr(t,"resizable",r);e.moveableScale=t.scale;var a=Cr(t,this,"dragControlStart",r,function(f,l){return Fn(t,f,e,l)}),o=function(f){n.setFixedDirection(f),a.forEach(function(l,c){l.setFixedDirection(f),Fn(t,l.moveable,e,i[c])})};e.setFixedDirection=o;var s=w(w({},n),{targets:t.props.targets,events:a,setFixedDirection:o}),u=J(t,"onScaleGroupStart",s);return e.isScale=u!==!1,e.isScale?s:!1},dragGroupControl:function(t,r){var e=r.datas;if(e.isScale){ii(t,"onBeforeScale",function(l){J(t,"onBeforeScaleGroup",ct(t,r,w(w({},l),{targets:t.props.targets}),!0))});var n=this.dragControl(t,r);if(n){var i=n.dist,a=e.moveableScale;t.scale=[i[0]*a[0],i[1]*a[1]];var o=t.props.keepRatio,s=e.fixedPosition,u=Cr(t,this,"dragControl",r,function(l,c){var d=O(Wt(nn(t.rotation/180*Math.PI,3),[c.datas.originalX*i[0],c.datas.originalY*i[1],1],3),2),v=d[0],p=d[1];return w(w({},c),{parentDist:null,parentScale:i,parentKeepRatio:o,dragClient:yt(s,[v,p])})}),f=w({targets:t.props.targets,events:u},n);return J(t,"onScaleGroup",f),f}}},dragGroupControlEnd:function(t,r){var e=r.isDrag,n=r.datas;if(n.isScale){this.dragControlEnd(t,r);var i=Cr(t,this,"dragControlEnd",r),a=nr(t,r,{targets:t.props.targets,events:i});return J(t,"onScaleGroupEnd",a),e}},request:function(){var t={},r=0,e=0,n=!1;return{isControl:!0,requestStart:function(i){return n=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:n}},request:function(i){return r+=i.deltaWidth,e+=i.deltaHeight,{datas:t,parentDist:[r,e],parentKeepRatio:i.keepRatio,useSnap:n}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:n}}}}};function Mr(t,r){return t.map(function(e,n){return Lr(e,r[n],1,2)})}function Zo(t,r,e){var n=Tt(t,r),i=Tt(t,e),a=i-n;return a>=0?a:a+2*Math.PI}function Kp(t,r){var e=Zo(t[0],t[1],t[2]),n=Zo(r[0],r[1],r[2]),i=Math.PI;return!(e>=i&&n<=i||e<=i&&n>=i)}var $p={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:Va("warpable"),render:function(t,r){var e=t.props,n=e.resizable,i=e.scalable,a=e.warpable,o=e.zoom;if(n||i||!a)return[];var s=t.state,u=s.pos1,f=s.pos2,l=s.pos3,c=s.pos4,d=Mr(u,f),v=Mr(f,u),p=Mr(u,l),h=Mr(l,u),g=Mr(l,c),m=Mr(c,l),b=Mr(f,c),y=Mr(c,f);return q([r.createElement("div",{className:et("line"),key:"middeLine1",style:Ie(d,g,o)}),r.createElement("div",{className:et("line"),key:"middeLine2",style:Ie(v,m,o)}),r.createElement("div",{className:et("line"),key:"middeLine3",style:Ie(p,b,o)}),r.createElement("div",{className:et("line"),key:"middeLine4",style:Ie(h,y,o)})],O(Iu(t,"warpable",r)),!1)},dragControlCondition:function(t,r){if(r.isRequest)return!1;var e=r.inputEvent.target;return Gt(e,et("direction"))&&Gt(e,et("warpable"))},dragControlStart:function(t,r){var e=r.datas,n=r.inputEvent,i=t.props.target,a=n.target,o=ef(a,e);if(!o||!i)return!1;var s=t.state,u=s.transformOrigin,f=s.is3d,l=s.targetTransform,c=s.targetMatrix,d=s.width,v=s.height,p=s.left,h=s.top;e.datas={},e.targetTransform=l,e.warpTargetMatrix=f?c:gr(c,3,4),e.targetInverseMatrix=ou(yr(e.warpTargetMatrix,4),3,4),e.direction=o,e.left=p,e.top=h,e.poses=[[0,0],[d,0],[0,v],[d,v]].map(function(b){return nt(b,u)}),e.nextPoses=e.poses.map(function(b){var y=O(b,2),S=y[0],E=y[1];return Wt(e.warpTargetMatrix,[S,E,0,1],4)}),e.startValue=Mt(4),e.prevMatrix=Mt(4),e.absolutePoses=fr(s),e.posIndexes=Cu(o),Jr(t,r),Qn(t,r,"matrix3d"),s.snapRenderInfo={request:r.isRequest,direction:o};var g=ct(t,r,w({set:function(b){e.startValue=b}},Zn(t,r))),m=J(t,"onWarpStart",g);return m!==!1&&(e.isWarp=!0),e.isWarp},dragControl:function(t,r){var e=r.datas,n=r.isRequest,i=r.distX,a=r.distY,o=e.targetInverseMatrix,s=e.prevMatrix,u=e.isWarp,f=e.startValue,l=e.poses,c=e.posIndexes,d=e.absolutePoses;if(!u)return!1;if($n(t,r,"matrix3d"),Ce(t,"warpable")){var v=c.map(function(D){return d[D]});v.length>1&&v.push([(v[0][0]+v[1][0])/2,(v[0][1]+v[1][1])/2]);var p=ei(t,n,{horizontal:v.map(function(D){return D[1]+a}),vertical:v.map(function(D){return D[0]+i})}),h=p.horizontal,g=p.vertical;a-=h.offset,i-=g.offset}var m=xr({datas:e,distX:i,distY:a},!0),b=e.nextPoses.slice();if(c.forEach(function(D){b[D]=yt(b[D],m)}),!gd.every(function(D){return Kp(D.map(function(M){return l[M]}),D.map(function(M){return b[M]}))}))return!1;var y=Ta(l[0],l[2],l[1],l[3],b[0],b[2],b[1],b[3]);if(!y.length)return!1;var S=Et(o,y,4),E=_u(e,S,!0),x=Et(yr(s,4),E,4);e.prevMatrix=E;var _=Et(f,E,4),C=Jn(e,"matrix3d(".concat(_.join(", "),")"),"matrix3d(".concat(E.join(", "),")"));return za(r,C),J(t,"onWarp",ct(t,r,w({delta:x,matrix:_,dist:E,multiply:Et,transform:C},jt({transform:C},r)))),!0},dragControlEnd:function(t,r){var e=r.datas,n=r.isDrag;return e.isWarp?(e.isWarp=!1,J(t,"onWarpEnd",nr(t,r,{})),n):!1}},Jp=et("area-pieces"),En=et("area-piece"),df=et("avoid"),Zp=et("view-dragging");function Ti(t){var r=t.areaElement;if(r){var e=t.state,n=e.width,i=e.height;Ls(r,df),r.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(i,"px")}}function Qo(t){return t.createElement("div",{key:"area_pieces",className:Jp},t.createElement("div",{className:En}),t.createElement("div",{className:En}),t.createElement("div",{className:En}),t.createElement("div",{className:En}))}var pf={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,r){var e=t.props,n=e.target,i=e.dragArea,a=e.groupable,o=e.passDragArea,s=t.getState(),u=s.width,f=s.height,l=s.renderPoses,c=o?et("area","pass"):et("area");if(a)return[r.createElement("div",{key:"area",ref:_r(t,"areaElement"),className:c}),Qo(r)];if(!n||!i)return[];var d=Ta([0,0],[u,0],[0,f],[u,f],l[0],l[1],l[2],l[3]),v=d.length?ni(d,!0):"none";return[r.createElement("div",{key:"area",ref:_r(t,"areaElement"),className:c,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(f,"px"),transformOrigin:"0 0",transform:v}}),Qo(r)]},dragStart:function(t,r){var e=r.datas,n=r.clientX,i=r.clientY,a=r.inputEvent;if(!a)return!1;e.isDragArea=!1;var o=t.areaElement,s=t.state,u=s.moveableClientRect,f=s.renderPoses,l=s.rootMatrix,c=s.is3d,d=u.left,v=u.top,p=or(f),h=p.left,g=p.top,m=p.width,b=p.height,y=c?4:3,S=O(me(l,[n-d,i-v],y),2),E=S[0],x=S[1];E-=h,x-=g;var _=[{left:h,top:g,width:m,height:x-10},{left:h,top:g,width:E-10,height:b},{left:h,top:g+x+10,width:m,height:b-x-10},{left:h+E+10,top:g,width:m-E-10,height:b}],C=[].slice.call(o.nextElementSibling.children);_.forEach(function(D,M){C[M].style.cssText="left: ".concat(D.left,"px;top: ").concat(D.top,"px; width: ").concat(D.width,"px; height: ").concat(D.height,"px;")}),Ns(o,df),s.disableNativeEvent=!0},drag:function(t,r){var e=r.datas,n=r.inputEvent;if(this.enableNativeEvent(t),!n)return!1;e.isDragArea||(e.isDragArea=!0,Ti(t))},dragEnd:function(t,r){this.enableNativeEvent(t);var e=r.inputEvent,n=r.datas;if(!e)return!1;n.isDragArea||Ti(t)},dragGroupStart:function(t,r){return this.dragStart(t,r)},dragGroup:function(t,r){return this.drag(t,r)},dragGroupEnd:function(t,r){return this.dragEnd(t,r)},unset:function(t){Ti(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var r=t.state;r.disableNativeEvent&&ks(function(){r.disableNativeEvent=!1})}},Qp=on("origin",{props:["origin","svgOrigin"],render:function(t,r){var e=t.props,n=e.zoom,i=e.svgOrigin,a=e.groupable,o=t.getState(),s=o.beforeOrigin,u=o.rotation,f=o.svg,l=o.allMatrix,c=o.is3d,d=o.left,v=o.top,p=o.offsetWidth,h=o.offsetHeight,g;if(!a&&f&&i){var m=O(Ka(i,p,h),2),b=m[0],y=m[1],S=c?4:3,E=Rt(l,[b,y],S);g=Hn(u,n,nt(E,[d,v]))}else g=Hn(u,n,s);return[r.createElement("div",{className:et("control","origin"),style:g,key:"beforeOrigin"})]}});function tv(t){var r=t.scrollContainer;return[r.scrollLeft,r.scrollTop]}var rv={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,r){var e=t.props,n=e.scrollContainer,i=n===void 0?t.getContainer():n,a=e.scrollOptions,o=new zc,s=br(i,!0);r.datas.dragScroll=o,t.state.dragScroll=o;var u=r.isControl?"controlGesto":"targetGesto",f=r.targets;o.on("scroll",function(l){var c=l.container,d=l.direction,v=ct(t,r,{scrollContainer:c,direction:d}),p=f?"onScrollGroup":"onScroll";f&&(v.targets=f),J(t,p,v)}).on("move",function(l){var c=l.offsetX,d=l.offsetY,v=l.inputEvent;t[u].scrollBy(c,d,v.inputEvent,!0)}).on("scrollDrag",function(l){var c=l.next;c(t[u].getCurrentEvent())}),o.dragStart(r,w({container:s},a))},checkScroll:function(t,r){var e=r.datas.dragScroll;if(e){var n=t.props,i=n.scrollContainer,a=i===void 0?t.getContainer():i,o=n.scrollThreshold,s=o===void 0?0:o,u=n.scrollThrottleTime,f=u===void 0?0:u,l=n.getScrollPosition,c=l===void 0?tv:l,d=n.scrollOptions;return e.drag(r,w({container:a,threshold:s,throttleTime:f,getScrollPosition:function(v){return c({scrollContainer:v.container,direction:v.direction})}},d)),!0}},drag:function(t,r){return this.checkScroll(t,r)},dragEnd:function(t,r){r.datas.dragScroll.dragEnd(),r.datas.dragScroll=null},dragControlStart:function(t,r){return this.dragStart(t,w(w({},r),{isControl:!0}))},dragControl:function(t,r){return this.drag(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupStart:function(t,r){return this.dragStart(t,w(w({},r),{targets:t.props.targets}))},dragGroup:function(t,r){return this.drag(t,w(w({},r),{targets:t.props.targets}))},dragGroupEnd:function(t,r){return this.dragEnd(t,w(w({},r),{targets:t.props.targets}))},dragGroupControlStart:function(t,r){return this.dragStart(t,w(w({},r),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,r){return this.drag(t,w(w({},r),{targets:t.props.targets}))},dragGroupControEnd:function(t,r){return this.dragEnd(t,w(w({},r),{targets:t.props.targets}))},unset:function(t){var r,e=t.state;(r=e.dragScroll)===null||r===void 0||r.dragEnd(),e.dragScroll=null}},vf={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","requestStyles"],events:["changeTargets"]},ev=on("padding",{props:["padding"],render:function(t,r){var e=t.props;if(e.dragArea)return[];var n=cf(e.padding||{}),i=n.left,a=n.top,o=n.right,s=n.bottom,u=t.getState(),f=u.renderPoses,l=u.pos1,c=u.pos2,d=u.pos3,v=u.pos4,p=[l,c,d,v],h=[];return i>0&&h.push([0,2]),a>0&&h.push([0,1]),o>0&&h.push([1,3]),s>0&&h.push([2,3]),h.map(function(g,m){var b=O(g,2),y=b[0],S=b[1],E=p[y],x=p[S],_=f[y],C=f[S],D=Ta([0,0],[100,0],[0,100],[100,100],E,x,_,C);if(D.length)return r.createElement("div",{key:"padding".concat(m),className:et("padding"),style:{transform:ni(D,!0)}})})}}),ts=["nw","ne","se","sw"];function Cn(t,r){var e=t[0]+t[1],n=e>r?r/e:1;return t[0]*=n,t[1]=r-t[1]*n,t}var nv=[1,2,5,6],iv=[0,3,4,7],qr=[1,-1,-1,1],Xr=[1,1,-1,-1];function $a(t,r,e,n,i,a,o,s){i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=e),s===void 0&&(s=n);var u=[],f=!1,l=t.filter(function(d){return!d.virtual}),c=l.map(function(d){var v=d.horizontal,p=d.vertical,h=d.pos;if(p&&!f&&(f=!0,u.push("/")),f){var g=Math.max(0,p===1?h[1]-a:s-h[1]);return u.push(cr(g,n,r)),g}else{var g=Math.max(0,v===1?h[0]-i:o-h[0]);return u.push(cr(g,e,r)),g}});return{radiusPoses:l,styles:u,raws:c}}function hf(t){for(var r=[0,0],e=[0,0],n=t.length,i=0;i<n;++i){var a=t[i];a.sub&&(a.horizontal&&(r[1]===0&&(r[0]=i),r[1]=i-r[0]+1,e[0]=i+1),a.vertical&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1))}return{horizontalRange:r,verticalRange:e}}function gf(t,r,e,n,i,a,o){var s,u,f,l;a===void 0&&(a=[0,0]),o===void 0&&(o=!1);var c=t.indexOf("/"),d=(c>-1?t.slice(0,c):t).length,v=t.slice(0,d),p=t.slice(d+1),h=v.length,g=p.length,m=g>0,b=O(v,4),y=b[0],S=y===void 0?"0px":y,E=b[1],x=E===void 0?S:E,_=b[2],C=_===void 0?S:_,D=b[3],M=D===void 0?x:D,I=O(p,4),T=I[0],R=T===void 0?S:T,A=I[1],P=A===void 0?m?R:x:A,L=I[2],k=L===void 0?m?R:C:L,B=I[3],H=B===void 0?m?P:M:B,Y=[S,x,C,M].map(function(X){return _t(X,r)}),G=[R,P,k,H].map(function(X){return _t(X,e)}),K=Y.slice(),$=G.slice();s=O(Cn([K[0],K[1]],r),2),K[0]=s[0],K[1]=s[1],u=O(Cn([K[3],K[2]],r),2),K[3]=u[0],K[2]=u[1],f=O(Cn([$[0],$[3]],e),2),$[0]=f[0],$[3]=f[1],l=O(Cn([$[1],$[2]],e),2),$[1]=l[0],$[2]=l[1];var W=o?K:K.slice(0,Math.max(a[0],h)),j=o?$:$.slice(0,Math.max(a[1],g));return q(q([],O(W.map(function(X,z){var U=ts[z];return{virtual:z>=h,horizontal:qr[z],vertical:0,pos:[n+X,i+(Xr[z]===-1?e:0)],sub:!0,raw:Y[z],direction:U}})),!1),O(j.map(function(X,z){var U=ts[z];return{virtual:z>=g,horizontal:0,vertical:Xr[z],pos:[n+(qr[z]===-1?r:0),i+X],sub:!0,raw:G[z],direction:U}})),!1)}function av(t,r,e,n,i){i===void 0&&(i=r.length);var a=hf(t.slice(n)),o=a.horizontalRange,s=a.verticalRange,u=e-n,f=0;if(u===0)f=i;else if(u>0&&u<o[1])f=o[1]-u;else if(u>=s[0])f=s[0]+s[1]-u;else return;t.splice(e,f),r.splice(e,f)}function ov(t,r,e,n,i,a,o,s,u,f,l){f===void 0&&(f=0),l===void 0&&(l=0);var c=hf(t.slice(e)),d=c.horizontalRange,v=c.verticalRange;if(n>-1)for(var p=qr[n]===1?a-f:s-a,h=d[1];h<=n;++h){var g=Xr[h]===1?l:u,m=0;if(n===h?m=a:h===0?m=f+p:qr[h]===-1&&(m=s-(r[e][0]-f)),t.splice(e+h,0,{horizontal:qr[h],vertical:0,pos:[m,g]}),r.splice(e+h,0,[m,g]),h===0)break}else if(i>-1){var b=Xr[i]===1?o-l:u-o;if(d[1]===0&&v[1]===0){var y=[f+b,l];t.push({horizontal:qr[0],vertical:0,pos:y}),r.push(y)}for(var S=v[0],h=v[1];h<=i;++h){var m=qr[h]===1?f:s,g=0;if(i===h?g=o:h===0?g=l+b:Xr[h]===1?g=r[e+S][1]:Xr[h]===-1&&(g=u-(r[e+S][1]-l)),t.push({horizontal:0,vertical:Xr[h],pos:[m,g]}),r.push([m,g]),h===0)break}}}function sv(t,r){r===void 0&&(r=t.map(function(i){return i.raw}));var e=t.map(function(i,a){return i.horizontal?r[a]:null}).filter(function(i){return i!=null}),n=t.map(function(i,a){return i.vertical?r[a]:null}).filter(function(i){return i!=null});return{horizontals:e,verticals:n}}var uv=[[0,-1,"n"],[1,0,"e"]],fv=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Ja(t,r,e){var n=t.props.clipRelative,i=t.state,a=i.width,o=i.height,s=r,u=s.type,f=s.poses,l=u==="rect",c=u==="circle";if(u==="polygon")return e.map(function(x){return"".concat(cr(x[0],a,n)," ").concat(cr(x[1],o,n))});if(l||u==="inset"){var d=e[1][1],v=e[3][0],p=e[7][0],h=e[5][1];if(l)return[d,v,h,p].map(function(x){return"".concat(x,"px")});var g=[d,a-v,o-h,p].map(function(x,_){return cr(x,_%2?a:o,n)});if(e.length>8){var m=O(nt(e[4],e[0]),2),b=m[0],y=m[1];g.push.apply(g,q(["round"],O($a(f.slice(8).map(function(x,_){return w(w({},x),{pos:e[_]})}),n,b,y,p,d,v,h).styles),!1))}return g}else if(c||u==="ellipse"){var S=e[0],E=cr(N(e[1][1]-S[1]),c?Math.sqrt((a*a+o*o)/2):o,n),g=c?[E]:[cr(N(e[2][0]-S[0]),a,n),E];return g.push("at",cr(S[0],a,n),cr(S[1],o,n)),g}}function qn(t,r,e,n){var i=[n,(n+r)/2,r],a=[t,(t+e)/2,e];return fv.map(function(o){var s=O(o,3),u=s[0],f=s[1],l=s[2],c=i[u+1],d=a[f+1];return{vertical:N(f),horizontal:N(u),direction:l,pos:[c,d]}})}function mf(t){var r=[1/0,-1/0],e=[1/0,-1/0];return t.forEach(function(n){var i=n.pos;r[0]=Math.min(r[0],i[0]),r[1]=Math.max(r[1],i[0]),e[0]=Math.min(e[0],i[1]),e[1]=Math.max(e[1],i[1])}),[N(r[1]-r[0]),N(e[1]-e[0])]}function rs(t,r,e,n,i){var a,o,s,u,f,l,c,d,v;if(t){var p=i;if(!p){var h=er(t),g=h("clipPath");p=g!=="none"?g:h("clip")}if(!((!p||p==="none"||p==="auto")&&(p=n,!p))){var m=Bs(p),b=m.prefix,y=b===void 0?p:b,S=m.value,E=S===void 0?"":S,x=y==="circle",_=" ";if(y==="polygon"){var C=Vr(E||"0% 0%, 100% 0%, 100% 100%, 0% 100%");_=",";var D=C.map(function(Pt){var Lt=O(Pt.split(" "),2),pt=Lt[0],vt=Lt[1];return{vertical:1,horizontal:1,pos:[_t(pt,r),_t(vt,e)]}}),M=Kr(D.map(function(Pt){return Pt.pos}));return{type:y,clipText:p,poses:D,splitter:_,left:M.minX,right:M.maxX,top:M.minY,bottom:M.maxY}}else if(x||y==="ellipse"){var I="",T="",R=0,A=0,C=Br(E);if(x){var P="";a=O(C,4),o=a[0],P=o===void 0?"50%":o,s=a[2],I=s===void 0?"50%":s,u=a[3],T=u===void 0?"50%":u,R=_t(P,Math.sqrt((r*r+e*e)/2)),A=R}else{var L="",k="";f=O(C,5),l=f[0],L=l===void 0?"50%":l,c=f[1],k=c===void 0?"50%":c,d=f[3],I=d===void 0?"50%":d,v=f[4],T=v===void 0?"50%":v,R=_t(L,r),A=_t(k,e)}var B=[_t(I,r),_t(T,e)],D=q([{vertical:1,horizontal:1,pos:B,direction:"nesw"}],O(uv.slice(0,x?1:2).map(function(pt){return{vertical:N(pt[1]),horizontal:pt[0],direction:pt[2],sub:!0,pos:[B[0]+pt[0]*R,B[1]+pt[1]*A]}})),!1);return{type:y,clipText:p,radiusX:R,radiusY:A,left:B[0]-R,top:B[1]-A,right:B[0]+R,bottom:B[1]+A,poses:D,splitter:_}}else if(y==="inset"){var C=Br(E||"0 0 0 0"),H=C.indexOf("round"),Y=(H>-1?C.slice(0,H):C).length,G=C.slice(Y+1),K=O(C.slice(0,Y),4),$=K[0],W=K[1],j=W===void 0?$:W,X=K[2],z=X===void 0?$:X,U=K[3],it=U===void 0?j:U,rt=O([$,z].map(function(pt){return _t(pt,e)}),2),Q=rt[0],Z=rt[1],ht=O([it,j].map(function(pt){return _t(pt,r)}),2),ot=ht[0],st=ht[1],ut=r-st,St=e-Z,xt=gf(G,ut-ot,St-Q,ot,Q),D=q(q([],O(qn(Q,ut,St,ot)),!1),O(xt),!1);return{type:"inset",clipText:p,poses:D,top:Q,left:ot,right:ut,bottom:St,radius:G,splitter:_}}else if(y==="rect"){var C=Vr(E||"0px, ".concat(r,"px, ").concat(e,"px, 0px"));_=",";var dt=O(C.map(function(Ct){var Dt=Ze(Ct).value;return Dt}),4),mt=dt[0],st=dt[1],Z=dt[2],ot=dt[3],D=qn(mt,st,Z,ot);return{type:"rect",clipText:p,poses:D,top:mt,right:st,bottom:Z,left:ot,values:C,splitter:_}}}}}function lv(t,r,e,n,i){var a=t[r],o=a.direction,s=a.sub,u=t.map(function(){return[0,0]}),f=o?o.split(""):[];if(n&&r<8){var l=f.filter(function(R){return R==="w"||R==="e"}),c=f.filter(function(R){return R==="n"||R==="s"}),d=l[0],v=c[0];u[r]=e;var p=O(mf(t),2),h=p[0],g=p[1],m=h&&g?h/g:0;if(m&&i){var b=(r+4)%8,y=t[b].pos,S=[0,0];o.indexOf("w")>-1?S[0]=-1:o.indexOf("e")>-1&&(S[0]=1),o.indexOf("n")>-1?S[1]=-1:o.indexOf("s")>-1&&(S[1]=1);var E=uf([h,g],e,m,S,!0),x=h+E[0],_=g+E[1],C=y[1],D=y[1],M=y[0],I=y[0];S[0]===-1?M=I-x:S[0]===1?I=M+x:(M=M-x/2,I=I+x/2),S[1]===-1?C=D-_:(S[1]===1||(C=D-_/2),D=C+_);var T=qn(C,I,D,M);t.forEach(function(R,A){u[A][0]=T[A].pos[0]-R.pos[0],u[A][1]=T[A].pos[1]-R.pos[1]})}else t.forEach(function(R,A){var P=R.direction;P&&(P.indexOf(d)>-1&&(u[A][0]=e[0]),P.indexOf(v)>-1&&(u[A][1]=e[1]))}),d&&(u[1][0]=e[0]/2,u[5][0]=e[0]/2),v&&(u[3][1]=e[1]/2,u[7][1]=e[1]/2)}else o&&!s?f.forEach(function(R){var A=R==="n"||R==="s";t.forEach(function(P,L){var k=P.direction,B=P.horizontal,H=P.vertical;!k||k.indexOf(R)===-1||(u[L]=[A||!B?0:e[0],!A||!H?0:e[1]])})}):u[r]=e;return u}function cv(t,r){var e=O(Su(t,r),2),n=e[0],i=e[1],a=r.datas,o=a.clipPath,s=a.clipIndex,u=o,f=u.type,l=u.poses,c=u.splitter,d=l.map(function(b){return b.pos});if(f==="polygon")d.splice(s,0,[n,i]);else if(f==="inset"){var v=nv.indexOf(s),p=iv.indexOf(s),h=l.length;if(ov(l,d,8,v,p,n,i,d[4][0],d[4][1],d[0][0],d[0][1]),h===l.length)return}else return;var g=Ja(t,o,d),m="".concat(f,"(").concat(g.join(c),")");J(t,"onClip",ct(t,r,w({clipEventType:"added",clipType:f,poses:d,clipStyles:g,clipStyle:m,distX:0,distY:0},jt({clipPath:m},r))))}function dv(t,r){var e=r.datas,n=e.clipPath,i=e.clipIndex,a=n,o=a.type,s=a.poses,u=a.splitter,f=s.map(function(v){return v.pos}),l=f.length;if(o==="polygon")s.splice(i,1),f.splice(i,1);else if(o==="inset"){if(i<8||(av(s,f,i,8,l),l===s.length))return}else return;var c=Ja(t,n,f),d="".concat(o,"(").concat(c.join(u),")");J(t,"onClip",ct(t,r,w({clipEventType:"removed",clipType:o,poses:f,clipStyles:c,clipStyle:d,distX:0,distY:0},jt({clipPath:d},r))))}var pv={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,r){var e=t.props,n=e.customClipPath,i=e.defaultClipPath,a=e.clipArea,o=e.zoom,s=e.groupable,u=t.getState(),f=u.target,l=u.width,c=u.height,d=u.allMatrix,v=u.is3d,p=u.left,h=u.top,g=u.pos1,m=u.pos2,b=u.pos3,y=u.pos4,S=u.clipPathState,E=u.snapBoundInfos,x=u.rotation;if(!f||s)return[];var _=rs(f,l,c,i||"inset",S||n);if(!_)return[];var C=v?4:3,D=_.type,M=_.poses,I=M.map(function(st){var ut=Rt(d,st.pos,C);return[ut[0]-p,ut[1]-h]}),T=[],R=[],A=D==="rect",P=D==="inset",L=D==="polygon";if(A||P||L){var k=P?I.slice(0,8):I;R=k.map(function(st,ut){var St=ut===0?k[k.length-1]:k[ut-1],xt=Tt(St,st),dt=Ju(St,st);return r.createElement("div",{key:"clipLine".concat(ut),className:et("line","clip-line","snap-control"),"data-clip-index":ut,style:{width:"".concat(dt,"px"),transform:"translate(".concat(St[0],"px, ").concat(St[1],"px) rotate(").concat(xt,"rad) scaleY(").concat(o,")")}})})}if(T=I.map(function(st,ut){return r.createElement("div",{key:"clipControl".concat(ut),className:et("control","clip-control","snap-control"),"data-clip-index":ut,style:{transform:"translate(".concat(st[0],"px, ").concat(st[1],"px) rotate(").concat(x,"rad) scale(").concat(o,")")}})}),P&&T.push.apply(T,q([],O(I.slice(8).map(function(st,ut){return r.createElement("div",{key:"clipRadiusControl".concat(ut),className:et("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+ut,style:{transform:"translate(".concat(st[0],"px, ").concat(st[1],"px) rotate(").concat(x,"rad) scale(").concat(o,")")}})})),!1)),D==="circle"||D==="ellipse"){var B=_.left,H=_.top,Y=_.radiusX,G=_.radiusY,K=O(nt(Rt(d,[B,H],C),Rt(d,[0,0],C)),2),$=K[0],W=K[1],j="none";if(!a){for(var X=Math.max(10,Y/5,G/5),z=[],U=0;U<=X;++U){var it=Math.PI*2/X*U;z.push([Y+(Y-o)*Math.cos(it),G+(G-o)*Math.sin(it)])}z.push([Y,-2]),z.push([-2,-2]),z.push([-2,G*2+2]),z.push([Y*2+2,G*2+2]),z.push([Y*2+2,-2]),z.push([Y,-2]),j="polygon(".concat(z.map(function(st){return"".concat(st[0],"px ").concat(st[1],"px")}).join(", "),")")}T.push(r.createElement("div",{key:"clipEllipse",className:et("clip-ellipse","snap-control"),style:{width:"".concat(Y*2,"px"),height:"".concat(G*2,"px"),clipPath:j,transform:"translate(".concat(-p+$,"px, ").concat(-h+W,"px) ").concat(ni(d))}}))}if(a){var rt=or(q([g,m,b,y],O(I),!1)),Q=rt.width,Z=rt.height,ht=rt.left,ot=rt.top;if(L||A||P){var z=P?I.slice(0,8):I;T.push(r.createElement("div",{key:"clipArea",className:et("clip-area","snap-control"),style:{width:"".concat(Q,"px"),height:"".concat(Z,"px"),transform:"translate(".concat(ht,"px, ").concat(ot,"px)"),clipPath:"polygon(".concat(z.map(function(ut){return"".concat(ut[0]-ht,"px ").concat(ut[1]-ot,"px")}).join(", "),")")}}))}}return E&&["vertical","horizontal"].forEach(function(st){var ut=E[st],St=st==="horizontal";ut.isSnap&&R.push.apply(R,q([],O(ut.snap.posInfos.map(function(xt,dt){var mt=xt.pos,Pt=nt(Rt(d,St?[0,mt]:[mt,0],C),[p,h]),Lt=nt(Rt(d,St?[l,mt]:[mt,c],C),[p,h]);return Ye(r,"",Pt,Lt,o,"clip".concat(st,"snap").concat(dt),"guideline")})),!1)),ut.isBound&&R.push.apply(R,q([],O(ut.bounds.map(function(xt,dt){var mt=xt.pos,Pt=nt(Rt(d,St?[0,mt]:[mt,0],C),[p,h]),Lt=nt(Rt(d,St?[l,mt]:[mt,c],C),[p,h]);return Ye(r,"",Pt,Lt,o,"clip".concat(st,"bounds").concat(dt),"guideline","bounds","bold")})),!1))}),q(q([],O(T),!1),O(R),!1)},dragControlCondition:function(t,r){return r.inputEvent&&(r.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,r){var e=t.props,n=e.dragWithClip,i=n===void 0?!0:n;return i?!1:this.dragControlStart(t,r)},drag:function(t,r){return this.dragControl(t,w(w({},r),{isDragTarget:!0}))},dragEnd:function(t,r){return this.dragControlEnd(t,r)},dragControlStart:function(t,r){var e=t.state,n=t.props,i=n.defaultClipPath,a=n.customClipPath,o=e.target,s=e.width,u=e.height,f=r.inputEvent?r.inputEvent.target:null,l=f&&f.getAttribute("class")||"",c=r.datas,d=rs(o,s,u,i||"inset",a);if(!d)return!1;var v=d.clipText,p=d.type,h=d.poses,g=J(t,"onClipStart",ct(t,r,{clipType:p,clipStyle:v,poses:h.map(function(m){return m.pos})}));return g===!1?(c.isClipStart=!1,!1):(c.isControl=l&&l.indexOf("clip-control")>-1,c.isLine=l.indexOf("clip-line")>-1,c.isArea=l.indexOf("clip-area")>-1||l.indexOf("clip-ellipse")>-1,c.clipIndex=f?parseInt(f.getAttribute("data-clip-index"),10):-1,c.clipPath=d,c.isClipStart=!0,e.clipPathState=v,Jr(t,r),!0)},dragControl:function(t,r){var e,n,i,a=r.datas,o=r.originalDatas,s=r.isDragTarget;if(!a.isClipStart)return!1;var u=a,f=u.isControl,l=u.isLine,c=u.isArea,d=u.clipIndex,v=u.clipPath;if(!v)return!1;var p=$r(t.props,"clippable"),h=p.keepRatio,g=0,m=0,b=o.draggable,y=xr(r);s&&b?(e=O(b.prevBeforeDist,2),g=e[0],m=e[1]):(n=O(y,2),g=n[0],m=n[1]);var S=[g,m],E=t.state,x=E.width,_=E.height,C=!c&&!f&&!l,D=v.type,M=v.poses,I=v.splitter,T=M.map(function(wt){return wt.pos});C&&(g=-g,m=-m);var R=!f||M[d].direction==="nesw",A=D==="inset"||D==="rect",P=M.map(function(){return[0,0]});if(f&&!R){var L=M[d],k=L.horizontal,B=L.vertical,H=[g*N(k),m*N(B)];P=lv(M,d,H,A,h)}else R&&(P=T.map(function(){return[g,m]}));var Y=T.map(function(wt,qt){return yt(wt,P[qt])}),G=q([],O(Y),!1);E.snapBoundInfos=null;var K=v.type==="circle",$=v.type==="ellipse";if(K||$){var W=or(Y),j=N(W.bottom-W.top),X=N($?W.right-W.left:j),z=Y[0][1]+j,U=Y[0][0]-X,it=Y[0][0]+X;K&&(G.push([it,W.bottom]),P.push([1,0])),G.push([W.left,z]),P.push([0,1]),G.push([U,W.bottom]),P.push([1,0])}var rt=qu((p.clipHorizontalGuidelines||[]).map(function(wt){return _t("".concat(wt),_)}),(p.clipVerticalGuidelines||[]).map(function(wt){return _t("".concat(wt),x)}),x,_),Q=[],Z=[];if(K||$)Q=[G[4][0],G[2][0]],Z=[G[1][1],G[3][1]];else if(A){var ht=[G[0],G[2],G[4],G[6]],ot=[P[0],P[2],P[4],P[6]];Q=ht.filter(function(wt,qt){return ot[qt][0]}).map(function(wt){return wt[0]}),Z=ht.filter(function(wt,qt){return ot[qt][1]}).map(function(wt){return wt[1]})}else Q=G.filter(function(wt,qt){return P[qt][0]}).map(function(wt){return wt[0]}),Z=G.filter(function(wt,qt){return P[qt][1]}).map(function(wt){return wt[1]});var st=[0,0],ut=Lo(rt,p.clipTargetBounds&&{left:0,top:0,right:x,bottom:_},Q,Z,5),St=ut.horizontal,xt=ut.vertical,dt=St.offset,mt=xt.offset;if(St.isBound&&(st[1]+=dt),xt.isBound&&(st[0]+=mt),($||K)&&P[0][0]===0&&P[0][1]===0){var W=or(Y),Pt=W.bottom-W.top,Lt=$?W.right-W.left:Pt,pt=xt.isBound?N(mt):xt.snapIndex===0?-mt:mt,vt=St.isBound?N(dt):St.snapIndex===0?-dt:dt;Lt-=pt,Pt-=vt,K&&(Pt=zu(xt,St)>0?Pt:Lt,Lt=Pt);var gt=G[0];G[1][1]=gt[1]-Pt,G[2][0]=gt[0]+Lt,G[3][1]=gt[1]+Pt,G[4][0]=gt[0]-Lt}else if(A&&h&&f){var Ct=O(mf(M),2),Dt=Ct[0],lt=Ct[1],It=Dt&&lt?Dt/lt:0,we=M[d],Nr=we.direction||"",li=G[1][1],z=G[5][1],U=G[7][0],it=G[3][0];N(dt)<=N(mt)?dt=ar(dt)*N(mt)/It:mt=ar(mt)*N(dt)*It,Nr.indexOf("w")>-1?U-=mt:Nr.indexOf("e")>-1?it-=mt:(U+=mt/2,it-=mt/2),Nr.indexOf("n")>-1?li-=dt:Nr.indexOf("s")>-1?z-=dt:(li+=dt/2,z-=dt/2);var $f=qn(li,it,z,U);G.forEach(function(lo,tl){var pi;pi=O($f[tl].pos,2),lo[0]=pi[0],lo[1]=pi[1]})}else G.forEach(function(wt,qt){var fo=P[qt];fo[0]&&(wt[0]-=mt),fo[1]&&(wt[1]-=dt)});var uo=Ja(t,v,Y),ci="".concat(D,"(").concat(uo.join(I),")");if(E.clipPathState=ci,K||$)Q=[G[4][0],G[2][0]],Z=[G[1][1],G[3][1]];else if(A){var ht=[G[0],G[2],G[4],G[6]];Q=ht.map(function(qt){return qt[0]}),Z=ht.map(function(qt){return qt[1]})}else Q=G.map(function(wt){return wt[0]}),Z=G.map(function(wt){return wt[1]});if(E.snapBoundInfos=Lo(rt,p.clipTargetBounds&&{left:0,top:0,right:x,bottom:_},Q,Z,1),b){var Jf=E.is3d,Zf=E.allMatrix,Qf=Jf?4:3,di=st;s&&(di=[S[0]+st[0]-y[0],S[1]+st[1]-y[1]]),b.deltaOffset=Et(Zf,[di[0],di[1],0,0],Qf)}return J(t,"onClip",ct(t,r,w({clipEventType:"changed",clipType:D,poses:Y,clipStyle:ci,clipStyles:uo,distX:g,distY:m},jt((i={},i[D==="rect"?"clip":"clipPath"]=ci,i),r)))),!0},dragControlEnd:function(t,r){this.unset(t);var e=r.isDrag,n=r.datas,i=r.isDouble,a=n.isLine,o=n.isClipStart,s=n.isControl;return o?(J(t,"onClipEnd",nr(t,r,{})),i&&(s?dv(t,r):a&&cv(t,r)),i||e):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},vv={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,r){return r.isRequest?r.requestAble==="originDraggable":Gt(r.inputEvent.target,et("origin"))},dragControlStart:function(t,r){var e=r.datas;Jr(t,r);var n=ct(t,r,{dragStart:Vt.dragStart(t,new ve().dragStart([0,0],r))}),i=J(t,"onDragOriginStart",n);return e.startOrigin=t.state.transformOrigin,e.startTargetOrigin=t.state.targetOrigin,e.prevOrigin=[0,0],e.isDragOrigin=!0,i===!1?(e.isDragOrigin=!1,!1):n},dragControl:function(t,r){var e=r.datas,n=r.isPinch,i=r.isRequest;if(!e.isDragOrigin)return!1;var a=O(xr(r),2),o=a[0],s=a[1],u=t.state,f=u.width,l=u.height,c=u.offsetMatrix,d=u.targetMatrix,v=u.is3d,p=t.props.originRelative,h=p===void 0?!0:p,g=v?4:3,m=[o,s];if(i){var b=r.distOrigin;(b[0]||b[1])&&(m=b)}var y=yt(e.startOrigin,m),S=yt(e.startTargetOrigin,m),E=nt(m,e.prevOrigin),x=un(c,d,y,g),_=t.getRect(),C=or(Zr(x,f,l,g)),D=[_.left-C.left,_.top-C.top];e.prevOrigin=m;var M=[cr(S[0],f,h),cr(S[1],l,h)].join(" "),I=Vt.drag(t,sn(r,t.state,D,!!n,!1)),T=ct(t,r,w(w({width:f,height:l,origin:y,dist:m,delta:E,transformOrigin:M,drag:I},jt({transformOrigin:M,transform:I.transform},r)),{afterTransform:I.transform}));return J(t,"onDragOrigin",T),T},dragControlEnd:function(t,r){var e=r.datas;return e.isDragOrigin?(J(t,"onDragOriginEnd",nr(t,r,{})),!0):!1},dragGroupControlCondition:function(t,r){return this.dragControlCondition(t,r)},dragGroupControlStart:function(t,r){var e=this.dragControlStart(t,r);return!!e},dragGroupControl:function(t,r){var e=this.dragControl(t,r);return e?(t.transformOrigin=e.transformOrigin,!0):!1},request:function(t){var r={},e=t.getRect(),n=0,i=0,a=e.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:r}},request:function(s){return"deltaOrigin"in s?(o[0]+=s.deltaOrigin[0],o[1]+=s.deltaOrigin[1]):"origin"in s?(o[0]=s.origin[0]-a[0],o[1]=s.origin[1]-a[1]):("x"in s?n=s.x-e.left:"deltaX"in s&&(n+=s.deltaX),"y"in s?i=s.y-e.top:"deltaY"in s&&(i+=s.deltaY)),{datas:r,distX:n,distY:i,distOrigin:o}},requestEnd:function(){return{datas:r,isDrag:!0}}}}};function hv(t,r,e,n){var i=t.filter(function(u){var f=u.virtual,l=u.horizontal;return l&&!f}).length,a=t.filter(function(u){var f=u.virtual,l=u.vertical;return l&&!f}).length,o=-1;if(r===0&&(i===0?o=0:i===1&&(o=1)),r===2&&(i<=2?o=2:i<=3&&(o=3)),r===3&&(a===0?o=4:a<4&&(o=7)),r===1&&(a<=1?o=5:a<=2&&(o=6)),!(o===-1||!t[o].virtual)){var s=t[o];gv(t,o),o<4?s.pos[0]=e:s.pos[1]=n}}function gv(t,r){r<4?t.slice(0,r+1).forEach(function(e){e.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,r+1).forEach(function(e){e.virtual=!1}))}function mv(t,r){r<4?t.slice(r,4).forEach(function(e){e.virtual=!0}):t.slice(r).forEach(function(e){e.virtual=!0})}function es(t,r,e,n,i){n===void 0&&(n=[0,0]);var a=[];return!t||t==="0px"?a=[]:a=Br(t),gf(a,r,e,0,0,n,i)}function ns(t,r,e,n,i){var a=t.state,o=a.width,s=a.height,u=$a(i,t.props.roundRelative,o,s),f=u.raws,l=u.styles,c=u.radiusPoses,d=sv(c,f),v=d.horizontals,p=d.verticals,h=l.join(" ");a.borderRadiusState=h;var g=ct(t,r,w({horizontals:v,verticals:p,borderRadius:h,width:o,height:s,delta:n,dist:e},jt({borderRadius:h},r)));return J(t,"onRound",g),g}function is(t){var r,e,n=t.getState().style,i=n.borderRadius||"";if(!i&&t.props.groupable){var a=t.moveables[0],o=t.getTargets()[0];o&&((a==null?void 0:a.props.target)===o?(i=(e=(r=t.moveables[0])===null||r===void 0?void 0:r.state.style.borderRadius)!==null&&e!==void 0?e:"",n.borderRadius=i):(i=Ya(o).borderRadius,n.borderRadius=i))}return i}var bv={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var r=t.props.roundClickable;return r===!0||r==="line"?et("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,r){var e=t.getState(),n=e.target,i=e.width,a=e.height,o=e.allMatrix,s=e.is3d,u=e.left,f=e.top,l=e.borderRadiusState,c=t.props,d=c.minRoundControls,v=d===void 0?[0,0]:d,p=c.maxRoundControls,h=p===void 0?[4,4]:p,g=c.zoom,m=c.roundPadding,b=m===void 0?0:m,y=c.isDisplayShadowRoundControls,S=c.groupable;if(!n)return null;var E=l||is(t),x=s?4:3,_=es(E,i,a,v,!0);if(!_)return null;var C=0,D=0,M=S?[0,0]:[u,f];return _.map(function(I,T){var R=I.horizontal,A=I.vertical,P=I.direction||"",L=q([],O(I.pos),!1);D+=Math.abs(R),C+=Math.abs(A),R&&P.indexOf("n")>-1&&(L[1]-=b),A&&P.indexOf("w")>-1&&(L[0]-=b),R&&P.indexOf("s")>-1&&(L[1]+=b),A&&P.indexOf("e")>-1&&(L[0]+=b);var k=nt(Rt(o,L,x),M),B=I.vertical?C<=h[1]&&(y||!I.virtual):D<=h[0]&&(y||!I.virtual);return r.createElement("div",{key:"borderRadiusControl".concat(T),className:et("control","border-radius",I.vertical?"vertical":"",I.virtual?"virtual":""),"data-radius-index":T,style:{display:B?"block":"none",transform:"translate(".concat(k[0],"px, ").concat(k[1],"px) scale(").concat(g,")")}})})},dragControlCondition:function(t,r){if(!r.inputEvent||r.isRequest)return!1;var e=r.inputEvent.target.getAttribute("class")||"";return e.indexOf("border-radius")>-1||e.indexOf("moveable-line")>-1&&e.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,r){return this.dragControlCondition(t,r)},dragControlStart:function(t,r){var e=r.inputEvent,n=r.datas,i=e.target,a=i.getAttribute("class")||"",o=a.indexOf("border-radius")>-1,s=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,u=o?parseInt(i.getAttribute("data-radius-index"),10):-1,f=-1;if(s){var l=i.getAttribute("data-line-key")||"";l&&(f=parseInt(l.replace(/render-line-/g,""),10),isNaN(f)&&(f=-1))}if(!o&&!s)return!1;var c=ct(t,r,{}),d=J(t,"onRoundStart",c);if(d===!1)return!1;n.lineIndex=f,n.controlIndex=u,n.isControl=o,n.isLine=s,Jr(t,r);var v=t.props,p=v.roundRelative,h=v.minRoundControls,g=h===void 0?[0,0]:h,m=t.state,b=m.width,y=m.height;n.isRound=!0,n.prevDist=[0,0];var S=is(t),E=es(S||"",b,y,g,!0)||[];return n.controlPoses=E,m.borderRadiusState=$a(E,p,b,y).styles.join(" "),c},dragControl:function(t,r){var e=r.datas,n=e.controlPoses;if(!e.isRound||!e.isControl||!n.length)return!1;var i=e.controlIndex,a=O(xr(r),2),o=a[0],s=a[1],u=[o,s],f=nt(u,e.prevDist),l=t.props.maxRoundControls,c=l===void 0?[4,4]:l,d=t.state,v=d.width,p=d.height,h=n[i],g=h.vertical,m=h.horizontal,b=n.map(function(S){var E=S.horizontal,x=S.vertical,_=[E*m*u[0],x*g*u[1]];if(E){if(c[0]===1)return _;if(c[0]<4&&E!==m)return _}else{if(c[1]===0)return _[1]=x*m*u[0]/v*p,_;if(g){if(c[1]===1)return _;if(c[1]<4&&x!==g)return _}}return[0,0]});b[i]=u;var y=n.map(function(S,E){return w(w({},S),{pos:yt(S.pos,b[E])})});return i<4?y.slice(0,i+1).forEach(function(S){S.virtual=!1}):y.slice(4,i+1).forEach(function(S){S.virtual=!1}),e.prevDist=[o,s],ns(t,r,u,f,y)},dragControlEnd:function(t,r){var e=t.state;e.borderRadiusState="";var n=r.datas,i=r.isDouble;if(!n.isRound)return!1;var a=n.isControl,o=n.controlIndex,s=n.isLine,u=n.lineIndex,f=n.controlPoses,l=f.filter(function(m){var b=m.virtual;return b}).length,c=t.props.roundClickable,d=c===void 0?!0:c;if(i&&d){if(a&&(d===!0||d==="control"))mv(f,o);else if(s&&(d===!0||d==="line")){var v=O(Su(t,r),2),p=v[0],h=v[1];hv(f,u,p,h)}l!==f.filter(function(m){var b=m.virtual;return b}).length&&ns(t,r,[0,0],[0,0],f)}var g=nr(t,r,{});return J(t,"onRoundEnd",g),e.borderRadiusState="",g},dragGroupControlStart:function(t,r){var e=this.dragControlStart(t,r);if(!e)return!1;var n=t.moveables,i=t.props.targets,a=vr(t,"roundable",r),o=w({targets:t.props.targets,events:a.map(function(s,u){return w(w({},s),{target:i[u],moveable:n[u],currentTarget:n[u]})})},e);return J(t,"onRoundGroupStart",o),e},dragGroupControl:function(t,r){var e=this.dragControl(t,r);if(!e)return!1;var n=t.moveables,i=t.props.targets,a=vr(t,"roundable",r),o=w({targets:t.props.targets,events:a.map(function(s,u){return w(w(w({},s),{target:i[u],moveable:n[u],currentTarget:n[u]}),jt({borderRadius:e.borderRadius},s))})},e);return J(t,"onRoundGroup",o),o},dragGroupControlEnd:function(t,r){var e=t.moveables,n=t.props.targets,i=vr(t,"roundable",r);ii(t,"onRound",function(s){var u=w({targets:t.props.targets,events:i.map(function(f,l){return w(w(w({},f),{target:n[l],moveable:e[l],currentTarget:e[l]}),jt({borderRadius:s.borderRadius},f))})},s);J(t,"onRoundGroup",u)});var a=this.dragControlEnd(t,r);if(!a)return!1;var o=w({targets:t.props.targets,events:i.map(function(s,u){var f;return w(w({},s),{target:n[u],moveable:e[u],currentTarget:e[u],lastEvent:(f=s.datas)===null||f===void 0?void 0:f.lastEvent})})},a);return J(t,"onRoundGroupEnd",o),o},unset:function(t){t.state.borderRadiusState=""}};function yv(t,r){var e=r?4:3,n=Mt(e),i="matrix".concat(r?"3d":"","(").concat(n.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var bf={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,r){var e=t.state,n=e.is3d,i=e.targetMatrix,a=e.inlineTransform,o=n?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(uu(i,!0),")"),s=!a||a==="none"?o:a;r.datas.startTransforms=yv(s,n)?[]:Br(s)},resetStyle:function(t){var r=t.datas;r.nextStyle={},r.nextTransforms=t.datas.startTransforms,r.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,r){return ct(t,r,{setTransform:function(e){r.datas.startTransforms=zt(e)?e:Br(e)},isPinch:!!r.isPinch})},fillDragParams:function(t,r){return ct(t,r,{isPinch:!!r.isPinch})},dragStart:function(t,r){this.setTransform(t,r),this.resetStyle(r),J(t,"onBeforeRenderStart",this.fillDragStartParams(t,r))},drag:function(t,r){r.datas.startTransforms||this.setTransform(t,r),this.resetStyle(r),J(t,"onBeforeRender",ct(t,r,{isPinch:!!r.isPinch}))},dragEnd:function(t,r){r.datas.startTransforms||(this.setTransform(t,r),this.resetStyle(r)),J(t,"onBeforeRenderEnd",ct(t,r,{isPinch:!!r.isPinch,isDrag:r.isDrag}))},dragGroupStart:function(t,r){var e=this;this.dragStart(t,r);var n=vr(t,"beforeRenderable",r),i=t.moveables,a=n.map(function(o,s){var u=i[s];return e.setTransform(u,o),e.resetStyle(o),e.fillDragStartParams(u,o)});J(t,"onBeforeRenderGroupStart",ct(t,r,{isPinch:!!r.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,r){var e=this;this.drag(t,r);var n=vr(t,"beforeRenderable",r),i=t.moveables,a=n.map(function(o,s){var u=i[s];return e.resetStyle(o),e.fillDragParams(u,o)});J(t,"onBeforeRenderGroup",ct(t,r,{isPinch:!!r.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,r){this.dragEnd(t,r),J(t,"onBeforeRenderGroupEnd",ct(t,r,{isPinch:!!r.isPinch,isDrag:r.isDrag,targets:t.props.targets}))},dragControlStart:function(t,r){return this.dragStart(t,r)},dragControl:function(t,r){return this.drag(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupControlStart:function(t,r){return this.dragGroupStart(t,r)},dragGroupControl:function(t,r){return this.dragGroup(t,r)},dragGroupControlEnd:function(t,r){return this.dragGroupEnd(t,r)}},yf={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,r){J(t,"onRenderStart",ct(t,r,{isPinch:!!r.isPinch}))},drag:function(t,r){J(t,"onRender",this.fillDragParams(t,r))},dragAfter:function(t,r){return this.drag(t,r)},dragEnd:function(t,r){J(t,"onRenderEnd",this.fillDragEndParams(t,r))},dragGroupStart:function(t,r){J(t,"onRenderGroupStart",ct(t,r,{isPinch:!!r.isPinch,targets:t.props.targets}))},dragGroup:function(t,r){var e=this,n=vr(t,"beforeRenderable",r),i=t.moveables,a=n.map(function(o,s){var u=i[s];return e.fillDragParams(u,o)});J(t,"onRenderGroup",ct(t,r,w(w({isPinch:!!r.isPinch,targets:t.props.targets,transform:mn(r),transformObject:{}},jt(bn(r))),{events:a})))},dragGroupEnd:function(t,r){var e=this,n=vr(t,"beforeRenderable",r),i=t.moveables,a=n.map(function(o,s){var u=i[s];return e.fillDragEndParams(u,o)});J(t,"onRenderGroupEnd",ct(t,r,w({isPinch:!!r.isPinch,isDrag:r.isDrag,targets:t.props.targets,events:a,transformObject:{},transform:mn(r)},jt(bn(r)))))},dragControlStart:function(t,r){return this.dragStart(t,r)},dragControl:function(t,r){return this.drag(t,r)},dragControlAfter:function(t,r){return this.dragAfter(t,r)},dragControlEnd:function(t,r){return this.dragEnd(t,r)},dragGroupControlStart:function(t,r){return this.dragGroupStart(t,r)},dragGroupControl:function(t,r){return this.dragGroup(t,r)},dragGroupControlEnd:function(t,r){return this.dragGroupEnd(t,r)},fillDragParams:function(t,r){var e={};return pe(kn(r)||[]).forEach(function(n){e[n.name]=n.functionValue}),ct(t,r,w({isPinch:!!r.isPinch,transformObject:e,transform:mn(r)},jt(bn(r))))},fillDragEndParams:function(t,r){var e={};return pe(kn(r)||[]).forEach(function(n){e[n.name]=n.functionValue}),ct(t,r,w({isPinch:!!r.isPinch,isDrag:r.isDrag,transformObject:e,transform:mn(r)},jt(bn(r))))}};function Ne(t,r,e,n,i,a,o){a.clientDistX=a.distX,a.clientDistY=a.distY;var s=i==="Start",u=i==="End",f=i==="After",l=t.state.target,c=a.isRequest,d=n.indexOf("Control")>-1;if(!l||s&&d&&!c&&t.areaElement===a.inputEvent.target)return!1;var v=q([],O(r),!1);if(c){var p=a.requestAble;v.some(function(T){return T.name===p})||v.push.apply(v,q([],O(t.props.ables.filter(function(T){return T.name===p})),!1))}if(!v.length||v.every(function(T){return T.dragRelation}))return!1;var h=a.inputEvent,g;u&&h&&(g=document.elementFromPoint(a.clientX,a.clientY)||h.target);var m=!1,b=function(){var T;m=!0,(T=a.stop)===null||T===void 0||T.call(a)},y=s&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());y&&t.updateRect(i,!0,!1);var S=a.datas,E=d?"controlGesto":"targetGesto",x=t[E],_=function(T,R,A){if(!(R in T)||x!==t[E])return!1;var P=T.name,L=S[P]||(S[P]={});if(s&&(L.isEventStart=!A||!T[A]||T[A](t,a)),!L.isEventStart)return!1;var k=T[R](t,w(w({},a),{stop:b,datas:L,originalDatas:S,inputTarget:g}));return t._emitter.off(),s&&k===!1&&(L.isEventStart=!1),k};y&&v.forEach(function(T){T.unset&&T.unset(t)}),_(bf,"drag".concat(n).concat(i));var C=0,D=0;e.forEach(function(T){if(m)return!1;var R="".concat(T).concat(n).concat(i),A="".concat(T).concat(n,"Condition");i===""&&!c&&sf(t.state,a);var P=v.filter(function(B){return B[R]});P=P.filter(function(B,H){return B.name&&P.indexOf(B)===H});var L=P.filter(function(B){return _(B,R,A)}),k=L.length;m&&++C,k&&++D,!m&&s&&P.length&&!k&&(C+=P.filter(function(B){var H=B.name,Y=S[H];return Y.isEventStart?B.dragRelation!=="strong":!1}).length?1:0)}),(!f||D)&&_(yf,"drag".concat(n).concat(i));var M=x!==t[E]||C===e.length;if((u||m||M)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(T){T.state.gestos={}}),v.forEach(function(T){T.unset&&T.unset(t)})),s&&!M&&!c&&D&&t.props.preventDefault&&(a==null||a.preventDefault()),t.isUnmounted||M)return!1;if(!s&&D&&!o||u){var I=t.props.flushSync||Uu;I(function(){t.updateRect(u?i:"",!0,!1),t.forceUpdate()})}return!s&&!u&&!f&&D&&!o&&Ne(t,r,e,n,i+"After",a),!0}function ca(t){return function(r){var e,n=r.inputEvent.target,i=t.areaElement,a=t._dragTarget;return!a||!((e=t.controlGesto)===null||e===void 0)&&e.isFlag()?!1:n===a||a.contains(n)||n===i||!t.isMoveableElement(n)&&!t.controlBox.contains(n)||Gt(n,"moveable-area")||Gt(n,"moveable-padding")||Gt(n,"moveable-edgeDraggable")}}function xf(t,r,e){var n=t.controlBox,i=[],a=t.props,o=a.dragArea,s=t.state.target,u=a.dragTarget;return i.push(n),(!o||u)&&i.push(r),!o&&u&&s&&r!==s&&a.dragTargetSelf&&i.push(s),Za(t,i,"targetAbles",e,{dragStart:ca(t),pinchStart:ca(t)})}function Za(t,r,e,n,i){i===void 0&&(i={});var a=e==="targetAbles",o=t.props,s=o.pinchOutside,u=o.pinchThreshold,f=o.preventClickEventOnDrag,l=o.preventClickDefault,c=o.checkInput,d=o.dragFocusedInput,v=o.preventDefault,p=v===void 0?!0:v,h=o.dragContainer,g=br(h,!0),m={preventDefault:p,preventRightClick:!0,preventWheelClick:!0,container:g||Ar(t.getControlBoxElement()),pinchThreshold:u,pinchOutside:s,preventClickEventOnDrag:a?f:!1,preventClickEventOnDragStart:a?l:!1,preventClickEventByCondition:a?null:function(S){return t.controlBox.contains(S.target)},checkInput:a?c:!1,dragFocusedInput:d},b=new jc(r,m),y=n==="Control";return["drag","pinch"].forEach(function(S){["Start","","End"].forEach(function(E){b.on("".concat(S).concat(E),function(x){var _,C=x.eventType,D=S==="drag"&&x.isPinch;if(i[C]&&!i[C](x)){x.stop();return}if(!D){var M=S==="drag"?[S]:["drag",S],I=q([],O(t[e]),!1),T=Ne(t,I,M,n,E,x);T?(t.props.stopPropagation||E==="Start"&&y)&&((_=x==null?void 0:x.inputEvent)===null||_===void 0||_.stopPropagation()):x.stop()}})})}),b}var xv=function(){function t(r,e,n){var i=this;this.target=r,this.moveable=e,this.eventName=n,this.ables=[],this._onEvent=function(a){var o=i.eventName,s=i.moveable;s.state.disableNativeEvent||i.ables.forEach(function(u){u[o](s,{inputEvent:a})})},r.addEventListener(n.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(r){this.ables=r},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function Sv(t,r,e,n){var i;e===void 0&&(e=r);var a=Ou(t,r),o=a.matrixes,s=a.is3d,u=a.targetMatrix,f=a.transformOrigin,l=a.targetOrigin,c=a.offsetContainer,d=a.hasFixed,v=a.zoom,p=kd(c,e),h=p.matrixes,g=p.is3d,m=p.offsetContainer,b=p.zoom,y=n||g||s,S=y?4:3,E=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,x=u,_=Mt(S),C=Mt(S),D=Mt(S),M=Mt(S),I=o.length,T=h.map(function(H){return w(w({},H),{matrix:H.matrix?q([],O(H.matrix),!1):void 0})}).reverse();o.reverse(),!s&&y&&(x=gr(x,3,4),sa(o)),!g&&y&&sa(T),T.forEach(function(H){C=Et(C,H.matrix,S)});var R=e||Gr(t),A=((i=T[0])===null||i===void 0?void 0:i.target)||Ve(R,R,!0).offsetParent,P=T.slice(1).reduce(function(H,Y){return Et(H,Y.matrix,S)},Mt(S));o.forEach(function(H,Y){if(I-2===Y&&(D=_.slice()),I-1===Y&&(M=_.slice()),!H.matrix){var G=o[Y+1],K=Gp(H,G,A,S,Et(P,_,S));H.matrix=Ur(K,S)}_=Et(_,H.matrix,S)});var L=!E&&s;x||(x=Mt(L?4:3));var k=ni(E&&x.length===16?gr(x,4,3):x,L),B=C;return C=ou(C,S,S),{hasZoom:v!==1||b!==1,hasFixed:d,matrixes:o,rootMatrix:C,originalRootMatrix:B,beforeMatrix:D,offsetMatrix:M,allMatrix:_,targetMatrix:x,targetTransform:k,inlineTransform:t.style.transform,transformOrigin:f,targetOrigin:l,is3d:y,offsetContainer:c,offsetRootContainer:m}}function _v(t,r,e,n){e===void 0&&(e=r);var i=0,a=0,o=0,s={},u=Zu(t);if(t&&(i=u.offsetWidth,a=u.offsetHeight),t){var f=Sv(t,r,e,n),l=fe(f.allMatrix,f.transformOrigin,i,a);s=w(w({},f),l);var c=fe(f.allMatrix,[50,50],100,100);o=Qu([c.pos1,c.pos2],c.direction)}var d=n?4:3;return w(w(w({hasZoom:!1,width:i,height:a,rotation:o},u),{originalRootMatrix:Mt(d),rootMatrix:Mt(d),beforeMatrix:Mt(d),offsetMatrix:Mt(d),allMatrix:Mt(d),targetMatrix:Mt(d),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!n,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),s)}function da(t,r,e,n,i,a){a===void 0&&(a=[]);var o=1,s=[0,0],u=xn(),f=xn(),l=xn(),c=xn(),d=[0,0],v={},p=_v(r,e,i,!0);if(r){var h=er(r);a.forEach(function(T){v[T]=h(T)});var g=p.is3d?4:3,m=fe(p.offsetMatrix,yt(p.transformOrigin,su(p.targetMatrix,g)),p.width,p.height);o=m.direction,s=yt(m.origin,[m.left-p.left,m.top-p.top]),c=Ge(p.offsetRootContainer);var b=Ve(n,n,!0).offsetParent||p.offsetRootContainer;if(p.hasZoom){var y=fe(Et(p.originalRootMatrix,p.allMatrix),p.transformOrigin,p.width,p.height),S=fe(p.originalRootMatrix,Ln(er(b)("transformOrigin")).map(function(T){return parseFloat(T)}),b.offsetWidth,b.offsetHeight);if(u=Mi(y,c),l=Mi(S,c,b,!0),t){var E=y.left,x=y.top;f=Mi({left:E,top:x,bottom:x,right:x},c)}}else{u=Ge(r),l=zd(b),t&&(f=Ge(t));var _=l.left,C=l.top,D=l.clientLeft,M=l.clientTop,I=[u.left-_,u.top-C];d=nt(me(p.rootMatrix,I,4),[D+p.left,M+p.top])}}return w({targetClientRect:u,containerClientRect:l,moveableClientRect:f,rootContainerClientRect:c,beforeDirection:o,beforeOrigin:s,originalBeforeOrigin:s,target:r,style:v,offsetDelta:d},p)}function as(t){var r=t.pos1,e=t.pos2,n=t.pos3,i=t.pos4;if(!r||!e||!n||!i)return null;var a=Kr([r,e,n,i]),o=[a.minX,a.minY],s=nt(t.origin,o);return r=nt(r,o),e=nt(e,o),n=nt(n,o),i=nt(i,o),w(w({},t),{left:t.left,top:t.top,posDelta:o,pos1:r,pos2:e,pos3:n,pos4:i,origin:s,beforeOrigin:s,isPersisted:!0})}var be=function(t){an(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.state=w({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},da(null)),e.renderState={},e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isMoveableMounted=!1,e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._emitter=new Kn,e._prevOriginalDragTarget=null,e._originalDragTarget=null,e._prevDragTarget=null,e._dragTarget=null,e._prevPropTarget=null,e._propTarget=null,e._prevDragArea=!1,e._isPropTargetChanged=!1,e._hasFirstTarget=!1,e._reiszeObserver=null,e._observerId=0,e._mutationObserver=null,e._rootContainer=null,e._viewContainer=null,e._viewClassNames=[],e._store={},e.checkUpdateRect=function(){if(!e.isDragging()){var n=e.props.parentMoveable;if(n){n.checkUpdateRect();return}zl(e._observerId),e._observerId=ks(function(){e.isDragging()||e.updateRect()})}},e._onPreventClick=function(n){n.stopPropagation(),n.preventDefault()},e}return r.prototype.render=function(){var e=this.props,n=this.getState(),i=e.parentPosition,a=e.className,o=e.target,s=e.zoom,u=e.cspNonce,f=e.translateZ,l=e.cssStyled,c=e.groupable,d=e.linePadding,v=e.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var p=O(i||[0,0],2),h=p[0],g=p[1],m=n.left,b=n.top,y=n.target,S=n.direction,E=n.hasFixed,x=n.offsetDelta,_=e.targets,C=this.isDragging(),D={};this.getEnabledAbles().forEach(function(P){D["data-able-".concat(P.name.toLowerCase())]=!0});var M=this._getAbleClassName(),I=_&&_.length&&(y||c)||o||!this._hasFirstTarget&&this.state.isPersisted,T=this.controlBox||this.props.firstRenderState||this.props.persistData,R=[m-h,b-g];!c&&e.useAccuratePosition&&(R[0]+=x[0],R[1]+=x[1]);var A={position:E?"fixed":"absolute",display:I?"block":"none",visibility:T?"visible":"hidden",transform:"translate3d(".concat(R[0],"px, ").concat(R[1],"px, ").concat(f,")"),"--zoom":s,"--zoompx":"".concat(s,"px")};return d&&(A["--moveable-line-padding"]=d),v&&(A["--moveable-control-padding"]=v),pr(l,w({cspNonce:u,ref:_r(this,"controlBox"),className:"".concat(et("control-box",S===-1?"reverse":"",C?"dragging":"")," ").concat(M," ").concat(a)},D,{onClick:this._onPreventClick,style:A}),this.renderAbles(),this._renderLines())},r.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var e=this.props,n=e.parentMoveable,i=e.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!n&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},r.prototype.componentDidUpdate=function(e){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(e)},r.prototype.componentWillUnmount=function(){var e,n;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(e=this._reiszeObserver)===null||e===void 0||e.disconnect(),(n=this._mutationObserver)===null||n===void 0||n.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),oe(this,!1),oe(this,!0);var a=this.events;for(var o in a){var s=a[o];s&&s.destroy()}},r.prototype.getTargets=function(){var e=this.props.target;return e?[e]:[]},r.prototype.getAble=function(e){var n=this.props.ables||[];return tr(n,function(i){return i.name===e})},r.prototype.getContainer=function(){var e=this.props,n=e.parentMoveable,i=e.wrapperMoveable,a=e.container;return a||i&&i.getContainer()||n&&n.getContainer()||this.controlBox.parentElement},r.prototype.getControlBoxElement=function(){return this.controlBox},r.prototype.getDragElement=function(){return this._dragTarget},r.prototype.isMoveableElement=function(e){var n;return e&&(((n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"class"))||"").indexOf(Aa)>-1},r.prototype.dragStart=function(e){var n=this.targetGesto,i=this.controlGesto;return n&&ca(this)({inputEvent:e})?n.isFlag()||n.triggerDragStart(e):i&&this.isMoveableElement(e.target)&&(i.isFlag()||i.triggerDragStart(e)),this},r.prototype.hitTest=function(e){var n=this.state,i=n.target,a=n.pos1,o=n.pos2,s=n.pos3,u=n.pos4,f=n.targetClientRect;if(!i)return 0;var l;if(Se(e)){var c=e.getBoundingClientRect();l={left:c.left,top:c.top,width:c.width,height:c.height}}else l=w({width:0,height:0},e);var d=l.left,v=l.top,p=l.width,h=l.height,g=Ro([a,o,u,s],f),m=Hc(g,[[d,v],[d+p,v],[d+p,v+h],[d,v+h]]),b=cu(g);return!m||!b?0:Math.min(100,m/b*100)},r.prototype.isInside=function(e,n){var i=this.state,a=i.target,o=i.pos1,s=i.pos2,u=i.pos3,f=i.pos4,l=i.targetClientRect;return a?Ui([e,n],Ro([o,s,f,u],l)):!1},r.prototype.updateRect=function(e,n,i){i===void 0&&(i=!0);var a=this.props,o=!a.parentPosition&&!a.wrapperMoveable;o&&he(!0);var s=a.parentMoveable,u=this.state,f=u.target||a.target,l=this.getContainer(),c=s?s._rootContainer:this._rootContainer,d=da(this.controlBox,f,l,l,c||l,this._getRequestStyles());if(!f&&this._hasFirstTarget&&a.persistData){var v=as(a.persistData);for(var p in v)d[p]=v[p]}o&&he(),this.updateState(d,s?!1:i)},r.prototype.isDragging=function(e){var n,i,a=this.targetGesto,o=this.controlGesto;if(a!=null&&a.isFlag()){if(!e)return!0;var s=a.getEventData();return!!(!((n=s[e])===null||n===void 0)&&n.isEventStart)}if(o!=null&&o.isFlag()){if(!e)return!0;var s=o.getEventData();return!!(!((i=s[e])===null||i===void 0)&&i.isEventStart)}return!1},r.prototype.updateTarget=function(e){this.updateRect(e,!0)},r.prototype.getRect=function(){var e=this.state,n=fr(this.state),i=O(n,4),a=i[0],o=i[1],s=i[2],u=i[3],f=or(n),l=e.width,c=e.height,d=f.width,v=f.height,p=f.left,h=f.top,g=[e.left,e.top],m=yt(g,e.origin),b=yt(g,e.beforeOrigin),y=e.transformOrigin;return{width:d,height:v,left:p,top:h,pos1:a,pos2:o,pos3:s,pos4:u,offsetWidth:l,offsetHeight:c,beforeOrigin:b,origin:m,transformOrigin:y,rotation:this.getRotation()}},r.prototype.getManager=function(){return this},r.prototype.stopDrag=function(e){if(!e||e==="target"){var n=this.targetGesto;(n==null?void 0:n.isIdle())===!1&&ua(this,!1),n==null||n.stop()}if(!e||e==="control"){var n=this.controlGesto;(n==null?void 0:n.isIdle())===!1&&ua(this,!0),n==null||n.stop()}},r.prototype.getRotation=function(){var e=this.state,n=e.pos1,i=e.pos2,a=e.direction;return Yp(n,i,a)},r.prototype.request=function(e,n,i){n===void 0&&(n={});var a=this,o=a.props,s=o.parentMoveable||o.wrapperMoveable||a,u=s.props.ables,f=o.groupable,l=tr(u,function(m){return m.name===e});if(this.isDragging()||!l||!l.request)return{request:function(){return this},requestEnd:function(){return this}};var c=l.request(a),d=i||n.isInstant,v=c.isControl?"controlAbles":"targetAbles",p="".concat(f?"Group":"").concat(c.isControl?"Control":""),h=q([],O(s[v]),!1),g={request:function(m){return Ne(a,h,["drag"],p,"",w(w({},c.request(m)),{requestAble:e,isRequest:!0}),d),g},requestEnd:function(){return Ne(a,h,["drag"],p,"End",w(w({},c.requestEnd()),{requestAble:e,isRequest:!0}),d),g}};return Ne(a,h,["drag"],p,"Start",w(w({},c.requestStart(n)),{requestAble:e,isRequest:!0}),d),d?g.request(n).requestEnd():g},r.prototype.getMoveables=function(){return[this]},r.prototype.destroy=function(){this.componentWillUnmount()},r.prototype.updateRenderPoses=function(){var e=this.getState(),n=this.props,i=n.padding,a=e.originalBeforeOrigin,o=e.transformOrigin,s=e.allMatrix,u=e.is3d,f=e.pos1,l=e.pos2,c=e.pos3,d=e.pos4,v=e.left,p=e.top,h=e.isPersisted;if(!i){e.renderPoses=[f,l,c,d];return}var g=cf(i),m=g.left,b=g.top,y=g.bottom,S=g.right,E=u?4:3,x=[];h?x=o:this.controlBox&&n.groupable?x=a:x=yt(a,[v,p]);var _=Bn(E,Ur(x.map(function(C){return-C}),E),s,Ur(o,E));e.renderPoses=[_n(_,f,[-m,-b],E),_n(_,l,[S,-b],E),_n(_,c,[-m,y],E),_n(_,d,[S,y],E)]},r.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var e=this.props,n=e.target,i=e.container,a=e.parentMoveable,o=this.state,s=o.target,u=o.container;if(!(!s&&!n)){this.updateAbles();var f=!fa(s,n),l=f||!fa(u,i);if(l){var c=i||this.controlBox;c&&this.unsetAbles(),this.updateState({target:n,container:i}),!a&&c&&this.updateRect("End",!1,!1),this._isPropTargetChanged=f}}},r.prototype.waitToChangeTarget=function(){return new Promise(function(){})},r.prototype.triggerEvent=function(e,n){var i=this.props;if(this._emitter.trigger(e,n),i.parentMoveable&&n.isRequest&&!n.isRequestChild)return i.parentMoveable.triggerEvent(e,n,!0);var a=i[e];return a&&a(n)},r.prototype.useCSS=function(e,n){var i=this.props.customStyledMap,a=e+n;return i[a]||(i[a]=vu(e,n)),i[a]},r.prototype.getState=function(){var e,n=this.props;(n.target||!((e=n.targets)===null||e===void 0)&&e.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=n.persistData,o=n.firstRenderState;if(o&&!i)return o;if(!this._hasFirstTarget&&a){var s=as(a);if(s)return this.updateState(s,!1),this.state}return this.state.isPersisted=!1,this.state},r.prototype.updateSelectors=function(){},r.prototype.unsetAbles=function(){var e=this;this.targetAbles.forEach(function(n){n.unset&&n.unset(e)})},r.prototype.updateAbles=function(e,n){e===void 0&&(e=this.props.ables),n===void 0&&(n="");var i=this.props,a=i.triggerAblesSimultaneously,o=this.getEnabledAbles(e),s="drag".concat(n,"Start"),u="pinch".concat(n,"Start"),f="drag".concat(n,"ControlStart"),l=Sn(o,[s,u],a),c=Sn(o,[f],a);this.enabledAbles=o,this.targetAbles=l,this.controlAbles=c},r.prototype.updateState=function(e,n){if(n){if(this.isUnmounted)return;this.setState(e)}else{var i=this.state;for(var a in e)i[a]=e[a]}},r.prototype.getEnabledAbles=function(e){e===void 0&&(e=this.props.ables);var n=this.props;return e.filter(function(i){return i&&(i.always&&n[i.name]!==!1||n[i.name])})},r.prototype.renderAbles=function(){var e=this,n=this.props,i=n.triggerAblesSimultaneously,a={createElement:pr};return this.renderState={},Wp(of(Sn(this.getEnabledAbles(),["render"],i).map(function(o){var s=o.render;return s(e,a)||[]})).filter(function(o){return o}),function(o){var s=o.key;return s}).map(function(o){return o[0]})},r.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},r.prototype._getRequestStyles=function(){var e=this.getEnabledAbles().reduce(function(n,i){var a,o,s=(o=(a=i.requestStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return q(q([],O(n),!1),O(s),!1)},q([],O(this.props.requestStyles||[]),!1));return e},r.prototype._updateObserver=function(e){this._updateResizeObserver(e),this._updateMutationObserver(e)},r.prototype._updateEvents=function(){var e=this.controlBox,n=this.targetAbles.length,i=this.controlAbles.length,a=this._dragTarget,o=!n&&this.targetGesto||this._isTargetChanged(!0);o&&(oe(this,!1),this.updateState({gestos:{}})),i||oe(this,!0),a&&n&&!this.targetGesto&&(this.targetGesto=xf(this,a,"")),!this.controlGesto&&i&&(this.controlGesto=Za(this,e,"controlAbles","Control"))},r.prototype._updateTargets=function(){var e=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=e.dragArea,this._propTarget=e.target,this._originalDragTarget=e.dragTarget||e.target,this._dragTarget=br(this._originalDragTarget,!0)},r.prototype._renderLines=function(){var e=this.props,n=e,i=n.zoom,a=n.hideDefaultLines,o=n.hideChildMoveableDefaultLines,s=n.parentMoveable;if(a||s&&o)return[];var u=this.getState().renderPoses,f={createElement:pr};return[[0,1],[1,3],[3,2],[2,0]].map(function(l,c){var d=O(l,2),v=d[0],p=d[1];return Ye(f,"",u[v],u[p],i,"render-line-".concat(c))})},r.prototype._isTargetChanged=function(e){var n=this.props,i=n.dragTarget||n.target,a=this._prevOriginalDragTarget,o=this._prevDragArea,s=n.dragArea,u=!s&&a!==i,f=(e||s)&&o!==s;return u||f||this._prevPropTarget!=this._propTarget},r.prototype._updateNativeEvents=function(){var e=this,n=this.props,i=n.dragArea?this.areaElement:this.state.target,a=this.events,o=Or(a);if(this._isTargetChanged())for(var s in a){var u=a[s];u&&u.destroy(),a[s]=null}if(i){var f=this.enabledAbles;o.forEach(function(l){var c=Sn(f,[l]),d=c.length>0,v=a[l];if(!d){v&&(v.destroy(),a[l]=null);return}v||(v=new xv(i,e,l),a[l]=v),v.setAbles(c)})}},r.prototype._checkUpdateRootContainer=function(){var e=this.props.rootContainer;!this._rootContainer&&e&&(this._rootContainer=br(e,!0))},r.prototype._checkUpdateViewContainer=function(){var e=this.props.viewContainer;!this._viewContainer&&e&&(this._viewContainer=br(e,!0));var n=this._viewContainer;n&&this._changeAbleViewClassNames(q(q([],O(this._getAbleViewClassNames()),!1),[this.isDragging()?Zp:""],!1))},r.prototype._changeAbleViewClassNames=function(e){var n=this._viewContainer,i=af(e.filter(Boolean),function(f){return f}).map(function(f){var l=O(f,1),c=l[0];return c}),a=this._viewClassNames,o=Qe(a,i),s=o.removed,u=o.added;s.forEach(function(f){Ls(n,a[f])}),u.forEach(function(f){Ns(n,i[f])}),this._viewClassNames=i},r.prototype._getAbleViewClassNames=function(){var e=this;return(this.getEnabledAbles().map(function(n){var i;return((i=n.viewClassName)===null||i===void 0?void 0:i.call(n,e))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},r.prototype._getAbleClassName=function(e){var n=this;e===void 0&&(e="");var i=this.getEnabledAbles(),a=this.targetGesto,o=this.controlGesto,s=a!=null&&a.isFlag()?a.getEventData():{},u=o!=null&&o.isFlag()?o.getEventData():{};return i.map(function(f){var l,c,d,v=f.name,p=((l=f.className)===null||l===void 0?void 0:l.call(f,n))||"";return(!((c=s[v])===null||c===void 0)&&c.isEventStart||!((d=u[v])===null||d===void 0)&&d.isEventStart)&&(p+=" ".concat(et("".concat(v).concat(e,"-dragging")))),p.trim()}).filter(Boolean).join(" ")},r.prototype._updateResizeObserver=function(e){var n,i=this.props,a=i.target,o=Ar(this.getControlBoxElement());if(!o.ResizeObserver||!a||!i.useResizeObserver){(n=this._reiszeObserver)===null||n===void 0||n.disconnect();return}if(!(e.target===a&&this._reiszeObserver)){var s=new o.ResizeObserver(this.checkUpdateRect);s.observe(a,{box:"border-box"}),this._reiszeObserver=s}},r.prototype._updateMutationObserver=function(e){var n=this,i,a=this.props,o=a.target,s=Ar(this.getControlBoxElement());if(!s.MutationObserver||!o||!a.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(e.target===o&&this._mutationObserver)){var u=new s.MutationObserver(function(f){var l,c;try{for(var d=id(f),v=d.next();!v.done;v=d.next()){var p=v.value;p.type==="attributes"&&p.attributeName==="style"&&n.checkUpdateRect()}}catch(h){l={error:h}}finally{try{v&&!v.done&&(c=d.return)&&c.call(d)}finally{if(l)throw l.error}}});u.observe(o,{attributes:!0}),this._mutationObserver=u}},r.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:Uu,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},r}(js),Qa={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,r){var e,n=t.props,i=n.targets||[],a=t.getState(),o=a.left,s=a.top,u=a.isPersisted,f=n.zoom||1,l=t.renderGroupRects,c=((e=n.persistData)===null||e===void 0?void 0:e.children)||[];u?i=c.map(function(){return null}):c=[];var d=se(t,"parentPosition",[o,s],function(p){return p.join(",")}),v=se(t,"requestStyles",t.getRequestChildStyles(),function(p){return p.join(",")});return t.moveables=t.moveables.slice(0,i.length),q(q([],O(i.map(function(p,h){return r.createElement(be,{key:"moveable"+h,ref:Ps(t,"moveables",h),target:p,origin:!1,requestStyles:v,cssStyled:n.cssStyled,customStyledMap:n.customStyledMap,useResizeObserver:n.useResizeObserver,useMutationObserver:n.useMutationObserver,hideChildMoveableDefaultLines:n.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[o,s],persistData:c[h],zoom:f})})),!1),O(of(l.map(function(p,h){var g=p.pos1,m=p.pos2,b=p.pos3,y=p.pos4,S=[g,m,b,y];return[[0,1],[1,3],[3,2],[2,0]].map(function(E,x){var _=O(E,2),C=_[0],D=_[1];return Ye(r,"",nt(S[C],d),nt(S[D],d),f,"group-rect-".concat(h,"-").concat(x))})}))),!1)}},Ev=on("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,r){r.datas.inputTarget=r.inputEvent&&r.inputEvent.target},dragEnd:function(t,r){var e=t.props.target,n=r.inputEvent,i=r.inputTarget,a=t.isMoveableElement(i),o=!a&&t.controlBox.contains(i);if(!(!n||!i||r.isDrag||t.isMoveableElement(i)||o)){var s=e.contains(i);J(t,"onClick",ct(t,r,{isDouble:r.isDouble,inputTarget:i,isTarget:e===i,moveableTarget:t.props.target,containsTarget:s}))}},dragGroupEnd:function(t,r){var e=r.inputEvent,n=r.inputTarget;if(!(!e||!n||r.isDrag||t.isMoveableElement(n)||r.datas.inputTarget===n)){var i=t.props.targets,a=i.indexOf(n),o=a>-1,s=!1;a===-1&&(a=wr(i,function(u){return u.contains(n)}),s=a>-1),J(t,"onClickGroup",ct(t,r,{isDouble:r.isDouble,targets:i,inputTarget:n,targetIndex:a,isTarget:o,containsTarget:s,moveableTarget:i[a]}))}},dragControlEnd:function(t,r){this.dragEnd(t,r)},dragGroupControlEnd:function(t,r){this.dragEnd(t,r)}});function te(t){var r=t.originalDatas.draggable;return r||(t.originalDatas.draggable={},r=t.originalDatas.draggable),w(w({},t),{datas:r})}var Cv=on("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,r){var e=t.props,n=e.edgeDraggable;return n?Tu(r,"edgeDraggable",n,t.getState().renderPoses,e.zoom):[]},dragCondition:function(t,r){var e,n=t.props,i=(e=r.inputEvent)===null||e===void 0?void 0:e.target;return!n.edgeDraggable||!i?!1:!n.draggable&&Gt(i,et("direction"))&&Gt(i,et("edge"))&&Gt(i,et("edgeDraggable"))},dragStart:function(t,r){return Vt.dragStart(t,te(r))},drag:function(t,r){return Vt.drag(t,te(r))},dragEnd:function(t,r){return Vt.dragEnd(t,te(r))},dragGroupCondition:function(t,r){var e,n=t.props,i=(e=r.inputEvent)===null||e===void 0?void 0:e.target;return!n.edgeDraggable||!i?!1:!n.draggable&&Gt(i,et("direction"))&&Gt(i,et("line"))},dragGroupStart:function(t,r){return Vt.dragGroupStart(t,te(r))},dragGroup:function(t,r){return Vt.dragGroup(t,te(r))},dragGroupEnd:function(t,r){return Vt.dragGroupEnd(t,te(r))},unset:function(t){return Vt.unset(t)}}),Sf={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},to=[bf,vf,Mp,jp,Vt,Cv,ia,Up,$p,cp,rv,ev,Qp,vv,pv,bv,Qa,Sf,Ev,pf,yf],Dv=to.reduce(function(t,r){return(r.events||[]).forEach(function(e){Gs(t,e)}),t},[]),wv=to.reduce(function(t,r){return(r.props||[]).forEach(function(e){Gs(t,e)}),t},[]);function os(t,r){var e=O(t,3),n=e[0],i=e[1],a=e[2];return(n*r[0]+i*r[1]+a)/Math.sqrt(n*n+i*i)}function Dn(t,r){var e=O(t,2),n=e[0],i=e[1];return-n*r[0]-i*r[1]}function ss(t,r){return Math.max.apply(Math,q([],O(t.map(function(e){var n=O(e,4),i=n[0],a=n[1],o=n[2],s=n[3];return Math.max(i[r],a[r],o[r],s[r])})),!1))}function us(t,r){return Math.min.apply(Math,q([],O(t.map(function(e){var n=O(e,4),i=n[0],a=n[1],o=n[2],s=n[3];return Math.min(i[r],a[r],o[r],s[r])})),!1))}function Ov(t,r){var e,n,i,a=[0,0],o=[0,0],s=[0,0],u=[0,0],f=0,l=0;if(!t.length)return{pos1:a,pos2:o,pos3:s,pos4:u,minX:0,minY:0,maxX:0,maxY:0,width:f,height:l,rotation:r};var c=ft(r,Ut);if(c%90){var d=c/180*Math.PI,v=Math.tan(d),p=-1/v,h=[ta,Io],g=[[0,0],[0,0]],m=[ta,Io],b=[[0,0],[0,0]];t.forEach(function($){$.forEach(function(W){var j=os([-v,1,0],W),X=os([-p,1,0],W);h[0]>j&&(g[0]=W,h[0]=j),h[1]<j&&(g[1]=W,h[1]=j),m[0]>X&&(b[0]=W,m[0]=X),m[1]<X&&(b[1]=W,m[1]=X)})});var y=O(g,2),S=y[0],E=y[1],x=O(b,2),_=x[0],C=x[1],D=[-v,1,Dn([-v,1],S)],M=[-v,1,Dn([-v,1],E)],I=[-p,1,Dn([-p,1],_)],T=[-p,1,Dn([-p,1],C)];e=O([[D,I],[D,T],[M,I],[M,T]].map(function($){var W=O($,2),j=W[0],X=W[1];return Pa(j,X)[0]}),4),a=e[0],o=e[1],s=e[2],u=e[3],f=m[1]-m[0],l=h[1]-h[0]}else{var R=us(t,0),A=us(t,1),P=ss(t,0),L=ss(t,1);if(a=[R,A],o=[P,A],s=[R,L],u=[P,L],f=P-R,l=L-A,c%180){var k=[s,a,u,o];n=O(k,4),a=n[0],o=n[1],s=n[2],u=n[3],f=L-A,l=P-R}}if(c%360>180){var k=[u,s,o,a];i=O(k,4),a=i[0],o=i[1],s=i[2],u=i[3]}var B=Kr([a,o,s,u]),H=B.minX,Y=B.minY,G=B.maxX,K=B.maxY;return{pos1:a,pos2:o,pos3:s,pos4:u,width:f,height:l,minX:H,minY:Y,maxX:G,maxY:K,rotation:r}}function _f(t,r){var e=r.map(function(n){if(zt(n)){var i=_f(t,n),a=i.length;return a>1?i:a===1?i[0]:null}else{var o=tr(t,function(s){var u=s.manager;return u.props.target===n});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return e.length===1&&zt(e[0])?e[0]:e}var Mv=function(t){an(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.differ=new lu,e.moveables=[],e.transformOrigin="50% 50%",e.renderGroupRects=[],e._targetGroups=[],e._hasFirstTargets=!1,e}return r.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},r.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},r.prototype.getTargets=function(){return this.props.targets},r.prototype.updateRect=function(e,n,i){var a;i===void 0&&(i=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;he(!0),this.moveables.forEach(function(U){U.updateRect(e,!1,!1)});var s=this.props,u=this.moveables,f=o.target||s.target,l=u.map(function(U){return{finded:!1,manager:U}}),c=this.props.targetGroups||[],d=_f(l,c),v=s.useDefaultGroupRotate;d.push.apply(d,q([],O(l.filter(function(U){var it=U.finded;return!it}).map(function(U){var it=U.manager;return it})),!1));var p=[],h=!n||e!==""&&s.updateGroup,g=s.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=(a=s.persistData)===null||a===void 0?void 0:a.rotation;m!=null&&(g=m)}function b(U,it,rt){var Q=U.map(function(xt){if(zt(xt)){var dt=b(xt,it),mt=[dt.pos1,dt.pos2,dt.pos3,dt.pos4];return p.push(dt),{poses:mt,rotation:dt.rotation}}else return{poses:fr(xt.state),rotation:xt.getRotation()}}),Z=Q.map(function(xt){var dt=xt.rotation;return dt}),ht=0,ot=Z[0],st=Z.every(function(xt){return Math.abs(ot-xt)<.1});h?ht=!v&&st?ot:g:ht=!v&&!rt&&st?ot:it;var ut=Q.map(function(xt){var dt=xt.poses;return dt}),St=Ov(ut,ht);return St}var y=b(d,this.rotation,!0);h&&(this.rotation=y.rotation,this.transformOrigin=s.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=c,this.renderGroupRects=p;var S=this.transformOrigin,E=this.rotation,x=this.scale,_=y.width,C=y.height,D=y.minX,M=y.minY,I=Vp([[0,0],[_,0],[0,C],[_,C]],Ka(S,_,C),this.rotation/180*Math.PI),T=Kr(I.result),R=T.minX,A=T.minY,P=" rotate(".concat(E,"deg)")+" scale(".concat(ar(x[0]),", ").concat(ar(x[1]),")"),L="translate(".concat(-R,"px, ").concat(-A,"px)").concat(P);this.controlBox.style.transform="translate3d(".concat(D,"px, ").concat(M,"px, ").concat(this.props.translateZ||0,")"),f.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(S,";")+"width:".concat(_,"px;height:").concat(C,"px;")+"transform: ".concat(L),o.width=_,o.height=C;var k=this.getContainer(),B=da(this.controlBox,f,this.controlBox,this.getContainer(),this._rootContainer||k,[]),H=[B.left,B.top],Y=O(fr(B),4),G=Y[0],K=Y[1],$=Y[2],W=Y[3],j=Kr([G,K,$,W]),X=[j.minX,j.minY],z=ar(x[0]*x[1]);B.pos1=nt(G,X),B.pos2=nt(K,X),B.pos3=nt($,X),B.pos4=nt(W,X),B.left=D-B.left+X[0],B.top=M-B.top+X[1],B.origin=nt(yt(H,B.origin),X),B.beforeOrigin=nt(yt(H,B.beforeOrigin),X),B.originalBeforeOrigin=yt(H,B.originalBeforeOrigin),B.transformOrigin=nt(yt(H,B.transformOrigin),X),f.style.transform="translate(".concat(-R-X[0],"px, ").concat(-A-X[1],"px)")+P,he(),this.updateState(w(w({},B),{posDelta:X,direction:z,beforeDirection:z}),i)},r.prototype.getRect=function(){return w(w({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(e){return e.getRect()})})},r.prototype.triggerEvent=function(e,n,i){if(i||e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,n);this._emitter.trigger(e,n)},r.prototype.getRequestChildStyles=function(){var e=this.getEnabledAbles().reduce(function(n,i){var a,o,s=(o=(a=i.requestChildStyle)===null||a===void 0?void 0:a.call(i))!==null&&o!==void 0?o:[];return q(q([],O(n),!1),O(s),!1)},[]);return e},r.prototype.getMoveables=function(){return q([],O(this.moveables),!1)},r.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,q(q([],O(this.props.ables),!1),[Qa],!1),"Group")},r.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=br(this._originalDragTarget,!0)},r.prototype._updateEvents=function(){var e=this.state,n=this.props,i=this._prevDragTarget,a=n.dragTarget||this.areaElement,o=n.targets,s=this.differ.update(o),u=s.added,f=s.changed,l=s.removed,c=u.length||l.length;(c||this._prevOriginalDragTarget!==this._originalDragTarget)&&(oe(this,!1),oe(this,!0),this.updateState({gestos:{}})),i!==a&&(e.target=null),e.target||(e.target=this.areaElement,this.controlBox.style.display="block"),e.target&&(this.targetGesto||(this.targetGesto=xf(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=Za(this,this.controlBox,"controlAbles","GroupControl")));var d=!fa(e.container,n.container);d&&(e.container=n.container),(d||c||this.transformOrigin!==(n.defaultGroupOrigin||"50% 50%")||f.length||o.length&&!lf(this._targetGroups,n.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!c},r.prototype._updateObserver=function(){},r.defaultProps=w(w({},be.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),r}(be),Rv=function(t){an(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.moveables=[],e}return r.prototype.render=function(){var e=this,n,i=this.props,a=i.cspNonce,o=i.cssStyled,s=i.persistData,u=i.targets||[],f=u.length,l=this.isUnmounted||!f,c=(n=s==null?void 0:s.children)!==null&&n!==void 0?n:[];return l&&!f&&c.length?u=c.map(function(){return null}):l||(c=[]),pr(o,{cspNonce:a,ref:_r(this,"controlBox"),className:et("control-box")},u.map(function(d,v){var p,h,g=(h=(p=i.individualGroupableProps)===null||p===void 0?void 0:p.call(i,d,v))!==null&&h!==void 0?h:{};return pr(be,w({key:"moveable"+v,ref:Ps(e,"moveables",v)},i,g,{target:d,wrapperMoveable:e,isWrapperMounted:e.isMoveableMounted,persistData:c[v]}))}))},r.prototype.componentDidMount=function(){},r.prototype.componentDidUpdate=function(){},r.prototype.getTargets=function(){return this.props.targets},r.prototype.updateRect=function(e,n,i){i===void 0&&(i=!0),he(!0),this.moveables.forEach(function(a){a.updateRect(e,n,i)}),he()},r.prototype.getRect=function(){return w(w({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(e){return e.getRect()})})},r.prototype.request=function(e,n,i){n===void 0&&(n={});var a=this.moveables.map(function(u){return u.request(e,w(w({},n),{isInstant:!1}),!1)}),o=i||n.isInstant,s={request:function(u){return a.forEach(function(f){return f.request(u)}),this},requestEnd:function(){return a.forEach(function(u){return u.requestEnd()}),this}};return o?s.request(n).requestEnd():s},r.prototype.dragStart=function(e){var n=e.target,i=tr(this.moveables,function(a){var o=a.getTargets()[0],s=a.getControlBoxElement(),u=a.getDragElement();return!o||!u?!1:u===n||u.contains(n)||u!==o&&o===n||o.contains(n)||s===n||s.contains(n)});return i&&i.dragStart(e),this},r.prototype.hitTest=function(){return 0},r.prototype.isInside=function(){return!1},r.prototype.isDragging=function(){return!1},r.prototype.getDragElement=function(){return null},r.prototype.getMoveables=function(){return q([],O(this.moveables),!1)},r.prototype.updateRenderPoses=function(){},r.prototype.checkUpdate=function(){},r.prototype.triggerEvent=function(){},r.prototype.updateAbles=function(){},r.prototype._updateEvents=function(){},r.prototype._updateObserver=function(){},r}(be);function Ef(t,r){var e=[];return t.forEach(function(n){if(n){if(Qt(n)){r[n]&&e.push.apply(e,q([],O(r[n]),!1));return}zt(n)?e.push.apply(e,q([],O(Ef(n,r)),!1)):e.push(n)}}),e}function Cf(t,r){var e=[];return t.forEach(function(n){if(n){if(Qt(n)){r[n]&&e.push.apply(e,q([],O(r[n]),!1));return}zt(n)?e.push(Cf(n,r)):e.push(n)}}),e}function Df(t,r){return t.length!==r.length||t.some(function(e,n){var i=r[n];return!e&&!i?!1:e!=i?zt(e)&&zt(i)?Df(e,i):!0:!1})}var Tv=function(t){an(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.refTargets=[],e.selectorMap={},e._differ=new lu,e._elementTargets=[],e._tmpRefTargets=[],e._tmpSelectorMap={},e._onChangeTargets=null,e}return r.makeStyled=function(){var e={},n=this.getTotalAbles();n.forEach(function(a){var o=a.css;o&&o.forEach(function(s){e[s]=!0})});var i=Or(e).join(`
`);this.defaultStyled=vu("div",Cl(Aa,hd+i))},r.getTotalAbles=function(){return q([vf,Qa,Sf,pf],O(this.defaultAbles),!1)},r.prototype.render=function(){var e,n=this.constructor;n.defaultStyled||n.makeStyled();var i=this.props,a=i.ables,o=i.props,s=ed(i,["ables","props"]),u=O(this._updateRefs(!0),2),f=u[0],l=u[1],c=Ef(f,l),d=c.length>1,v=n.getTotalAbles(),p=q(q([],O(v),!1),O(a||[]),!1),h=w(w(w({},s),o||{}),{ables:p,cssStyled:n.defaultStyled,customStyledMap:n.customStyledMap});this._elementTargets=c;var g=null,m=this.moveable,b=s.persistData;if(b!=null&&b.children&&(d=!0),s.individualGroupable)return pr(Rv,w({key:"individual-group",ref:_r(this,"moveable")},h,{target:null,targets:c}));if(d){var y=Cf(f,l);if(m&&!m.props.groupable&&!m.props.individualGroupable){var S=m.props.target;S&&c.indexOf(S)>-1&&(g=w({},m.state))}return pr(Mv,w({key:"group",ref:_r(this,"moveable")},h,(e=s.groupableProps)!==null&&e!==void 0?e:{},{target:null,targets:c,targetGroups:y,firstRenderState:g}))}else{var E=c[0];if(m&&(m.props.groupable||m.props.individualGroupable)){var x=m.moveables||[],_=tr(x,function(C){return C.props.target===E});_&&(g=w({},_.state))}return pr(be,w({key:"single",ref:_r(this,"moveable")},h,{target:E,firstRenderState:g}))}},r.prototype.componentDidMount=function(){this._checkChangeTargets()},r.prototype.componentDidUpdate=function(){this._checkChangeTargets()},r.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},r.prototype.getTargets=function(){var e,n;return(n=(e=this.moveable)===null||e===void 0?void 0:e.getTargets())!==null&&n!==void 0?n:[]},r.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs()},r.prototype.waitToChangeTarget=function(){var e=this,n;return this._onChangeTargets=function(){e._onChangeTargets=null,n()},new Promise(function(i){n=i})},r.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},r.prototype.getManager=function(){return this.moveable},r.prototype.getMoveables=function(){return this.moveable.getMoveables()},r.prototype.getDragElement=function(){return this.moveable.getDragElement()},r.prototype._updateRefs=function(e){var n=this.refTargets,i=Ua(this.props.target||this.props.targets),a=typeof document<"u",o=Df(n,i),s=this.selectorMap,u={};return this.refTargets.forEach(function f(l){if(Qt(l)){var c=s[l];c?u[l]=s[l]:a&&(o=!0,u[l]=[].slice.call(document.querySelectorAll(l)))}else zt(l)&&l.forEach(f)}),this._tmpRefTargets=i,this._tmpSelectorMap=u,[i,u,!e&&o]},r.prototype._checkChangeTargets=function(){var e,n,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var a=this._differ.update(this._elementTargets),o=a.added,s=a.removed,u=o.length||s.length;u&&((n=(e=this.props).onChangeTargets)===null||n===void 0||n.call(e,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var f=O(this._updateRefs(),3),l=f[0],c=f[1],d=f[2];this.refTargets=l,this.selectorMap=c,d&&this.forceUpdate()},r.defaultAbles=[],r.customStyledMap={},r.defaultStyled=null,nd([Dl(xu)],r.prototype,"moveable",void 0),r}(js),Pv=function(t){an(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.defaultAbles=to,r}(Tv),pa=function(t,r){return pa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},pa(t,r)};function ro(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");pa(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var je=function(){return je=Object.assign||function(r){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},je.apply(this,arguments)};function Iv(t,r,e,n){var i=arguments.length,a=i<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(r,e,a):o(r,e))||a);return i>3&&a&&Object.defineProperty(r,e,a),a}var Av=function(t){ro(r,t);function r(n){var i=t.call(this,n)||this;return i.state={},i.state=i.props,i}var e=r.prototype;return e.render=function(){return pr(Pv,je({ref:_r(this,"moveable")},this.state))},r}(Da),wf=wv,Of=xu,Mf=Dv,Bv=function(t){ro(r,t);function r(n,i){i===void 0&&(i={});var a=t.call(this)||this;a.containerProvider=null,a.selfElement=null,a._warp=!1;var o=je({},i),s={};Mf.forEach(function(l){s[zs("on ".concat(l))]=function(c){return a.trigger(l,c)}});var u;i.warpSelf?(delete i.warpSelf,a._warp=!0,u=n):(u=xe(n).createElement("div"),n.appendChild(u)),a.containerProvider=wo(pr(Av,je({ref:_r(a,"innerMoveable")},o,s)),u),a.selfElement=u;var f=o.target;return zt(f)&&f.length>1&&a.updateRect(),a}var e=r.prototype;return e.setState=function(n,i){this.innerMoveable.setState(n,i)},e.forceUpdate=function(n){this.innerMoveable.forceUpdate(n)},e.dragStart=function(n){var i=this.innerMoveable;i.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(n)},e.destroy=function(){var n,i=this.selfElement;wo(null,i,this.containerProvider),this._warp||(n=i==null?void 0:i.parentElement)===null||n===void 0||n.removeChild(i),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},e.getMoveable=function(){return this.innerMoveable.moveable},r=Iv([mo(Of,function(n,i){n[i]||(n[i]=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var s=this.getMoveable();if(!(!s||!s[i]))return s[i].apply(s,a)})}),mo(wf,function(n,i){Object.defineProperty(n,i,{get:function(){return this.getMoveable().props[i]},set:function(a){var o;this.setState((o={},o[i]=a,o))},enumerable:!0,configurable:!0})})],r),r}(Kn),zv=function(t){ro(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r}(Bv);function kv(t){let r;return{c(){r=at("div")},m(e,n){rr(e,r,n),t[2](r)},p:Zt,i:Zt,o:Zt,d(e){e&&Jt(r),t[2](null)}}}function Fv(t,r,e){const n=cl();let i={},a,o;ul(()=>{const f=r;i={},wf.forEach(l=>{l in f&&(i[l]=f[l])}),o&&dl().then(()=>{o.setState({...i})})}),fl(()=>{o=new zv(a,{...i,warpSelf:!0}),Mf.forEach(f=>{const l=zs(`on ${f}`);o.on(f,c=>{r[l]&&r[l](c),n(f,c)})})}),ll(()=>{o&&o.destroy()});function s(){return o}function u(f){ir[f?"unshift":"push"](()=>{a=f,e(0,a)})}return t.$$set=f=>{e(6,r=co(co({},r),vo(f)))},r=vo(r),[a,s,u]}let Gv=class extends Je{constructor(r){super(),$e(this,r,Fv,kv,Ke,{getInstance:1})}get getInstance(){return this.$$.ctx[1]}};const Pi=Gv,Rf=(()=>{const t=Pi.prototype;return t&&Of.forEach(r=>{t[r]=function(...e){const n=this.getInstance(),i=n[r](...e);return i===n?this:i}}),Pi})();function Nv(t){let r,e=t[0].text+"",n;return{c(){r=at("span"),n=ws(e),V(r,"id","moveable"),Tr(r,"color",t[0].color),Tr(r,"font-family",t[0].font),Tr(r,"font-size",t[0].fontSize+"px"),V(r,"class","svelte-5m89ic")},m(i,a){rr(i,r,a),tt(r,n)},p(i,[a]){a&1&&e!==(e=i[0].text+"")&&ol(n,e),a&1&&Tr(r,"color",i[0].color),a&1&&Tr(r,"font-family",i[0].font),a&1&&Tr(r,"font-size",i[0].fontSize+"px")},i:Zt,o:Zt,d(i){i&&Jt(r)}}}function Lv(t,r,e){let{textData:n}=r;return t.$$set=i=>{"textData"in i&&e(0,n=i.textData)},[n]}class Hv extends Je{constructor(r){super(),$e(this,r,Lv,Nv,Ke,{textData:0})}}function Tf(t,r){return function(){return t.apply(r,arguments)}}const{toString:Wv}=Object.prototype,{getPrototypeOf:eo}=Object,ai=(t=>r=>{const e=Wv.call(r);return t[e]||(t[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Sr=t=>(t=t.toLowerCase(),r=>ai(r)===t),oi=t=>r=>typeof r===t,{isArray:De}=Array,Ue=oi("undefined");function qv(t){return t!==null&&!Ue(t)&&t.constructor!==null&&!Ue(t.constructor)&&sr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Pf=Sr("ArrayBuffer");function Xv(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&Pf(t.buffer),r}const Yv=oi("string"),sr=oi("function"),If=oi("number"),si=t=>t!==null&&typeof t=="object",Vv=t=>t===!0||t===!1,Rn=t=>{if(ai(t)!=="object")return!1;const r=eo(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},jv=Sr("Date"),Uv=Sr("File"),Kv=Sr("Blob"),$v=Sr("FileList"),Jv=t=>si(t)&&sr(t.pipe),Zv=t=>{let r;return t&&(typeof FormData=="function"&&t instanceof FormData||sr(t.append)&&((r=ai(t))==="formdata"||r==="object"&&sr(t.toString)&&t.toString()==="[object FormData]"))},Qv=Sr("URLSearchParams"),th=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function fn(t,r,{allOwnKeys:e=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),De(t))for(n=0,i=t.length;n<i;n++)r.call(null,t[n],n,t);else{const a=e?Object.getOwnPropertyNames(t):Object.keys(t),o=a.length;let s;for(n=0;n<o;n++)s=a[n],r.call(null,t[s],s,t)}}function Af(t,r){r=r.toLowerCase();const e=Object.keys(t);let n=e.length,i;for(;n-- >0;)if(i=e[n],r===i.toLowerCase())return i;return null}const Bf=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),zf=t=>!Ue(t)&&t!==Bf;function va(){const{caseless:t}=zf(this)&&this||{},r={},e=(n,i)=>{const a=t&&Af(r,i)||i;Rn(r[a])&&Rn(n)?r[a]=va(r[a],n):Rn(n)?r[a]=va({},n):De(n)?r[a]=n.slice():r[a]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&fn(arguments[n],e);return r}const rh=(t,r,e,{allOwnKeys:n}={})=>(fn(r,(i,a)=>{e&&sr(i)?t[a]=Tf(i,e):t[a]=i},{allOwnKeys:n}),t),eh=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),nh=(t,r,e,n)=>{t.prototype=Object.create(r.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),e&&Object.assign(t.prototype,e)},ih=(t,r,e,n)=>{let i,a,o;const s={};if(r=r||{},t==null)return r;do{for(i=Object.getOwnPropertyNames(t),a=i.length;a-- >0;)o=i[a],(!n||n(o,t,r))&&!s[o]&&(r[o]=t[o],s[o]=!0);t=e!==!1&&eo(t)}while(t&&(!e||e(t,r))&&t!==Object.prototype);return r},ah=(t,r,e)=>{t=String(t),(e===void 0||e>t.length)&&(e=t.length),e-=r.length;const n=t.indexOf(r,e);return n!==-1&&n===e},oh=t=>{if(!t)return null;if(De(t))return t;let r=t.length;if(!If(r))return null;const e=new Array(r);for(;r-- >0;)e[r]=t[r];return e},sh=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&eo(Uint8Array)),uh=(t,r)=>{const n=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=n.next())&&!i.done;){const a=i.value;r.call(t,a[0],a[1])}},fh=(t,r)=>{let e;const n=[];for(;(e=t.exec(r))!==null;)n.push(e);return n},lh=Sr("HTMLFormElement"),ch=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,i){return n.toUpperCase()+i}),fs=(({hasOwnProperty:t})=>(r,e)=>t.call(r,e))(Object.prototype),dh=Sr("RegExp"),kf=(t,r)=>{const e=Object.getOwnPropertyDescriptors(t),n={};fn(e,(i,a)=>{let o;(o=r(i,a,t))!==!1&&(n[a]=o||i)}),Object.defineProperties(t,n)},ph=t=>{kf(t,(r,e)=>{if(sr(t)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=t[e];if(sr(n)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},vh=(t,r)=>{const e={},n=i=>{i.forEach(a=>{e[a]=!0})};return De(t)?n(t):n(String(t).split(r)),e},hh=()=>{},gh=(t,r)=>(t=+t,Number.isFinite(t)?t:r),Ii="abcdefghijklmnopqrstuvwxyz",ls="0123456789",Ff={DIGIT:ls,ALPHA:Ii,ALPHA_DIGIT:Ii+Ii.toUpperCase()+ls},mh=(t=16,r=Ff.ALPHA_DIGIT)=>{let e="";const{length:n}=r;for(;t--;)e+=r[Math.random()*n|0];return e};function bh(t){return!!(t&&sr(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const yh=t=>{const r=new Array(10),e=(n,i)=>{if(si(n)){if(r.indexOf(n)>=0)return;if(!("toJSON"in n)){r[i]=n;const a=De(n)?[]:{};return fn(n,(o,s)=>{const u=e(o,i+1);!Ue(u)&&(a[s]=u)}),r[i]=void 0,a}}return n};return e(t,0)},xh=Sr("AsyncFunction"),Sh=t=>t&&(si(t)||sr(t))&&sr(t.then)&&sr(t.catch),F={isArray:De,isArrayBuffer:Pf,isBuffer:qv,isFormData:Zv,isArrayBufferView:Xv,isString:Yv,isNumber:If,isBoolean:Vv,isObject:si,isPlainObject:Rn,isUndefined:Ue,isDate:jv,isFile:Uv,isBlob:Kv,isRegExp:dh,isFunction:sr,isStream:Jv,isURLSearchParams:Qv,isTypedArray:sh,isFileList:$v,forEach:fn,merge:va,extend:rh,trim:th,stripBOM:eh,inherits:nh,toFlatObject:ih,kindOf:ai,kindOfTest:Sr,endsWith:ah,toArray:oh,forEachEntry:uh,matchAll:fh,isHTMLForm:lh,hasOwnProperty:fs,hasOwnProp:fs,reduceDescriptors:kf,freezeMethods:ph,toObjectSet:vh,toCamelCase:ch,noop:hh,toFiniteNumber:gh,findKey:Af,global:Bf,isContextDefined:zf,ALPHABET:Ff,generateString:mh,isSpecCompliantForm:bh,toJSONObject:yh,isAsyncFn:xh,isThenable:Sh};function bt(t,r,e,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),e&&(this.config=e),n&&(this.request=n),i&&(this.response=i)}F.inherits(bt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:F.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Gf=bt.prototype,Nf={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Nf[t]={value:t}});Object.defineProperties(bt,Nf);Object.defineProperty(Gf,"isAxiosError",{value:!0});bt.from=(t,r,e,n,i,a)=>{const o=Object.create(Gf);return F.toFlatObject(t,o,function(u){return u!==Error.prototype},s=>s!=="isAxiosError"),bt.call(o,t.message,r,e,n,i),o.cause=t,o.name=t.name,a&&Object.assign(o,a),o};const _h=null;function ha(t){return F.isPlainObject(t)||F.isArray(t)}function Lf(t){return F.endsWith(t,"[]")?t.slice(0,-2):t}function cs(t,r,e){return t?t.concat(r).map(function(i,a){return i=Lf(i),!e&&a?"["+i+"]":i}).join(e?".":""):r}function Eh(t){return F.isArray(t)&&!t.some(ha)}const Ch=F.toFlatObject(F,{},null,function(r){return/^is[A-Z]/.test(r)});function ui(t,r,e){if(!F.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,e=F.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,g){return!F.isUndefined(g[h])});const n=e.metaTokens,i=e.visitor||l,a=e.dots,o=e.indexes,u=(e.Blob||typeof Blob<"u"&&Blob)&&F.isSpecCompliantForm(r);if(!F.isFunction(i))throw new TypeError("visitor must be a function");function f(p){if(p===null)return"";if(F.isDate(p))return p.toISOString();if(!u&&F.isBlob(p))throw new bt("Blob is not supported. Use a Buffer instead.");return F.isArrayBuffer(p)||F.isTypedArray(p)?u&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function l(p,h,g){let m=p;if(p&&!g&&typeof p=="object"){if(F.endsWith(h,"{}"))h=n?h:h.slice(0,-2),p=JSON.stringify(p);else if(F.isArray(p)&&Eh(p)||(F.isFileList(p)||F.endsWith(h,"[]"))&&(m=F.toArray(p)))return h=Lf(h),m.forEach(function(y,S){!(F.isUndefined(y)||y===null)&&r.append(o===!0?cs([h],S,a):o===null?h:h+"[]",f(y))}),!1}return ha(p)?!0:(r.append(cs(g,h,a),f(p)),!1)}const c=[],d=Object.assign(Ch,{defaultVisitor:l,convertValue:f,isVisitable:ha});function v(p,h){if(!F.isUndefined(p)){if(c.indexOf(p)!==-1)throw Error("Circular reference detected in "+h.join("."));c.push(p),F.forEach(p,function(m,b){(!(F.isUndefined(m)||m===null)&&i.call(r,m,F.isString(b)?b.trim():b,h,d))===!0&&v(m,h?h.concat(b):[b])}),c.pop()}}if(!F.isObject(t))throw new TypeError("data must be an object");return v(t),r}function ds(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return r[n]})}function no(t,r){this._pairs=[],t&&ui(t,this,r)}const Hf=no.prototype;Hf.append=function(r,e){this._pairs.push([r,e])};Hf.toString=function(r){const e=r?function(n){return r.call(this,n,ds)}:ds;return this._pairs.map(function(i){return e(i[0])+"="+e(i[1])},"").join("&")};function Dh(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Wf(t,r,e){if(!r)return t;const n=e&&e.encode||Dh,i=e&&e.serialize;let a;if(i?a=i(r,e):a=F.isURLSearchParams(r)?r.toString():new no(r,e).toString(n),a){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class wh{constructor(){this.handlers=[]}use(r,e,n){return this.handlers.push({fulfilled:r,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){F.forEach(this.handlers,function(n){n!==null&&r(n)})}}const ps=wh,qf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Oh=typeof URLSearchParams<"u"?URLSearchParams:no,Mh=typeof FormData<"u"?FormData:null,Rh=typeof Blob<"u"?Blob:null,Th=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Ph=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),dr={isBrowser:!0,classes:{URLSearchParams:Oh,FormData:Mh,Blob:Rh},isStandardBrowserEnv:Th,isStandardBrowserWebWorkerEnv:Ph,protocols:["http","https","file","blob","url","data"]};function Ih(t,r){return ui(t,new dr.classes.URLSearchParams,Object.assign({visitor:function(e,n,i,a){return dr.isNode&&F.isBuffer(e)?(this.append(n,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},r))}function Ah(t){return F.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function Bh(t){const r={},e=Object.keys(t);let n;const i=e.length;let a;for(n=0;n<i;n++)a=e[n],r[a]=t[a];return r}function Xf(t){function r(e,n,i,a){let o=e[a++];const s=Number.isFinite(+o),u=a>=e.length;return o=!o&&F.isArray(i)?i.length:o,u?(F.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!s):((!i[o]||!F.isObject(i[o]))&&(i[o]=[]),r(e,n,i[o],a)&&F.isArray(i[o])&&(i[o]=Bh(i[o])),!s)}if(F.isFormData(t)&&F.isFunction(t.entries)){const e={};return F.forEachEntry(t,(n,i)=>{r(Ah(n),i,e,0)}),e}return null}function zh(t,r,e){if(F.isString(t))try{return(r||JSON.parse)(t),F.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(t)}const io={transitional:qf,adapter:dr.isNode?"http":"xhr",transformRequest:[function(r,e){const n=e.getContentType()||"",i=n.indexOf("application/json")>-1,a=F.isObject(r);if(a&&F.isHTMLForm(r)&&(r=new FormData(r)),F.isFormData(r))return i&&i?JSON.stringify(Xf(r)):r;if(F.isArrayBuffer(r)||F.isBuffer(r)||F.isStream(r)||F.isFile(r)||F.isBlob(r))return r;if(F.isArrayBufferView(r))return r.buffer;if(F.isURLSearchParams(r))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let s;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Ih(r,this.formSerializer).toString();if((s=F.isFileList(r))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return ui(s?{"files[]":r}:r,u&&new u,this.formSerializer)}}return a||i?(e.setContentType("application/json",!1),zh(r)):r}],transformResponse:[function(r){const e=this.transitional||io.transitional,n=e&&e.forcedJSONParsing,i=this.responseType==="json";if(r&&F.isString(r)&&(n&&!this.responseType||i)){const o=!(e&&e.silentJSONParsing)&&i;try{return JSON.parse(r)}catch(s){if(o)throw s.name==="SyntaxError"?bt.from(s,bt.ERR_BAD_RESPONSE,this,null,this.response):s}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:dr.classes.FormData,Blob:dr.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};F.forEach(["delete","get","head","post","put","patch"],t=>{io.headers[t]={}});const ao=io,kh=F.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Fh=t=>{const r={};let e,n,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),e=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!e||r[e]&&kh[e])&&(e==="set-cookie"?r[e]?r[e].push(n):r[e]=[n]:r[e]=r[e]?r[e]+", "+n:n)}),r},vs=Symbol("internals");function Me(t){return t&&String(t).trim().toLowerCase()}function Tn(t){return t===!1||t==null?t:F.isArray(t)?t.map(Tn):String(t)}function Gh(t){const r=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(t);)r[n[1]]=n[2];return r}const Nh=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ai(t,r,e,n,i){if(F.isFunction(n))return n.call(this,r,e);if(i&&(r=e),!!F.isString(r)){if(F.isString(n))return r.indexOf(n)!==-1;if(F.isRegExp(n))return n.test(r)}}function Lh(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,e,n)=>e.toUpperCase()+n)}function Hh(t,r){const e=F.toCamelCase(" "+r);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+e,{value:function(i,a,o){return this[n].call(this,r,i,a,o)},configurable:!0})})}class fi{constructor(r){r&&this.set(r)}set(r,e,n){const i=this;function a(s,u,f){const l=Me(u);if(!l)throw new Error("header name must be a non-empty string");const c=F.findKey(i,l);(!c||i[c]===void 0||f===!0||f===void 0&&i[c]!==!1)&&(i[c||u]=Tn(s))}const o=(s,u)=>F.forEach(s,(f,l)=>a(f,l,u));return F.isPlainObject(r)||r instanceof this.constructor?o(r,e):F.isString(r)&&(r=r.trim())&&!Nh(r)?o(Fh(r),e):r!=null&&a(e,r,n),this}get(r,e){if(r=Me(r),r){const n=F.findKey(this,r);if(n){const i=this[n];if(!e)return i;if(e===!0)return Gh(i);if(F.isFunction(e))return e.call(this,i,n);if(F.isRegExp(e))return e.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,e){if(r=Me(r),r){const n=F.findKey(this,r);return!!(n&&this[n]!==void 0&&(!e||Ai(this,this[n],n,e)))}return!1}delete(r,e){const n=this;let i=!1;function a(o){if(o=Me(o),o){const s=F.findKey(n,o);s&&(!e||Ai(n,n[s],s,e))&&(delete n[s],i=!0)}}return F.isArray(r)?r.forEach(a):a(r),i}clear(r){const e=Object.keys(this);let n=e.length,i=!1;for(;n--;){const a=e[n];(!r||Ai(this,this[a],a,r,!0))&&(delete this[a],i=!0)}return i}normalize(r){const e=this,n={};return F.forEach(this,(i,a)=>{const o=F.findKey(n,a);if(o){e[o]=Tn(i),delete e[a];return}const s=r?Lh(a):String(a).trim();s!==a&&delete e[a],e[s]=Tn(i),n[s]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const e=Object.create(null);return F.forEach(this,(n,i)=>{n!=null&&n!==!1&&(e[i]=r&&F.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,e])=>r+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...e){const n=new this(r);return e.forEach(i=>n.set(i)),n}static accessor(r){const n=(this[vs]=this[vs]={accessors:{}}).accessors,i=this.prototype;function a(o){const s=Me(o);n[s]||(Hh(i,o),n[s]=!0)}return F.isArray(r)?r.forEach(a):a(r),this}}fi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);F.reduceDescriptors(fi.prototype,({value:t},r)=>{let e=r[0].toUpperCase()+r.slice(1);return{get:()=>t,set(n){this[e]=n}}});F.freezeMethods(fi);const Dr=fi;function Bi(t,r){const e=this||ao,n=r||e,i=Dr.from(n.headers);let a=n.data;return F.forEach(t,function(s){a=s.call(e,a,i.normalize(),r?r.status:void 0)}),i.normalize(),a}function Yf(t){return!!(t&&t.__CANCEL__)}function ln(t,r,e){bt.call(this,t??"canceled",bt.ERR_CANCELED,r,e),this.name="CanceledError"}F.inherits(ln,bt,{__CANCEL__:!0});function Wh(t,r,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?t(e):r(new bt("Request failed with status code "+e.status,[bt.ERR_BAD_REQUEST,bt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}const qh=dr.isStandardBrowserEnv?function(){return{write:function(e,n,i,a,o,s){const u=[];u.push(e+"="+encodeURIComponent(n)),F.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),F.isString(a)&&u.push("path="+a),F.isString(o)&&u.push("domain="+o),s===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Xh(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Yh(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}function Vf(t,r){return t&&!Xh(r)?Yh(t,r):r}const Vh=dr.isStandardBrowserEnv?function(){const r=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function i(a){let o=a;return r&&(e.setAttribute("href",o),o=e.href),e.setAttribute("href",o),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return n=i(window.location.href),function(o){const s=F.isString(o)?i(o):o;return s.protocol===n.protocol&&s.host===n.host}}():function(){return function(){return!0}}();function jh(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function Uh(t,r){t=t||10;const e=new Array(t),n=new Array(t);let i=0,a=0,o;return r=r!==void 0?r:1e3,function(u){const f=Date.now(),l=n[a];o||(o=f),e[i]=u,n[i]=f;let c=a,d=0;for(;c!==i;)d+=e[c++],c=c%t;if(i=(i+1)%t,i===a&&(a=(a+1)%t),f-o<r)return;const v=l&&f-l;return v?Math.round(d*1e3/v):void 0}}function hs(t,r){let e=0;const n=Uh(50,250);return i=>{const a=i.loaded,o=i.lengthComputable?i.total:void 0,s=a-e,u=n(s),f=a<=o;e=a;const l={loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:u||void 0,estimated:u&&o&&f?(o-a)/u:void 0,event:i};l[r?"download":"upload"]=!0,t(l)}}const Kh=typeof XMLHttpRequest<"u",$h=Kh&&function(t){return new Promise(function(e,n){let i=t.data;const a=Dr.from(t.headers).normalize(),o=t.responseType;let s;function u(){t.cancelToken&&t.cancelToken.unsubscribe(s),t.signal&&t.signal.removeEventListener("abort",s)}F.isFormData(i)&&(dr.isStandardBrowserEnv||dr.isStandardBrowserWebWorkerEnv?a.setContentType(!1):a.setContentType("multipart/form-data;",!1));let f=new XMLHttpRequest;if(t.auth){const v=t.auth.username||"",p=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";a.set("Authorization","Basic "+btoa(v+":"+p))}const l=Vf(t.baseURL,t.url);f.open(t.method.toUpperCase(),Wf(l,t.params,t.paramsSerializer),!0),f.timeout=t.timeout;function c(){if(!f)return;const v=Dr.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),h={data:!o||o==="text"||o==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:v,config:t,request:f};Wh(function(m){e(m),u()},function(m){n(m),u()},h),f=null}if("onloadend"in f?f.onloadend=c:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(c)},f.onabort=function(){f&&(n(new bt("Request aborted",bt.ECONNABORTED,t,f)),f=null)},f.onerror=function(){n(new bt("Network Error",bt.ERR_NETWORK,t,f)),f=null},f.ontimeout=function(){let p=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const h=t.transitional||qf;t.timeoutErrorMessage&&(p=t.timeoutErrorMessage),n(new bt(p,h.clarifyTimeoutError?bt.ETIMEDOUT:bt.ECONNABORTED,t,f)),f=null},dr.isStandardBrowserEnv){const v=(t.withCredentials||Vh(l))&&t.xsrfCookieName&&qh.read(t.xsrfCookieName);v&&a.set(t.xsrfHeaderName,v)}i===void 0&&a.setContentType(null),"setRequestHeader"in f&&F.forEach(a.toJSON(),function(p,h){f.setRequestHeader(h,p)}),F.isUndefined(t.withCredentials)||(f.withCredentials=!!t.withCredentials),o&&o!=="json"&&(f.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&f.addEventListener("progress",hs(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",hs(t.onUploadProgress)),(t.cancelToken||t.signal)&&(s=v=>{f&&(n(!v||v.type?new ln(null,t,f):v),f.abort(),f=null)},t.cancelToken&&t.cancelToken.subscribe(s),t.signal&&(t.signal.aborted?s():t.signal.addEventListener("abort",s)));const d=jh(l);if(d&&dr.protocols.indexOf(d)===-1){n(new bt("Unsupported protocol "+d+":",bt.ERR_BAD_REQUEST,t));return}f.send(i||null)})},Pn={http:_h,xhr:$h};F.forEach(Pn,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const jf={getAdapter:t=>{t=F.isArray(t)?t:[t];const{length:r}=t;let e,n;for(let i=0;i<r&&(e=t[i],!(n=F.isString(e)?Pn[e.toLowerCase()]:e));i++);if(!n)throw n===!1?new bt(`Adapter ${e} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(F.hasOwnProp(Pn,e)?`Adapter '${e}' is not available in the build`:`Unknown adapter '${e}'`);if(!F.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:Pn};function zi(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ln(null,t)}function gs(t){return zi(t),t.headers=Dr.from(t.headers),t.data=Bi.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),jf.getAdapter(t.adapter||ao.adapter)(t).then(function(n){return zi(t),n.data=Bi.call(t,t.transformResponse,n),n.headers=Dr.from(n.headers),n},function(n){return Yf(n)||(zi(t),n&&n.response&&(n.response.data=Bi.call(t,t.transformResponse,n.response),n.response.headers=Dr.from(n.response.headers))),Promise.reject(n)})}const ms=t=>t instanceof Dr?t.toJSON():t;function ye(t,r){r=r||{};const e={};function n(f,l,c){return F.isPlainObject(f)&&F.isPlainObject(l)?F.merge.call({caseless:c},f,l):F.isPlainObject(l)?F.merge({},l):F.isArray(l)?l.slice():l}function i(f,l,c){if(F.isUndefined(l)){if(!F.isUndefined(f))return n(void 0,f,c)}else return n(f,l,c)}function a(f,l){if(!F.isUndefined(l))return n(void 0,l)}function o(f,l){if(F.isUndefined(l)){if(!F.isUndefined(f))return n(void 0,f)}else return n(void 0,l)}function s(f,l,c){if(c in r)return n(f,l);if(c in t)return n(void 0,f)}const u={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(f,l)=>i(ms(f),ms(l),!0)};return F.forEach(Object.keys(Object.assign({},t,r)),function(l){const c=u[l]||i,d=c(t[l],r[l],l);F.isUndefined(d)&&c!==s||(e[l]=d)}),e}const Uf="1.5.0",oo={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{oo[t]=function(n){return typeof n===t||"a"+(r<1?"n ":" ")+t}});const bs={};oo.transitional=function(r,e,n){function i(a,o){return"[Axios v"+Uf+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return(a,o,s)=>{if(r===!1)throw new bt(i(o," has been removed"+(e?" in "+e:"")),bt.ERR_DEPRECATED);return e&&!bs[o]&&(bs[o]=!0,console.warn(i(o," has been deprecated since v"+e+" and will be removed in the near future"))),r?r(a,o,s):!0}};function Jh(t,r,e){if(typeof t!="object")throw new bt("options must be an object",bt.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const a=n[i],o=r[a];if(o){const s=t[a],u=s===void 0||o(s,a,t);if(u!==!0)throw new bt("option "+a+" must be "+u,bt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new bt("Unknown option "+a,bt.ERR_BAD_OPTION)}}const ga={assertOptions:Jh,validators:oo},Rr=ga.validators;class Xn{constructor(r){this.defaults=r,this.interceptors={request:new ps,response:new ps}}request(r,e){typeof r=="string"?(e=e||{},e.url=r):e=r||{},e=ye(this.defaults,e);const{transitional:n,paramsSerializer:i,headers:a}=e;n!==void 0&&ga.assertOptions(n,{silentJSONParsing:Rr.transitional(Rr.boolean),forcedJSONParsing:Rr.transitional(Rr.boolean),clarifyTimeoutError:Rr.transitional(Rr.boolean)},!1),i!=null&&(F.isFunction(i)?e.paramsSerializer={serialize:i}:ga.assertOptions(i,{encode:Rr.function,serialize:Rr.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=a&&F.merge(a.common,a[e.method]);a&&F.forEach(["delete","get","head","post","put","patch","common"],p=>{delete a[p]}),e.headers=Dr.concat(o,a);const s=[];let u=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(e)===!1||(u=u&&h.synchronous,s.unshift(h.fulfilled,h.rejected))});const f=[];this.interceptors.response.forEach(function(h){f.push(h.fulfilled,h.rejected)});let l,c=0,d;if(!u){const p=[gs.bind(this),void 0];for(p.unshift.apply(p,s),p.push.apply(p,f),d=p.length,l=Promise.resolve(e);c<d;)l=l.then(p[c++],p[c++]);return l}d=s.length;let v=e;for(c=0;c<d;){const p=s[c++],h=s[c++];try{v=p(v)}catch(g){h.call(this,g);break}}try{l=gs.call(this,v)}catch(p){return Promise.reject(p)}for(c=0,d=f.length;c<d;)l=l.then(f[c++],f[c++]);return l}getUri(r){r=ye(this.defaults,r);const e=Vf(r.baseURL,r.url);return Wf(e,r.params,r.paramsSerializer)}}F.forEach(["delete","get","head","options"],function(r){Xn.prototype[r]=function(e,n){return this.request(ye(n||{},{method:r,url:e,data:(n||{}).data}))}});F.forEach(["post","put","patch"],function(r){function e(n){return function(a,o,s){return this.request(ye(s||{},{method:r,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Xn.prototype[r]=e(),Xn.prototype[r+"Form"]=e(!0)});const In=Xn;class so{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(a){e=a});const n=this;this.promise.then(i=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](i);n._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(s=>{n.subscribe(s),a=s}).then(i);return o.cancel=function(){n.unsubscribe(a)},o},r(function(a,o,s){n.reason||(n.reason=new ln(a,o,s),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const e=this._listeners.indexOf(r);e!==-1&&this._listeners.splice(e,1)}static source(){let r;return{token:new so(function(i){r=i}),cancel:r}}}const Zh=so;function Qh(t){return function(e){return t.apply(null,e)}}function tg(t){return F.isObject(t)&&t.isAxiosError===!0}const ma={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ma).forEach(([t,r])=>{ma[r]=t});const rg=ma;function Kf(t){const r=new In(t),e=Tf(In.prototype.request,r);return F.extend(e,In.prototype,r,{allOwnKeys:!0}),F.extend(e,r,null,{allOwnKeys:!0}),e.create=function(i){return Kf(ye(t,i))},e}const kt=Kf(ao);kt.Axios=In;kt.CanceledError=ln;kt.CancelToken=Zh;kt.isCancel=Yf;kt.VERSION=Uf;kt.toFormData=ui;kt.AxiosError=bt;kt.Cancel=kt.CanceledError;kt.all=function(r){return Promise.all(r)};kt.spread=Qh;kt.isAxiosError=tg;kt.mergeConfig=ye;kt.AxiosHeaders=Dr;kt.formToJSON=t=>Xf(F.isHTMLForm(t)?new FormData(t):t);kt.getAdapter=jf.getAdapter;kt.HttpStatusCode=rg;kt.default=kt;const Re=kt,eg="/assets/nostreamer-ec2e8e54.png";function ys(t){let r,e;return r=new Hv({props:{textData:t[6]}}),{c(){He(r.$$.fragment)},m(n,i){le(r,n,i),e=!0},p(n,i){const a={};i[0]&64&&(a.textData=n[6]),r.$set(a)},i(n){e||(Xt(r.$$.fragment,n),e=!0)},o(n){lr(r.$$.fragment,n),e=!1},d(n){ce(r,n)}}}function xs(t){let r;return{c(){r=at("video"),V(r,"class","w-full h-full"),r.controls=!0},m(e,n){rr(e,r,n),t[31](r)},p:Zt,d(e){e&&Jt(r),t[31](null)}}}function Ss(t){let r,e;return{c(){r=at("img"),V(r,"class","w-full h-full"),V(r,"alt",""),nl(r.src,e="")||V(r,"src",e)},m(n,i){rr(n,r,i),t[32](r)},p:Zt,d(n){n&&Jt(r),t[32](null)}}}function _s(t){let r,e,n={target:"#moveable",draggable:!0,throttleDrag:1,edgeDraggable:!1,startDragRotate:0,throttleDragRotate:0,rotatable:!1,snappable:!0,bounds:{left:0,top:0,right:0,bottom:0,position:"css"},resizable:!1,scalable:!1,origin:!1,keepRatio:!0,renderDirections:["nw","n","ne","w","e","sw","s","se"]};return r=new Rf({props:n}),t[34](r),r.$on("drag",ig),r.$on("rotate",ag),r.$on("resize",og),r.$on("scale",sg),{c(){He(r.$$.fragment)},m(i,a){le(r,i,a),e=!0},p(i,a){const o={};r.$set(o)},i(i){e||(Xt(r.$$.fragment,i),e=!0)},o(i){lr(r.$$.fragment,i),e=!1},d(i){t[34](null),ce(r,i)}}}function Es(t){let r,e,n={target:".target",draggable:!0,throttleDrag:1,edgeDraggable:!1,startDragRotate:0,throttleDragRotate:0,rotatable:!1,snappable:!0,bounds:{left:0,top:0,right:0,bottom:0,position:"css"},resizable:!0,scalable:!1,origin:!1,keepRatio:!0,renderDirections:["nw","n","ne","w","e","sw","s","se"]};return r=new Rf({props:n}),t[35](r),r.$on("drag",ug),r.$on("rotate",fg),r.$on("resize",lg),r.$on("scale",cg),{c(){He(r.$$.fragment)},m(i,a){le(r,i,a),e=!0},p(i,a){const o={};r.$set(o)},i(i){e||(Xt(r.$$.fragment,i),e=!0)},o(i){lr(r.$$.fragment,i),e=!1},d(i){t[35](null),ce(r,i)}}}function ng(t){let r,e,n,i,a,o,s,u,f,l,c,d,v,p,h,g,m,b,y,S,E,x,_,C,D,M,I,T,R,A,P,L,k,B,H,Y,G,K,$,W,j,X,z,U,it,rt,Q,Z,ht,ot,st,ut,St,xt;function dt(lt){t[27](lt)}let mt={moveableText:t[10]};t[6]!==void 0&&(mt.textData=t[6]),p=new _l({props:mt}),ir.push(()=>go(p,"textData",dt));function Pt(lt){t[30](lt)}let Lt={};t[8]!==void 0&&(Lt.fileContainerBackground=t[8]),T=new yl({props:Lt}),ir.push(()=>go(T,"fileContainerBackground",Pt));let pt=t[11]&&ys(t),vt=t[4]&&xs(t),gt=t[5]&&Ss(t),Ct=t[11]&&_s(t),Dt=(t[4]||t[5])&&Es(t);return{c(){r=at("main"),e=at("div"),n=at("div"),i=at("div"),a=at("label"),a.innerHTML='<span class="label-text">Fichier</span>',o=Ot(),s=at("input"),u=Ot(),f=at("div"),l=at("label"),l.innerHTML='<span class="label-text">Lien d&#39;un média</span>',c=Ot(),d=at("input"),v=Ot(),He(p.$$.fragment),g=Ot(),m=at("div"),b=at("label"),b.innerHTML='<span class="label-text">Username Discord</span>',y=Ot(),S=at("input"),E=Ot(),x=at("div"),_=at("label"),C=at("span"),C.textContent="GreenScreen",D=Ot(),M=at("input"),I=Ot(),He(T.$$.fragment),A=Ot(),P=at("div"),L=at("div"),k=at("div"),pt&&pt.c(),B=Ot(),H=at("div"),vt&&vt.c(),Y=Ot(),gt&&gt.c(),G=Ot(),Ct&&Ct.c(),K=Ot(),Dt&&Dt.c(),$=Ot(),W=at("div"),j=at("div"),X=at("button"),X.innerHTML='<span class="material-symbols-outlined">mop</span>',z=Ot(),U=at("div"),it=at("button"),it.innerHTML='<span class="material-symbols-outlined">delete</span>',rt=Ot(),Q=at("div"),Z=at("button"),Z.innerHTML='<span class="material-symbols-outlined">send</span>',ht=Ot(),ot=at("div"),st=at("button"),st.innerHTML='<span class="material-symbols-outlined">skip_next</span>',V(a,"for","file"),V(a,"class","label"),V(s,"id","file"),V(s,"type","file"),V(s,"class","file-input file-input-bordered w-full max-w-xs svelte-h22r8t"),V(l,"for","link"),V(l,"class","label"),V(d,"id","link"),V(d,"type","text"),V(d,"placeholder","Lien d'un média"),V(d,"class","input input-bordered w-full max-w-xs"),V(b,"for","discord"),V(b,"class","label"),V(S,"id","discord"),V(S,"type","text"),V(S,"placeholder","Username discord"),V(S,"class","input input-bordered w-full max-w-xs"),V(C,"class","label-text"),V(M,"id","greenscreen"),V(M,"type","checkbox"),V(M,"class","checkbox"),V(_,"for","greenscreen"),V(_,"class","label cursor-pointer"),V(n,"class","p-10 h-screen w-1/4 min-h-full max-h-full bg-base-200 text-base-content flex overflow-auto flex-col form-control justify-between"),V(H,"class","target svelte-h22r8t"),V(H,"id","preview"),V(k,"id","file-container"),V(k,"class","container aspect-video svelte-h22r8t"),Tr(k,"background-image","url("+t[8]+")"),V(X,"class","btn btn-primary"),V(j,"class","tooltip"),V(j,"data-tip","Clean"),V(it,"class","btn btn-primary"),V(U,"class","tooltip"),V(U,"data-tip","Flush"),V(Z,"class","btn btn-primary"),V(Q,"class","tooltip"),V(Q,"data-tip","Send"),V(st,"class","btn btn-primary"),V(ot,"class","tooltip"),V(ot,"data-tip","Skip"),V(W,"class","flex h-full justify-around items-center"),V(P,"class","flex flex-col w-full h-screen justify-between"),V(e,"class","flex overflow-x-hidden")},m(lt,It){rr(lt,r,It),tt(r,e),tt(e,n),tt(n,i),tt(i,a),tt(i,o),tt(i,s),t[24](s),tt(n,u),tt(n,f),tt(f,l),tt(f,c),tt(f,d),$t(d,t[15]),tt(n,v),le(p,n,null),tt(n,g),tt(n,m),tt(m,b),tt(m,y),tt(m,S),$t(S,t[13]),tt(n,E),tt(n,x),tt(x,_),tt(_,C),tt(_,D),tt(_,M),M.checked=t[12],tt(n,I),le(T,n,null),tt(e,A),tt(e,P),tt(P,L),tt(L,k),pt&&pt.m(k,null),tt(k,B),tt(k,H),vt&&vt.m(H,null),tt(H,Y),gt&&gt.m(H,null),t[33](H),tt(k,G),Ct&&Ct.m(k,null),tt(k,K),Dt&&Dt.m(k,null),t[36](k),tt(P,$),tt(P,W),tt(W,j),tt(j,X),tt(W,z),tt(W,U),tt(U,it),tt(W,rt),tt(W,Q),tt(Q,Z),tt(W,ht),tt(W,ot),tt(ot,st),ut=!0,St||(xt=[Yt(s,"change",t[25]),Yt(d,"input",t[26]),Yt(d,"blur",t[16]),Yt(S,"input",t[28]),Yt(M,"change",t[29]),Yt(X,"click",t[20]),Yt(it,"click",t[19]),Yt(Z,"click",t[17]),Yt(st,"click",t[18])],St=!0)},p(lt,It){It[0]&32768&&d.value!==lt[15]&&$t(d,lt[15]);const we={};It[0]&1024&&(we.moveableText=lt[10]),!h&&It[0]&64&&(h=!0,we.textData=lt[6],ho(()=>h=!1)),p.$set(we),It[0]&8192&&S.value!==lt[13]&&$t(S,lt[13]),It[0]&4096&&(M.checked=lt[12]);const Nr={};!R&&It[0]&256&&(R=!0,Nr.fileContainerBackground=lt[8],ho(()=>R=!1)),T.$set(Nr),lt[11]?pt?(pt.p(lt,It),It[0]&2048&&Xt(pt,1)):(pt=ys(lt),pt.c(),Xt(pt,1),pt.m(k,B)):pt&&(gi(),lr(pt,1,1,()=>{pt=null}),mi()),lt[4]?vt?vt.p(lt,It):(vt=xs(lt),vt.c(),vt.m(H,Y)):vt&&(vt.d(1),vt=null),lt[5]?gt?gt.p(lt,It):(gt=Ss(lt),gt.c(),gt.m(H,null)):gt&&(gt.d(1),gt=null),lt[11]?Ct?(Ct.p(lt,It),It[0]&2048&&Xt(Ct,1)):(Ct=_s(lt),Ct.c(),Xt(Ct,1),Ct.m(k,K)):Ct&&(gi(),lr(Ct,1,1,()=>{Ct=null}),mi()),lt[4]||lt[5]?Dt?(Dt.p(lt,It),It[0]&48&&Xt(Dt,1)):(Dt=Es(lt),Dt.c(),Xt(Dt,1),Dt.m(k,null)):Dt&&(gi(),lr(Dt,1,1,()=>{Dt=null}),mi()),(!ut||It[0]&256)&&Tr(k,"background-image","url("+lt[8]+")")},i(lt){ut||(Xt(p.$$.fragment,lt),Xt(T.$$.fragment,lt),Xt(pt),Xt(Ct),Xt(Dt),ut=!0)},o(lt){lr(p.$$.fragment,lt),lr(T.$$.fragment,lt),lr(pt),lr(Ct),lr(Dt),ut=!1},d(lt){lt&&Jt(r),t[24](null),ce(p),ce(T),pt&&pt.d(),vt&&vt.d(),gt&&gt.d(),t[33](null),Ct&&Ct.d(),Dt&&Dt.d(),t[36](null),St=!1,Fr(xt)}}}const ig=({detail:t})=>{t.target.style.transform=t.transform},ag=({detail:t})=>{t.target.style.transform=t.afterTransform},og=({detail:t})=>{t.target.style.width=`${t.width}px`,t.target.style.height=`${t.height}px`,t.target.style.transform=t.drag.transform},sg=({detail:t})=>{t.target.style.transform=t.drag.transform},ug=({detail:t})=>{t.target.style.transform=t.transform},fg=({detail:t})=>{t.target.style.transform=t.afterTransform},lg=({detail:t})=>{t.target.style.width=`${t.width}px`,t.target.style.height=`${t.height}px`,t.target.style.transform=t.drag.transform},cg=({detail:t})=>{t.target.style.transform=t.drag.transform};function dg(t,r,e){let n="",i=eg,a,o,s,u,f,l,c=!1,d=!1,v=!1,p=!1,h={text:"",font:"Arial",color:"#FFFFF",fontSize:62},g,m,b,y,S,E="",x=!1,_;function C(){let z;try{new URL(E)}catch{return}Re.get(n+"/video-url?url="+E).then(U=>{z=U.data,z.url==="none"&&console.log("erreur"),e(5,d=z.type.indexOf("image")!==-1||z.type.indexOf("png")!==-1),e(22,x=!0),e(23,_=z),d||e(4,c=!0)}).catch(U=>{console.log(U)})}addEventListener("resize",()=>{m=1920/a.offsetWidth});async function D(){m=1920/a.offsetWidth;let z={data:"",haveFile:d||c},U=null;if(v&&(U=u.getRect(),z={data:h.text,left:U.left,top:U.top,font_size:h.fontSize,font_family:h.font,font_color:h.color,haveFile:d||c,ratio:m},!c&&!d))return{text:z};let it=s.getRect(),rt=x?_.url:await y.arrayBuffer();return{data:x?rt:Array.from(new Uint8Array(rt)),fileSize:x?0:y.size,fullscreen:!1,width:it.width,height:it.height,left:it.left,top:it.top,timestamp:d?"":f.currentTime,muted:d?"":f.muted,ratio:m,isLink:x,haveText:v,typeFile:x?_.type:y.type,anonymous:!0,greenscreen:p,user:g,text:z}}async function M(){if(d||c){let z=await D();console.log(z),await Re.post(n+"/sendFile",z,{headers:{"Content-Type":"application/json"}})}else if(v){let z=await D();console.log(z),await Re.post(n+"/sendText",z,{headers:{"Content-Type":"application/json"}})}}async function I(){let z={user:g};await Re.post(n+"/skip",z,{headers:{"Content-Type":"application/json"}})}async function T(){let z={user:g};await Re.post(n+"/flush",z,{headers:{"Content-Type":"application/json"}}),R()}function R(){console.log("clean"),e(14,S.value="",S),e(5,d=!1),e(4,c=!1),e(6,h={})}function A(z){ir[z?"unshift":"push"](()=>{S=z,e(14,S)})}function P(){b=this.files,e(7,b)}function L(){E=this.value,e(15,E)}function k(z){h=z,e(6,h)}function B(){g=this.value,e(13,g)}function H(){p=this.checked,e(12,p)}function Y(z){i=z,e(8,i)}function G(z){ir[z?"unshift":"push"](()=>{f=z,e(2,f),e(4,c),e(22,x),e(23,_),e(21,y),e(0,a),e(1,s),e(7,b)})}function K(z){ir[z?"unshift":"push"](()=>{l=z,e(3,l),e(5,d),e(21,y),e(0,a),e(1,s),e(7,b)})}function $(z){ir[z?"unshift":"push"](()=>{o=z,e(9,o),e(2,f),e(4,c),e(22,x),e(23,_),e(21,y),e(0,a),e(1,s),e(3,l),e(5,d),e(7,b)})}function W(z){ir[z?"unshift":"push"](()=>{u=z,e(10,u)})}function j(z){ir[z?"unshift":"push"](()=>{s=z,e(1,s)})}function X(z){ir[z?"unshift":"push"](()=>{a=z,e(0,a)})}return t.$$.update=()=>{if(t.$$.dirty[0]&2097280&&b){e(21,y=b[0]);try{y.type.includes("image")?(e(4,c=!1),e(5,d=!0)):y.type.includes("video")&&(e(4,c=!0),e(5,d=!1))}catch(z){console.log(z),e(4,c=!1),e(5,d=!1)}}t.$$.dirty[0]&14680087&&f&&c&&(e(2,f.src=x?_.url:URL.createObjectURL(y),f),f.addEventListener("loadedmetadata",function(){e(9,o.style.height="",o),e(9,o.style.width="",o),e(9,o.style.height=f.videoHeight+"",o),e(9,o.style.width=f.videoWidth+"",o),f.videoHeight>a.offsetHeight&&(e(9,o.style.height=a.getBoundingClientRect().height+"px",o),e(9,o.style.width="auto",o)),s.updateRect()},{once:!0})),t.$$.dirty[0]&2097195&&l&&d&&(e(9,o.style.height="",o),e(9,o.style.width="",o),e(3,l.src=URL.createObjectURL(y),l),l.addEventListener("load",()=>{e(9,o.style.height=l.height+"",o),e(9,o.style.width=l.width+"",o),l.height>a.offsetHeight&&(e(9,o.style.height=a.getBoundingClientRect().height+"px",o),e(9,o.style.width="auto",o)),s.updateRect()},{once:!0})),t.$$.dirty[0]&64&&((()=>{if(h.text===void 0){e(11,v=!1);return}e(11,v=h.text.length>0)})(),h.text)},[a,s,f,l,c,d,h,b,i,o,u,v,p,g,S,E,C,M,I,T,R,y,x,_,A,P,L,k,B,H,Y,G,K,$,W,j,X]}class pg extends Je{constructor(r){super(),$e(this,r,dg,ng,Ke,{},null,[-1,-1])}}new pg({target:document.getElementById("app")});
